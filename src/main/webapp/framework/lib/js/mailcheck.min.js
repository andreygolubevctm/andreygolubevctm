var Mailcheck={domainThreshold:2,secondLevelThreshold:2,topLevelThreshold:2,defaultDomains:[],defaultSecondLevelDomains:[],defaultTopLevelDomains:["com","com.au","net","net.au","org","org.au","edu","edu.au","gov","gov.au"],run:function(e){e.domains=e.domains||Mailcheck.defaultDomains,e.secondLevelDomains=e.secondLevelDomains||Mailcheck.defaultSecondLevelDomains,e.topLevelDomains=e.topLevelDomains||Mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||Mailcheck.sift3Distance;var n=function(e){return e},o=e.suggested||n,t=e.empty||n,i=Mailcheck.suggest(Mailcheck.encodeEmail(e.email),e.domains,e.secondLevelDomains,e.topLevelDomains,e.distanceFunction);return i?o(i):t()},suggest:function(e,n,o,t,i){e=e.toLowerCase();var a=this.splitEmail(e),l=this.findClosestDomain(a.domain,n,i,this.domainThreshold);if(l)return l==a.domain?!1:{address:a.address,domain:l,full:a.address+"@"+l};var c=this.findClosestDomain(a.secondLevelDomain,o,i,this.secondLevelThreshold),r=this.findClosestDomain(a.topLevelDomain,t,i,this.topLevelThreshold);if(a.domain){var l=a.domain,s=!1;if(c&&c!=a.secondLevelDomain&&(l=l.replace(a.secondLevelDomain,c),s=!0),r&&r!=a.topLevelDomain&&(l=l.replace(a.topLevelDomain,r),s=!0),1==s)return{address:a.address,domain:l,full:a.address+"@"+l}}return!1},findClosestDomain:function(e,n,o,t){t=t||this.topLevelThreshold;var i,a=99,l=null;if(!e||!n)return!1;o||(o=this.sift3Distance);for(var c=0;c<n.length;c++){if(e===n[c])return e;i=o(e,n[c]),a>i&&(a=i,l=n[c])}return t>=a&&null!==l?l:!1},sift3Distance:function(e,n){if(null==e||0===e.length)return null==n||0===n.length?0:n.length;if(null==n||0===n.length)return e.length;for(var o=0,t=0,i=0,a=0,l=5;o+t<e.length&&o+i<n.length;){if(e.charAt(o+t)==n.charAt(o+i))a++;else{t=0,i=0;for(var c=0;l>c;c++){if(o+c<e.length&&e.charAt(o+c)==n.charAt(o)){t=c;break}if(o+c<n.length&&e.charAt(o)==n.charAt(o+c)){i=c;break}}}o++}return(e.length+n.length)/2-a},splitEmail:function(e){var n=$.trim(e).split("@");if(n.length<2)return!1;for(var o=0;o<n.length;o++)if(""===n[o])return!1;var t=n.pop(),i=t.split("."),a="",l="";if(0==i.length)return!1;if(1==i.length)l=i[0];else{a=i[0];for(var o=1;o<i.length;o++)l+=i[o]+".";l=l.substring(0,l.length-1)}return{topLevelDomain:l,secondLevelDomain:a,domain:t,address:n.join("@")}},encodeEmail:function(e){var n=encodeURI(e);return n=n.replace("%20"," ").replace("%25","%").replace("%5E","^").replace("%60","`").replace("%7B","{").replace("%7C","|").replace("%7D","}")}};"undefined"!=typeof module&&module.exports&&(module.exports=Mailcheck),"function"==typeof define&&define.amd&&define("mailcheck",[],function(){return Mailcheck}),"undefined"!=typeof window&&window.jQuery&&!function(e){e.fn.mailcheck=function(e){var n=this;if(e.suggested){var o=e.suggested;e.suggested=function(e){o(n,e)}}if(e.empty){var t=e.empty;e.empty=function(){t.call(null,n)}}e.email=this.val(),Mailcheck.run(e)}}(jQuery);