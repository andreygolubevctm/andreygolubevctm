function returnAge(e,t){var a=new Date;a.setHours(0,0,0);var n=returnDate(e),i=a.getFullYear()-n.getFullYear();if(1>i)return(a-n)/31536e6;var o=i-a.getFullYear()%4;o=(o-o%4)/4;var l,r=(366*o+365*(i-o))/i;l=n.getMonth()==a.getMonth()&&n.getDate()>a.getDate()?-.005:.005;var s=(a-n)/(864e5*r)+l;return t?Math.floor(s):s}function returnDate(e){if(""===e)return null;var t=e.split("/");return t.length<3?null:new Date(t[2],t[1]-1,t[0])}function isLessThan31Or31AndBeforeJuly1(e){if(""===e)return!1;var t=Math.floor(returnAge(e));if(31>t)return!1;if(31==t){var a=returnDate(e),n=returnDate(e);n.setFullYear(a.getFullYear()+31);var i=new Date;return a.getMonth()+1<7&&(i.getMonth()+1>=7||i.getFullYear()>n.getFullYear())?!0:a.getMonth()+1>=7&&i.getMonth()+1>=7&&i.getFullYear()>n.getFullYear()?!0:!1}return t>31?!0:!1}function resetRadio(e,t){e.val()!=t&&(e.find("input").prop("checked",!1),e.find("label").removeClass("active"),null!=t&&(e.find("input[value="+t+"]").prop("checked","checked"),e.find("input[value="+t+"]").parent().addClass("active")))}function formatMoney(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}!function(e,t){function a(){}function n(t){e("[data-source]",e(t)).each(function(){e(this).empty()})}function i(t){e("[data-source]",e(t)).each(function(){var t="",a=e(this),n=e(a.attr("data-source")),i=e(a.attr("data-alternate-source"));if(n.length){if(sourceType=n.get(0).tagName.toLowerCase(),dataType=a.attr("data-type"),callback=a.attr("data-callback"),callback)try{var l=callback.split(".");if(l.length){for(var r=l.pop(),s=window,d=0;d<l.length;d++)s=s[l[d]];t=s[r].apply(s,[n])}else t=callback.apply(window,[n])}catch(c){o.modules.errorHandling.error({message:"Unable to perform render Content Population Callback properly.",page:"contentPopulation.js:render()",errorLevel:"silent",description:"Unable to perform contentPopulation callback labelled: "+callback,data:{error:c.toString(),sourceElement:a.attr("data-source")}}),t=""}else if(dataType){var h;switch(dataType){case"checkboxgroup":h=n.parent().find(":checked").next("label"),h.length&&(t=h.text()||"");break;case"radiogroup":h=n.find(":checked").parent("label"),h.length&&(t=h.text()||"");break;case"list":var u=n.find("li");u.length>0?u.each(function(){t+="<li>"+e(this).find("span:eq(0)").text()+"</li>"}):t+="<li>None selected</li>";break;case"optional":t=n.val()||i.val()||"",""!==t&&e(".noDetailsEntered").remove();break;case"object":}}else switch(sourceType){case"select":var p=n.find("option:selected");""===p.val()?t="":(t=p.text()||"",""===t&&i.length&&(p=i.find("option:selected"),t=""===p.val()?"":p.text()||""));break;case"input":t=n.val()||i.val()||"";break;default:t=n.html()||i.html()||""}a.html(t)}})}var o=window.meerkat,l=(o.modules.events,o.logging.info,{contentPopulation:{}});l.contentPopulation;o.modules.register("contentPopulation",{init:a,events:l,render:i,empty:n})}(jQuery),function(e,t){function a(){if("confirmation"===P.site.pageAction)P.modules.journeyEngine.configure(null);else{i(!1);var e=null;P.site.isFromBrochureSite===!0?e=A.detailsStep.navigationId:P.site.journeyStage.length>0&&"amend"===P.site.pageAction&&(e="apply"===P.site.journeyStage||"payment"===P.site.journeyStage?"results":P.site.journeyStage),P.modules.journeyEngine.configure({startStepId:e,steps:_.toArray(A)});var t=P.modules.transactionId.get();P.messaging.publish(S.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Start",transactionID:parseInt(t,10),simplesUser:P.site.isCallCentreUser}}),P.site.isNewQuote===!1&&P.messaging.publish(S.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Retrieve",transactionID:t,simplesUser:P.site.isCallCentreUser}})}}function n(){P.messaging.subscribe(S.WEBAPP_LOCK,function(e){var t="undefined"!=typeof e&&e.source&&"submitApplication"===e.source;v(t)}),P.messaging.subscribe(S.WEBAPP_UNLOCK,function(e){f()}),e("#health_application-selection").delegate(".changeStateAndQuote","click",p)}function i(e){o(),l(),e&&P.modules.journeyProgressBar.render(!0)}function o(){var t={title:"Your Details",navigationId:"start",slideIndex:0,externalTracking:{method:"trackQuoteForms",object:P.modules.health.getTrackingFieldsObject},onInitialise:function(t){e(".health-situation-healthCvr").on("change",function(){healthChoices.setCover(e(this).val())}),e(".health-situation-location").on("change",function(){healthChoices.setLocation(e(this).val())}),""!==e("#health_situation_location").val()&&healthChoices.setLocation(e("#health_situation_location").val()),"Y"===e("#health_privacyoptin").val()&&e(".slide-feature-emailquote").addClass("privacyOptinChecked"),"amend"!==P.site.pageAction&&"start-again"!==P.site.pageAction&&0===P.modules.healthBenefits.getSelectedBenefits().length&&""!==e(".health-situation-healthSitu").val()&&e(".health-situation-healthSitu").change();var a=e(".slide-feature-emailquote");e(".health-contact-details-optin-group .checkbox").on("click",function(t){var n=e("#health_privacyoptin");"Y"===n.val()?a.addClass("privacyOptinChecked"):a.removeClass("privacyOptinChecked")}),P.site.isCallCentreUser===!0&&(C(),k(),P.modules.provider_testing.setApplicationDateCalendar(),e("input[name=health_simples_contactType]").on("change",function(){C()}),e(".follow-up-call input:checkbox, .simples-privacycheck-statement input:checkbox").on("change",function(){k()}))}},a={title:"Your Details",navigationId:"details",slideIndex:1,tracking:{touchType:"H",touchComment:"HLT detail",includeFormData:!0},externalTracking:{method:"trackQuoteForms",object:P.modules.health.getTrackingFieldsObject},onInitialise:function(t){healthCoverDetails.setHealthFunds(!0),healthCoverDetails.setIncomeBase(!0),e("#health_healthCover_dependants").on("change",function(){P.modules.healthTiers.setTiers()}),e("#health_healthCover-selection").find(".health_cover_details_rebate").on("change",function(){healthCoverDetails.setIncomeBase(),healthChoices.dependants(),P.modules.healthTiers.setTiers()}),P.site.isCallCentreUser===!0&&e("#health_healthCover_incomeBase").find("input").on("change",function(){e("#health_healthCover_income").prop("selectedIndex",0),P.modules.healthTiers.setTiers()}),e("#health_healthCover-selection").find(":input").on("change",function(t){var a=e(this);a.hasClass("dateinput-day")||a.hasClass("dateinput-month")||a.hasClass("dateinput-year")||(healthCoverDetails.setHealthFunds(),P.site.isCallCentreUser===!0&&u(function(t){e(".health_cover_details_rebate .fieldrow_legend").html("Overall LHC "+t.loading+"%"),s()?(e("#health_healthCover_primaryCover .fieldrow_legend").html("Individual LHC "+t.primaryLoading+"%, overall  LHC "+t.loading+"%"),e("#health_healthCover_partnerCover .fieldrow_legend").html("Individual LHC "+t.partnerLoading+"%, overall  LHC "+t.loading+"%")):e("#health_healthCover_primaryCover .fieldrow_legend").html("Overall  LHC "+t.loading+"%"),P.modules.healthTiers.setTiers()}))}),P.site.isCallCentreUser===!0&&(D(),e("input[name=health_healthCover_rebate]").on("change",function(){D()}))},onBeforeLeave:function(t){var a=e("#health_healthCover_income :selected").val().length>0?e("#health_healthCover_income :selected").text():"";e("#health_healthCover_incomelabel").val(a)}},n={title:"Your Cover",navigationId:"benefits",slideIndex:1,slideScrollTo:"#navbar-main",tracking:{touchType:"H",touchComment:"HLT benefi",includeFormData:!0},externalTracking:{method:"trackQuoteForms",object:P.modules.health.getTrackingFieldsObject},validation:{validate:!1},onInitialise:function(e){P.modules.healthResults.initPage()},onBeforeEnter:function(e){P.modules.healthBenefits.close(),P.modules.navMenu.disable()},onAfterEnter:function(t){"xs"===P.modules.deviceMediaState.get()&&P.modules.utils.scrollPageTo("html",0,1),P.site.isCallCentreUser===!0&&e("#journeyEngineSlidesContainer .journeyEngineSlide").eq(P.modules.journeyEngine.getCurrentStepIndex()).find(".simples-dialogue").hide(),t.isStartMode===!1&&_.defer(function(){P.modules.healthBenefits.open("journey-mode")}),_.delay(function(){P.modules.healthSegment.filterSegments()},1e3)},onAfterLeave:function(e){var t=P.modules.healthBenefits.getSelectedBenefits();P.modules.healthResults.onBenefitsSelectionChange(t),P.modules.navMenu.enable()}},i={title:"Your Contact Details",navigationId:"contact",slideIndex:2,tracking:{touchType:"H",touchComment:"HLT contac",includeFormData:!0},externalTracking:{method:"trackQuoteForms",object:P.modules.health.getTrackingFieldsObject},validation:{validate:!0},onInitialise:function(e){},onBeforeEnter:function(e){},onAfterEnter:function(e){P.modules.navMenu.enable()},onAfterLeave:function(e){P.messaging.publish(P.modules.tracking.events.tracking.TOUCH,this)}},o={title:"Your Results",navigationId:"results",slideIndex:3,validation:{validate:!1,customValidation:function(t){if(P.site.isCallCentreUser===!0){var a=e(".resultsSlide").find(".simples-dialogue.mandatory:visible");a.length!=a.find("input:checked").length&&(P.modules.dialogs.show({htmlContent:"Please complete the mandatory dialogue prompts before applying."}),t(!1))}null===P.modules.healthResults.getSelectedProduct()&&t(!1),t(!0)}},onInitialise:function(e){P.modules.healthMoreInfo.initMoreInfo()},onBeforeEnter:function(t){t.isForward&&P.site.isCallCentreUser?e("#journeyEngineSlidesContainer .journeyEngineSlide").eq(P.modules.journeyEngine.getCurrentStepIndex()).find(".simples-dialogue").show():P.modules.healthResults.resetSelectedProduct(),t.isForward&&P.site.isCallCentreUser&&e("#journeyEngineSlidesContainer .journeyEngineSlide").eq(P.modules.journeyEngine.getCurrentStepIndex()).find(".simples-dialogue").show()},onAfterEnter:function(e){e.isBackward===!0&&P.modules.healthResults.onReturnToPage(),e.isForward===!0&&P.modules.healthResults.get(),P.modules.resultsHeaderBar.registerEventListeners()},onAfterLeave:function(e){P.modules.healthResults.stopColumnWidthTracking(),P.modules.healthResults.recordPreviousBreakpoint(),P.modules.healthResults.toggleMarketingMessage(!1),P.modules.healthResults.toggleResultsLowNumberMessage(!1),P.modules.healthMoreInfo.close(),P.modules.resultsHeaderBar.removeEventListeners()}},l={title:"Your Application",navigationId:"apply",slideIndex:4,tracking:{touchType:"A"},externalTracking:{method:"trackQuoteForms",object:P.modules.health.getTrackingFieldsObject},onInitialise:function(t){healthApplicationDetails.init(),e(".changes-premium :input").on("change",function(e){P.messaging.publish(E.health.CHANGE_MAY_AFFECT_PREMIUM)}),e("#health_previousfund_primary_fundName, #health_previousfund_partner_fundName").on("change",function(){healthCoverDetails.displayHealthFunds()}),P.site.isCallCentreUser===!0&&(""!==e("#health_previousfund_primary_fundName").val()&&"NONE"!=e("#health_previousfund_primary_fundName").val()||""!==e("#health_previousfund_partner_fundName").val()&&"NONE"!==e("#health_previousfund_partner_fundName").val()?e(".simples-dialogue-15").first().show():e(".simples-dialogue-15").first().hide(),e("#health_previousfund_primary_fundName, #health_previousfund_partner_fundName").on("change",function(){""!==e(this).val()&&"NONE"!==e(this).val()?e(".simples-dialogue-15").first().show():""!==e("#health_previousfund_primary_fundName").val()&&"NONE"!=e("#health_previousfund_primary_fundName").val()||""!==e("#health_previousfund_partner_fundName").val()&&"NONE"!==e("#health_previousfund_partner_fundName").val()||e(".simples-dialogue-15").first().hide()})),e("#health_application_address_postCode, #health_application_address_streetSearch, #health_application_address_suburb").on("change",function(){healthApplicationDetails.testStatesParity()}),e("#health_application_dependants_income").on("change",function(){e("#mainform").find(".health_cover_details_income").val(e(this).val())}),e(".health_dependant_details .dateinput_container input.serialise").on("change",function(t){healthDependents.checkDependent(e(this).closest(".health_dependant_details").attr("data-id")),e(this).valid()}),e(".health_dependant_details_fulltimeGroup input").on("change",function(t){healthDependents.checkDependent(e(this).closest(".health_dependant_details").attr("data-id")),e(this).parents(".health_dependant_details").find(".dateinput_container input.serialise").valid()}),e("#health_application_dependants-selection").find(".remove-last-dependent").on("click",function(){healthDependents.dropDependent()}),e("#health_application_dependants-selection").find(".add-new-dependent").on("click",function(){healthDependents.addDependent()}),e("#health_payment_details_start_calendar").datepicker({clearBtn:!1,format:"dd/mm/yyyy"}).on("changeDate",function(t){e("#health_payment_details_start").val(t.format()),P.messaging.publish(E.health.CHANGE_MAY_AFFECT_PREMIUM)})},onBeforeEnter:function(t){if(t.isForward===!0){var a=P.modules.healthResults.getSelectedProduct();"undefined"!=typeof a.warningAlert&&""!==a.warningAlert?e("#health_application-warning").find(".fundWarning").show().html(a.warningAlert):e("#health_application-warning").find(".fundWarning").hide().empty(),this.tracking.touchComment=a.info.provider+" "+a.info.des,this.tracking.productId=a.productId.replace("PHIO-HEALTH-",""),healthFunds.load(a.info.provider);var n=e("#journeyEngineSlidesContainer .journeyEngineSlide").slice(P.modules.journeyEngine.getCurrentStepIndex()-1);n.find(".error-field").remove(),n.find(".has-error").removeClass("has-error"),e("#health_declaration input:checked").prop("checked",!1).change(),healthDependents.setDependants(),""===e("#health_contactDetails_contactNumber_mobile").val()&&""===e("#health_contactDetails_contactNumber_other").val()&&P.site.isCallCentreUser===!1&&e("#health_application_okToCall-group").show();var i=P.modules.healthPaymentStep.getSetting("minStartDate"),o=P.modules.healthPaymentStep.getSetting("maxStartDate");e("#health_payment_details_start_calendar").datepicker("setStartDate",i).datepicker("setEndDate",o)}},onAfterEnter:function(e){healthDependents.updateDependentOptionsDOM()}},r={title:"Your Payment",navigationId:"payment",slideIndex:5,tracking:{touchType:"H",touchComment:"HLT paymnt",includeFormData:!0},externalTracking:{method:"trackQuoteForms",object:P.modules.health.getTrackingFieldsObject},onInitialise:function(t){e("#joinDeclarationDialog_link").on("click",function(){var e=P.modules.healthResults.getSelectedProduct();P.modules.dialogs.show({title:"Declaration",url:"health_fund_info/"+e.info.provider.toUpperCase()+"/declaration.html"}),P.messaging.publish(S.tracking.EXTERNAL,{method:"trackOfferTerms",object:{productID:e.productId}})}),e("#submit_btn").on("click",function(t){var a=P.modules.journeyEngine.isCurrentStepValid();P.site.isCallCentreUser===!0&&e(".agg_privacy").each(function(){var t=e(this);t.find(".error-count").remove();var a=t.find(".error-field label");t.children("button").after('<span class="error-count'+(a.length>0?" error-field":"")+'" style="margin-left:10px">'+a.length+" validation errors in this panel.</span>")}),a&&g()})},onBeforeEnter:function(t){if(t.isForward===!0){var a=P.modules.healthResults.getSelectedProduct();"undefined"!=typeof a.promo.discountText&&""!==a.promo.discountText?e("#health_payment_details-selection").find(".definition").show().html(a.promo.discountText):e("#health_payment_details-selection").find(".definition").hide().empty(),"undefined"!=typeof a.warningAlert&&""!==a.warningAlert?e("#health_payment_details-selection").find(".fundWarning").show().html(a.warningAlert):e("#health_payment_details-selection").find(".fundWarning").hide().empty(),e("#mainform").find(".health_declaration span").text(a.info.providerName);var n=e("#health_payment_medicare_firstName"),i=e("#health_payment_medicare_surname");""===n.val()&&n.val(e("#health_application_primary_firstname").val()),""===i.val()&&i.val(e("#health_application_primary_surname").val());var o=P.modules.healthResults.getSelectedProduct(),l=["GMHBA","Frank","Budget Direct","Bupa","HIF"];"N"==e("input[name=health_healthCover_rebate]:checked").val()&&-1==e.inArray(o.info.providerName,l)?e("#health_payment_medicare-selection").hide().attr("style","display:none !important"):e("#health_payment_medicare-selection").removeAttr("style")}}};A={startStep:t,detailsStep:a,benefitsStep:n,contactStep:i,resultsStep:o,applyStep:l,paymentStep:r}}function l(){P.modules.journeyProgressBar.configure([{label:"Your Situation",navigationId:A.startStep.navigationId,matchAdditionalSteps:[A.detailsStep.navigationId]},{label:"Your Cover",navigationId:A.benefitsStep.navigationId},{label:"Your details",navigationId:A.contactStep.navigationId},{label:"Your Results",navigationId:A.resultsStep.navigationId},{label:"Your Application",navigationId:A.applyStep.navigationId},{label:"Your Payment",navigationId:A.paymentStep.navigationId}])}function r(){var t=e("#health_contactDetails_optin"),a={name:[{$field:e("#health_contactDetails_name")},{$field:e("#health_application_primary_firstname"),$otherField:e("#health_application_primary_surname")}],dob_primary:[{$field:e("#health_healthCover_primary_dob"),$fieldInput:e("#health_healthCover_primary_dob")},{$field:e("#health_application_primary_dob"),$fieldInput:e("#health_application_primary_dob")}],dob_secondary:[{$field:e("#health_healthCover_partner_dob"),$fieldInput:e("#health_healthCover_partner_dob")},{$field:e("#health_application_partner_dob"),$fieldInput:e("#health_application_partner_dob")}],email:[{$field:e("#health_contactDetails_email"),$optInField:t},{$field:e("#health_application_email"),$optInField:e("#health_application_optInEmail")}],mobile:[{$field:e("#health_contactDetails_contactNumber_mobile"),$fieldInput:e("#health_contactDetails_contactNumber_mobileinput"),$optInField:t},{$field:e("#health_application_mobile"),$fieldInput:e("#health_application_mobileinput")}],otherPhone:[{$field:e("#health_contactDetails_contactNumber_other"),$fieldInput:e("#health_contactDetails_contactNumber_otherinput"),$optInField:t},{$field:e("#health_application_other"),$fieldInput:e("#health_application_otherinput")}],postcode:[{$field:e("#health_situation_postcode")},{$field:e("#health_application_address_postCode"),$fieldInput:e("#health_application_address_postCode")}]};P.modules.contactDetails.configure(a)}function s(){var t=e(':input[name="health_situation_healthCvr"]').val();return"F"==t||"C"==t?!0:!1}function d(){return T}function c(){return null!=T&&T.rebate?T.rebate:0}function h(t){T=t,e("#health_rebate").val(T.rebate||""),e("#health_rebateChangeover").val(T.rebateChangeover||""),e("#health_loading").val(T.loading||""),e("#health_primaryCAE").val(T.primaryCAE||""),e("#health_partnerCAE").val(T.partnerCAE||""),P.modules.healthResults.setLhcApplicable(T.loading)}function u(t){$healthCoverDetails=e(".health-cover_details");var a={dependants:$healthCoverDetails.find(':input[name="health_healthCover_dependants"]').val(),income:$healthCoverDetails.find(':input[name="health_healthCover_income"]').val(),rebate_choice:$healthCoverDetails.find('input[name="health_healthCover_rebate"]:checked').val(),primary_loading:$healthCoverDetails.find('input[name="health_healthCover_primary_healthCoverLoading"]:checked').val(),primary_current:$healthCoverDetails.find('input[name="health_healthCover_primary_cover"]:checked').val(),primary_loading_manual:$healthCoverDetails.find(".primary-lhc").val(),partner_loading:$healthCoverDetails.find('input[name="health_healthCover_partner_healthCoverLoading"]:checked').val(),partner_current:$healthCoverDetails.find('input[name="health_healthCover_partner_cover"]:checked').val(),partner_loading_manual:$healthCoverDetails.find(".partner-lhc").val(),cover:e(':input[name="health_situation_healthCvr"]').val()};""===e("#health_application_provider, #health_application_productId").val()?(a.primary_dob=$healthCoverDetails.find('input[name="health_healthCover_primary_dob"]').val(),a.partner_dob=$healthCoverDetails.find('input[name="health_healthCover_partner_dob"]').val()):(a.primary_dob=e("#health_application_primary_dob").val(),a.partner_dob=e("#health_application_partner_dob").val(),a.primary_current="NONE"==e("#clientFund").find(":selected").val()?"N":"Y",a.partner_current="NONE"==e("#partnerFund").find(":selected").val()?"N":"Y");var n=s();if(""===a.cover)return!1;if(""===a.rebate_choice)return!1;if(""===a.primary_dob)return!1;if(n&&""===a.partner_dob)return!1;if(returnAge(a.primary_dob)<0)return!1;if(n&&returnAge(a.partner_dob)<0)return!1;if("Y"===a.rebate_choice&&""===a.income)return!1;var i=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/;return a.primary_dob.match(i)?n&&!a.partner_dob.match(i)?!1:void P.modules.comms.post({url:"ajax/json/health_rebate.jsp",data:a,cache:!0,errorLevel:"warning",onSuccess:function(e){h(e),null!=t&&t(e)}}):!1}function p(t){t.preventDefault();var a=e("#health_application_address_suburbName").val(),n=e("#health_application_address_postCode").val(),i=e("#health_application_address_state").val();e("#health_situation_location").val([a,n,i].join(" ")),e("#health_situation_suburb").val(a),e("#health_situation_postcode").val(n),e("#health_situation_state").val(i),healthChoices.setState(i),window.location=this.href;var o=P.messaging.subscribe(S.journeyEngine.STEP_CHANGED,function(e){P.messaging.unsubscribe(S.journeyEngine.STEP_CHANGED,o),P.modules.healthResults.get()})}function m(){try{var t=e("#health_situation_state").val(),a=e("#health_application_address_state").val();a.length&&a!=t&&(t=a);var n=null,i=e("input[name=health_application_primary_gender]:checked");i&&("M"==i.val()?n="Male":"F"==i.val()&&(n="Female"));var o="",l=e("#health_healthCover_primary_dob").val();l.length&&(o=l.split("/")[2]);var r="Y"===e("input[name=health_contactDetails_call]","#mainform").val()?"Y":"N",s="Y"===e("input[name=health_application_optInEmail]:checked","#mainform").val()?"Y":"N",d=e("#health_contactDetails_email").val(),c=e("#health_application_email").val();c.length>0&&(d=c);var h=P.modules.transactionId.get(),u=P.modules.journeyEngine.getCurrentStepIndex(),p=P.modules.journeyEngine.getFurtherestStepIndex(),m="";switch(u){case 0:m="health situation";break;case 1:m="health details";break;case 2:m="health cover";break;case 3:m="health cover contact";break;case 5:m="health application";break;case 6:m="health payment";break;case 7:m="health confirmation"}var f={vertical:"Health",actionStep:m,transactionID:h,quoteReferenceNumber:h,postCode:null,state:null,healthCoverType:null,healthSituation:null,gender:null,yearOfBirth:null,email:null,emailID:null,marketOptIn:null,okToCall:null,simplesUser:P.site.isCallCentreUser};return p>P.modules.journeyEngine.getStepIndex("start")&&e.extend(f,{postCode:e("#health_application_address_postCode").val(),state:t,healthCoverType:e("#health_situation_healthCvr").val(),healthSituation:e("#health_situation_healthSitu").val()}),p>P.modules.journeyEngine.getStepIndex("details")&&e.extend(f,{yearOfBirth:o,email:d,marketOptIn:s,okToCall:r}),p>P.modules.journeyEngine.getStepIndex("apply")&&e.extend(f,{gender:n}),f}catch(_){return!1}}function f(){var t=e("#submit_btn");t.removeClass("disabled"),P.modules.loadingAnimation.hide(t)}function v(t){var a=e("#submit_btn");a.addClass("disabled"),t===!0&&P.modules.loadingAnimation.showAfter(a)}function g(){if(I===!0)return void alert("Your application is still being submitted. Please wait.");I=!0,P.messaging.publish(E.WEBAPP_LOCK,{source:"submitApplication"});try{var e=P.modules.journeyEngine.getFormData();P.messaging.publish(E.WEBAPP_LOCK,{source:"submitApplication",disableFields:!0}),P.modules.comms.post({url:"ajax/json/health_application.jsp",data:e,cache:!1,useDefaultErrorHandling:!1,errorLevel:"silent",timeout:25e4,onSuccess:function(e){P.modules.leavePageWarning.disable();var t="health_confirmation.jsp?action=confirmation&transactionId="+P.modules.transactionId.get()+"&token=",a="";""!==P.site.utm_source&&""!==P.site.utm_medium&&""!==P.site.utm_campaign&&(a="&utm_source="+P.site.utm_source+"&utm_medium="+P.site.utm_medium+"&utm_campaign="+P.site.utm_campaign),e.result&&e.result.success?window.location.replace(t+e.result.confirmationID+a):e.result&&e.result.pendingID&&e.result.pendingID.length>0&&(!e.result.callcentre||e.result.callcentre!==!0)?window.location.replace(t+e.result.pendingID+a):(P.messaging.publish(E.WEBAPP_UNLOCK,{source:"submitApplication"}),b(e))},onError:y,onComplete:function(){I=!1}})}catch(t){I=!1,y()}}function y(e,t,a,n,i){P.messaging.publish(E.WEBAPP_UNLOCK,{source:"submitApplication"}),I=!1,a==P.modules.comms.getCheckAuthenticatedLabel()||b("Server generated error"==t?a:i)}function b(t){var a=t;t.hasOwnProperty("error")&&"object"==typeof t.error&&(a=t.error);var n="",i=!1;try{if(t.result&&t.result.errors){var o=t.result.errors;e.isArray(o.error)&&(o=o.error),e.each(o,function(e,t){n+="<p>",n+="[Code: "+t.code+"] "+t.text,n+="</p>"}),""===n&&(n="An unhandled error was received.")}else if(a&&a.hasOwnProperty("type"))switch(a.type){case"validation":i=!0;break;case"timeout":n="Fund application service timed out.";break;case"parsing":n="Error parsing the XML request - report issue to developers.";break;case"confirmed":n=a.message;break;case"transaction":n=a.message;break;case"submission":n=a.message;break;default:n="["+a.code+"] "+a.message+" (Please report to IT before continuing)"}else n="An unhandled error was received."}catch(l){n="Application unsuccessful. Failed to handle response: "+l.message}i?(P.modules.serverSideValidationOutput.outputValidationErrors({validationErrors:a.errorDetails.validationErrors,startStage:"payment"}),"undefined"!=typeof a.transactionId&&P.modules.transactionId.set(a.transactionId)):(P.site.isCallCentreUser===!1&&(n='Please contact us on <span class="callCentreHelpNumber">'+P.site.content.callCentreHelpNumberApplication+"</span> for assistance."),P.modules.errorHandling.error({message:"<strong>Application failed:</strong><br/>"+n,page:"health.js",errorLevel:"warning",description:"handleSubmittedApplicationErrors(). Submit failed: "+n,data:t}),healthFunds.applicationFailed&&healthFunds.applicationFailed())}function C(){e("#health_simples_contactType_inbound").is(":checked")?(e(".follow-up-call").addClass("hidden"),e(".simples-privacycheck-statement, .new-quote-only").removeClass("hidden"),e(".simples-privacycheck-statement input:checkbox").prop("disabled",!1)):e("#health_simples_contactType_outbound").is(":checked")?e(".simples-privacycheck-statement, .new-quote-only, .follow-up-call").addClass("hidden"):e("#health_simples_contactType_followup").is(":checked")?(e(".simples-privacycheck-statement, .new-quote-only").addClass("hidden"),e(".follow-up-call").removeClass("hidden"),e(".follow-up-call input:checkbox").prop("disabled",!1)):e("#health_simples_contactType_callback").is(":checked")&&(e(".simples-privacycheck-statement, .new-quote-only, .follow-up-call").removeClass("hidden"),k())}function D(){e("#health_healthCover_rebate_Y").is(":checked")?e(".simples-dialogue-37").removeClass("hidden"):e("#health_healthCover_rebate_N").is(":checked")&&e(".simples-dialogue-37").addClass("hidden")}function k(){var t=e(".follow-up-call input:checkbox"),a=e(".simples-privacycheck-statement input:checkbox");t.is(":checked")?(a.attr("checked",!1),a.prop("disabled",!0),e(".simples-privacycheck-statement .error-field").hide()):a.is(":checked")?(t.attr("checked",!1),t.prop("disabled",!0),e(".follow-up-call .error-field").hide()):(a.prop("disabled",!1),t.prop("disabled",!1),e(".simples-privacycheck-statement .error-field").show(),e(".follow-up-call .error-field").show())}function w(){e(document).ready(function(){return"health"!==P.site.vertical?!1:(a(),"confirmation"===P.site.pageAction?!1:(P.site.isCallCentreUser===!1&&setInterval(function(){var t=e("#chat-health-insurance-sales").html();""===t||"<span></span>"===t?e("#contact-panel").removeClass("hasButton"):e("#contact-panel").addClass("hasButton")},5e3),n(),r(),("amend"===P.site.pageAction||"load"===P.site.pageAction||"start-again"===P.site.pageAction)&&("undefined"!=typeof healthFunds&&healthFunds.checkIfNeedToInjectOnAmend?healthFunds.checkIfNeedToInjectOnAmend(function(){P.modules.form.markInitialFieldsWithValue(e("#mainform"))}):P.modules.form.markInitialFieldsWithValue(e("#mainform"))),e("#health_contactDetails_optin").on("click",function(){var t=e(this).is(":checked")?"Y":"N";e("#health_privacyoptin").val(t),e("#health_contactDetails_optInEmail").val(t),e("#health_contactDetails_call").val(t)}),"Y"===e('input[name="health_directApplication"]').val()&&(e("#health_application_productId").val(P.site.loadProductId),e("#health_application_productTitle").val(P.site.loadProductTitle)),healthDependents.init(),void(P.site.isCallCentreUser===!0&&P.modules.simplesSnapshot.initSimplesSnapshot())))})}var P=window.meerkat,S=P.modules.events,E={health:{CHANGE_MAY_AFFECT_PREMIUM:"CHANGE_MAY_AFFECT_PREMIUM"},WEBAPP_LOCK:"WEBAPP_LOCK",WEBAPP_UNLOCK:"WEBAPP_UNLOCK"},T=null,A=null,I=!1;P.modules.register("health",{init:w,events:E,initProgressBar:i,getTrackingFieldsObject:m,getRates:d,getRebate:c,loadRates:u})}(jQuery),function(e,t){function a(){return s}function n(){return d}function i(e){return _.indexOf(c,e)>=0}function o(){e(document).ready(function(){var e=l.site.alternatePricing;_.isNull(e)||!_.isObject(e)||_.isEmpty(e)||e.hasOwnProperty("isActive")&&e.hasOwnProperty("fromMonth")&&e.hasOwnProperty("disabledFunds")&&(s=e.isActive,d=e.fromMonth,c=e.disabledFunds)})}var l=window.meerkat,r=(l.modules.events,{}),s=!1,d=null,c=[];l.modules.register("healthAltPricing",{init:o,events:r,getIsActive:a,getFromMonth:n,isFundDisabled:i})}(jQuery),function(e){function t(){var t=e("#health_benefits_benefitsExtras_Hospital").is(":checked"),a=e("#health_benefits_benefitsExtras_GeneralHealth").is(":checked");return t>0&&a?"Combined":t?"Hospital":a?"GeneralHealth":"None"}function a(e,t,a){return R?void 0:""===e?(i([],t),void("function"==typeof a&&a())):void I.modules.comms.post({url:"ajax/csv/get_benefits.jsp",data:{situation:e},errorLevel:"silent",cache:!0,onSuccess:function(e){defaultBenefits=e.split(","),i(defaultBenefits,t),"function"==typeof a&&a()}})}function n(){e("#mainform input[type='hidden'].benefit-item").val("")}function i(t,a){a&&n();for(var i=0;i<t.length;i++){var o=t[i];e("#mainform input[name='health_benefits_benefitsExtras_"+o+"'].benefit-item").val("Y")}}function o(){E.find(".benefits-list input[type='checkbox']").prop("checked",!1),A&&E.find(".benefits-list input[type='checkbox']").change()}function l(){o(),e("#mainform input.benefit-item").each(function(t,a){var n=e(a);if("Y"==n.val()){var i=n.attr("name");E.find(".benefits-list :input[name='"+i+"']").prop("checked",!0),A&&E.find(".benefits-list :input[name='"+i+"']").change()}}),E.find("input.checkbox-switch").bootstrapSwitch("setState"),E.find("input.hasChildren").each(function(e,t){s(t)})}function r(t){0===E.find(":input.hasChildren:checked").length?(E.find(".btn-save").prop("disabled",!0),E.find("a.btn-save").addClass("disabled")):(E.find(".btn-save").prop("disabled",!1),E.find("a.btn-save").removeClass("disabled")),s(e(this))}function s(t){var a=e(t),n=!a.is(":checked"),i=a.parents(".short-list-item").first(),o=i.find(".children :input");o.prop("disabled",n),n===!0?(i.addClass("disabled"),o.prop("checked",!1)):i.removeClass("disabled"),A&&o.change()}function d(){var t=[];return e("#mainform input.benefit-item").each(function(a,n){var i=e(n);if("Y"==i.val()){var o=i.attr("data-skey");t.push(o)}}),t}function c(){n();var t=[];return E.find(":input:checked").each(function(a,n){var i=e("#mainform input[name='"+e(n).attr("name")+"'].benefit-item");i.val("Y"),t.push(i.attr("data-skey"))}),_.contains(t,"Hospital")?e("#filter-tierHospital").removeClass("hidden"):(e("#filter-tierHospital").addClass("hidden"),e("#filters_tierHospital").val(""),e("#health_filter_tierHospital").val("")),_.contains(t,"GeneralHealth")?e("#filter-tierExtras").removeClass("hidden"):(e("#filter-tierExtras").addClass("hidden"),e("#filters_tierExtras").val(""),e("#health_filter_tierExtras").val("")),t}function h(){var e="";I.modules.journeyEngine.getCurrentStep()&&(e=I.modules.journeyEngine.getCurrentStep().navigationId),
"results"===e&&I.modules.journeyEngine.loadingShow("getting your quotes",!0),b(),_.defer(function(){var e=c();T===M?I.modules.journeyEngine.gotoPath("next"):I.messaging.publish(x.CHANGED,e),I.site.isCallCentreUser===!0&&(R=!0)})}function u(t){$target=e(t.currentTarget),$target.find("input").prop("disabled")===!0&&($target.parents(".hasShortlistableChildren").first().find(".title").first().find(":input").prop("checked",!0),E.find("input.checkbox-switch").bootstrapSwitch("setState"))}function p(){var t=e("#health_situation_healthSitu").val(),n=m();""===n||"ATP"===t?a(t,!0):a(t,!0,function(){a(n,!1)})}function m(){var t=e("#health_situation_healthCvr").val(),a=e("#health_healthCover_primary_dob").val(),n=e("#health_healthCover_partner_dob").val(),i=0,o=0,l=0,r="";return"F"===t||"SPF"===t?r="FAM":"S"!==t&&"SM"!==t&&"SF"!==t||""===a?"C"===t&&""!==a&&""!==n&&(i=returnAge(a),o=returnAge(n),i>=16&&120>=i&&o>=16&&120>=o&&(l=Math.floor((i+o)/2),r=f(l))):(l=returnAge(a,!0),r=f(l)),r}function f(e){return e>=16&&30>=e?"YOU":e>=31&&55>=e?"MID":e>=56&&120>=e?"MAT":""}function v(){("localhost"===I.site.environment||"nxi"===I.site.environment||"nxs"===I.site.environment)&&""!==e("#health_productTitleSearch").val().trim()&&(n(),e("#mainform input[name='health_benefits_benefitsExtras_Hospital'].benefit-item").val("Y"),e("#mainform input[name='health_benefits_benefitsExtras_GeneralHealth'].benefit-item").val("Y"))}function g(e){v(),T=e,I.modules.navMenu.open(),S.hasClass("open")===!1&&(E.addClass(T),S.find(".activator").dropdown("toggle"))}function y(){E.find(":input.hasChildren").on("change.benefits",r),E.find(".btn-save").on("click.benefits",h),E.find(".btn-cancel").on("click.benefits",b),E.find(".categoriesCell .checkbox").on("click.benefits",u)}function b(){S.hasClass("open")&&(k()?(P(),S.find(".activator").dropdown("toggle"),w()):S.find(".activator").dropdown("toggle"),I.modules.navMenu.close())}function C(){E.find("input.hasChildren").off("change.benefits"),E.find(".btn-save").off("click.benefits"),E.find(".btn-cancel").off("click.benefits"),E.find(".categoriesCell .checkbox").off("click.benefits",u),E.removeClass("journey-mode"),E.removeClass("popover-mode"),T=null}function D(){e(document).ready(function(){return"health"!==I.site.vertical||"confirmation"===I.site.pageAction?!1:(S=e("#benefits-dropdown"),E=e(".benefits-component"),A=I.modules.performanceProfiling.isIE8(),S.on("show.bs.dropdown",function(){null===T&&(T=$),y(),l()}),S.on("hide.bs.dropdown",function(e){2==I.modules.journeyEngine.getCurrentStepIndex()&&(e.preventDefault(),I.modules.dropdownInteractive.addBackdrop(S))}),S.on("hidden.bs.dropdown",function(){C()}),I.messaging.subscribe(F.journeyEngine.STEP_CHANGED,function(e){"benefits"!==e.navigationId&&I.modules.healthBenefits.close()}),e("[data-benefits-control='Y']").click(function(e){e.preventDefault(),e.stopPropagation(),g($)}),e("#health_situation_healthSitu").add("#health_healthCover_primary_dob").add("#health_healthCover_partner_dob").add("#health_situation_healthCvr").on("change",function(e){p()}),I.messaging.subscribe(F.WEBAPP_LOCK,w),void I.messaging.subscribe(F.WEBAPP_UNLOCK,P))})}function k(){return S.children(".activator").hasClass("disabled")}function w(){S.children(".activator").addClass("inactive").addClass("disabled")}function P(){S.children(".activator").removeClass("inactive").removeClass("disabled")}var S,E,T,A,I=window.meerkat,F=I.modules.events,R=(I.logging.info,!1),N={healthBenefits:{CHANGED:"HEALTH_BENEFITS_CHANGED"}},x=N.healthBenefits,$="popover-mode",M="journey-mode";I.modules.register("healthBenefits",{init:D,events:N,open:g,close:b,getProductCategory:t,getSelectedBenefits:d,getBenefitsForSituation:a})}(jQuery),function(e,t){function a(){jQuery(document).ready(function(e){"undefined"!=typeof i.site&&"confirmation"===i.site.pageAction&&(i.modules.health.initProgressBar(!0),i.modules.journeyProgressBar.setComplete(),i.modules.journeyProgressBar.disable(),result.hasOwnProperty("data")===!1||"OK"!=result.data.status||""===result.data.product?i.modules.errorHandling.error({message:result.data.message,page:"healthConfirmation.js module",description:"Trying to load the confirmation page failed",data:null,errorLevel:"warning"}):(l=e.extend({},result.data),l.mode="lhcInc",l.product?(l.pending=!1,l.product=e.parseJSON(l.product),l.product.price&&_.isArray(l.product.price)&&(l.product=l.product.price[0]),e.extend(l,l.product),delete l.product):"object"==typeof sessionProduct?(sessionProduct.price&&_.isArray(sessionProduct.price)&&(sessionProduct=sessionProduct.price[0]),l.transID===sessionProduct.transactionId?e.extend(l,sessionProduct):sessionProduct=t,l.pending=!0):l.pending=!0,i.modules.healthMoreInfo.setProduct(l),i.modules.healthMoreInfo.prepareCover(),1==l.frequency.length&&(l.frequency=i.modules.healthResults.getFrequencyInWords(l.frequency)),l._selectedFrequency=l.frequency,n(),(""===l.warningAlert||l.warningAlert===t)&&i.modules.healthMoreInfo.prepareExternalCopy(function(){"undefined"!=typeof l.warningAlert&&""!==l.warningAlert?e("#health_confirmation-warning").find(".fundWarning").show().html(l.warningAlert):e("#health_confirmation-warning").find(".fundWarning").hide().empty()}),i.modules.healthMoreInfo.applyEventListeners(),i.messaging.publish(o.tracking.EXTERNAL,{method:"completedApplication",object:{productID:l.productId,vertical:i.site.vertical,productBrandCode:l.info.provider,productName:l.info.productTitle,quoteReferenceNumber:l.transactionId,simplesUser:i.site.isCallCentreUser,reedemedCouponID:e(".coupon-confirmation").data("couponId")}})))})}function n(){var t=e("#confirmation-template").html(),a=_.template(t),n=a(l);e("#confirmation").html(n),i.messaging.subscribe(o.healthPriceComponent.INIT,function(e){i.modules.healthPriceComponent.updateProductSummaryHeader(l,l.frequency,!0),i.modules.healthPriceComponent.updateProductSummaryDetails(l,l.startDate,!1)}),""===l.about&&i.modules.healthMoreInfo.prepareExternalCopy(function(){e(".aboutFund").append(l.aboutFund).parents(".displayNone").first().removeClass("displayNone")})}var i=window.meerkat,o=i.modules.events,l=(i.logging.info,null);i.modules.register("healthConfirmation",{init:a})}(jQuery),function(e,t){function a(){n("value")}function n(t,a){var n=t||"value";m.find("[data-filter-type]").each(function(){var t=e(this),i=t.attr("data-filter-type"),o=t.attr("id"),l="";if("undefined"!=typeof o){if("slider"===i&&(t.find(".slider-control").trigger("UPDATE"),l=t.find(".slider").val()),"radio"===i&&(l=t.find(":checked").val()||"",a!==!0))if("filter-frequency"===o){try{l=Results.getFrequency()}catch(r){}l=v.modules.healthResults.getFrequencyInLetters(l)||"A",t.find('input[value="'+l+'"]').prop("checked",!0).change()}else if("filter-sort"===o){try{l=Results.getSortBy()}catch(r){}l=l.indexOf("price")>-1?"L":"B",t.find('input[value="'+l+'"]').prop("checked",!0).change()}if("select"===i&&(l=t.find(":selected").val()||"",a!==!0&&("filter-tierHospital"===o?(l=e("#health_filter_tierHospital").val(),t.find("select").val(l)):"filter-tierExtras"===o&&(l=e("#health_filter_tierExtras").val(),t.find("select").val(l)))),"checkbox"===i){var s=[];s="filter-provider"===o?t.find("[type=checkbox]:not(:checked)").map(function(){return this.value}):t.find("[type=checkbox]:checked").map(function(){return this.value}),l=s.get().join(b),a!==!0&&"filter-provider"===o&&(l=e("#health_filter_providerExclude").val(),s=l.split(b),t.find(":checkbox").each(function(){var t=e(this);e.inArray(t.attr("value"),s)<0?t.prop("checked",!0).change():t.prop("checked",!1).change()}))}y.hasOwnProperty(o)||(y[o]={}),y[o].type=i,y[o][n]=l}})}function i(){var e,t;for(t in y)if(y.hasOwnProperty(t))switch(e=y[t].value,y[t].type){case"slider":m.find("#"+t+" .slider").val(e);break;case"radio":""===e?m.find("#"+t+" input").prop("checked",!1).change():m.find("#"+t+' input[value="'+e+'"]').prop("checked",!0).change();break;case"select":m.find("#"+t+" select").val(e)}}function o(){var t=f.find("[type=checkbox]:checked").length;return 1>t?(f.find(":checkbox").addClass("has-error"),0===f.find(".alert").length&&f.prepend('<div id="health-filter-alert" class="alert alert-danger">Please select at least 1 brand to compare results</div>'),void(window.location.href="#health-filter-alert")):(f.find(":checkbox").removeClass("has-error"),f.find(".alert").remove(),m.addClass("is-saved"),s(),"xs"===v.modules.deviceMediaState.get()?v.modules.navMenu.close():p.closest(".navbar-collapse").removeClass("in"),void _.defer(function(){var t,a,i,o=!1,l={};n("valueNew",!0);for(i in y)if(y.hasOwnProperty(i)&&y[i].value!==y[i].valueNew&&e("#"+i).attr("data-filter-serverside")){o=!0;break}for(i in y)if(y.hasOwnProperty(i)&&(t=y[i].value,a=y[i].valueNew,t!==a))if("filter-frequency"===i)e("#health_filter_frequency").val(a),a=v.modules.healthResults.getFrequencyInWords(a)||"monthly",o||(refreshView=!0,y.hasOwnProperty("filter-sort")&&"L"===y["filter-sort"].value&&y["filter-sort"].value===y["filter-sort"].valueNew&&(refreshSort=!0),l["filter-frequency-change"]=a),Results.setFrequency(a,!1);else if("filter-sort"===i){var r="asc";switch(a){case"L":if(y.hasOwnProperty("filter-frequency")){a=v.modules.healthResults.getFrequencyInWords(y["filter-frequency"].valueNew)||"monthly",a="price."+a;break}a="price.monthly";break;default:a="benefitsSort"}Results.setSortBy(a),Results.setSortDir(r)}else"filter-tierHospital"===i?e("#health_filter_tierHospital").val(a):"filter-tierExtras"===i?e("#health_filter_tierExtras").val(a):"filter-provider"===i&&e("#health_filter_providerExclude").val(a);v.messaging.publish(D.CHANGED,l),o?_.defer(function(){v.modules.journeyEngine.loadingShow("...updating your quotes...",!0),_.delay(function(){v.modules.healthResults.get()},100)}):Results.applyFiltersAndSorts()}))}function l(){p.hasClass("open")===!1&&p.find(".activator").dropdown("toggle")}function r(){m.find(".btn-save").on("click.filters",o),m.find(".btn-cancel").on("click.filters",s)}function s(){p.hasClass("open")&&p.find(".activator").dropdown("toggle")}function d(){m.hasClass("is-saved")?m.removeClass("is-saved"):i(),m.find(".btn-save").off("click.filters"),m.find(".btn-cancel").off("click.filters"),m.find(":checkbox").removeClass("has-error"),m.find(".alert").remove()}function c(){e(".selectNotRestrictedBrands").on("click",function(){e(".notRestrictedBrands [type=checkbox]:not(:checked)").prop("checked",!0).change()}),e(".unselectNotRestrictedBrands").on("click",function(){e(".notRestrictedBrands [type=checkbox]:checked").prop("checked",!1).change()}),e(".selectRestrictedBrands").on("click",function(){e(".restrictedBrands [type=checkbox]:not(:checked)").prop("checked",!0).change()}),e(".unselectRestrictedBrands").on("click",function(){e(".restrictedBrands [type=checkbox]:checked").prop("checked",!1).change()})}function h(){var t=e("#health_filter_frequency").val();t.length>0&&(e("#filter-fequency").find('input[value="'+t+'"]').prop("checked",!0),v.modules.healthPriceRangeFilter.setUp())}function u(){e(document).ready(function(){return"health"!==v.site.vertical||"confirmation"===v.site.pageAction?!1:(p=e("#filters-dropdown"),m=e(".filters-component"),f=e("#filter-provider"),p.on("show.bs.dropdown",function(){r(),a()}),p.on("hidden.bs.dropdown",function(){d()}),f.find(":checkbox").on("change",function(){e(this).removeClass("has-error"),f.find(".alert").remove()}),c(),h(),v.messaging.subscribe(g.WEBAPP_LOCK,function(e){s(),p.children(".activator").addClass("inactive").addClass("disabled")}),void v.messaging.subscribe(g.WEBAPP_UNLOCK,function(e){p.children(".activator").removeClass("inactive").removeClass("disabled")}))})}var p,m,f,v=window.meerkat,g=v.modules.events,y=(v.logging.info,{}),b=",",C={healthFilters:{CHANGED:"HEALTH_FILTERS_CHANGED"}},D=C.healthFilters;v.modules.register("healthFilters",{init:u,events:C,open:l,close:s})}(jQuery),function(e,t){function a(){var t={container:M,updateTopPositionVariable:E,modalOptions:{className:"modal-breakpoint-wide modal-tight bridgingContainer",openOnHashChange:!1,leftBtn:{label:"All Products",icon:'<span class="icon icon-arrow-left"></span>',callback:function(t){e(t.currentTarget).closest(".modal").modal("hide")}}},runDisplayMethod:c,onBeforeShowBridgingPage:null,onBeforeShowTemplate:d,onBeforeShowModal:onBeforeShowModal,onAfterShowModal:u,onAfterShowTemplate:h,onBeforeHideTemplate:null,onAfterHideTemplate:null,onClickApplyNow:l,onBeforeApply:o,onApplySuccess:i,retrieveExternalCopy:retrieveExternalCopy,onBreakpointChangeCallback:r};R.modules.moreInfo.initMoreInfo(t),s(),n()}function n(){e(document.body).on("click",".dialogPop",function(){R.modules.dialogs.show({title:e(this).attr("title"),htmlContent:e(this).attr("data-content")})})}function i(){R.modules.address.setHash("apply")}function o(t){Results.getSelectedProduct()!==!1&&Results.getSelectedProduct().productId!=t.attr("data-productId")&&e("#health_declaration:checked").prop("checked",!1).change()}function l(e,t){healthFunds.load(e.info.provider,t),R.modules.healthResults.setSelectedProduct(e),R.modules.partnerTransfer.trackHandoverEvent({product:e,type:R.site.isCallCentreUser?"Simples":"Online",quoteReferenceNumber:transaction_id,transactionID:transaction_id,productID:e.productId.replace("PHIO-HEALTH-",""),productName:e.info.name,productBrandCode:e.info.FundCode,simplesUser:R.site.isCallCentreUser},!1)}function r(){R.modules.moreInfo.updateTopPositionVariable()}function s(){R.messaging.subscribe(N.device.STATE_ENTER_XS,function(){R.modules.moreInfo.isBridgingPageOpen()&&R.modules.moreInfo.close()}),R.messaging.subscribe(N.device.STATE_LEAVE_XS,function(){R.modules.moreInfo.isModalOpen()&&R.modules.moreInfo.close()}),R.messaging.subscribe($.bridgingPage.SHOW,function(e){p(e.isOpen)}),R.messaging.subscribe($.bridgingPage.HIDE,function(e){p(e.isOpen)})}function d(t){R.site.emailBrochures.enabled&&(f(A,moreInfoContainer,e("#resultsForm")),S()),e(".more-info-content .next-info-all").html(e(".more-info-content .next-steps-all-funds-source").html())}function c(e){"xs"!=R.modules.deviceMediaState.get()?R.modules.moreInfo.showTemplate(M):R.modules.moreInfo.showModal(),R.modules.address.appendToHash("moreinfo")}function h(){R.modules.healthPhoneNumber.changePhoneNumber(),R.modules.healthSegment.hideBySegment(),e("#health_fundData_hospitalPDF").val(A.promo.hospitalPDF!==t?R.site.urls.base+A.promo.hospitalPDF:""),e("#health_fundData_extrasPDF").val(A.promo.extrasPDF!==t?R.site.urls.base+A.promo.extrasPDF:""),e("#health_fundData_providerPhoneNumber").val(A.promo.providerPhoneNumber!==t?A.promo.providerPhoneNumber:"")}function u(){}function p(t){t?e(Results.settings.elements.page).css("overflow","hidden").height(F.outerHeight()):e(Results.settings.elements.page).css("overflow","visible").height("")}function m(t){e(Results.settings.elements.page).find(".result").removeClass("faded"),e(".btn-close-more-info").removeClass("btn-close-more-info").addClass("btn-more-info"),t.slideUp(400,function(){t.html("").hide(),B=!1,R.messaging.publish($.bridgingPage.CHANGE,{isOpen:B}),R.messaging.publish($.bridgingPage.HIDE,{isOpen:B})})}function f(e,t,a){var n=t.find(".moreInfoEmailBrochures");n.show(),R.modules.emailBrochures.setup({emailInput:n.find(".sendBrochureEmailAddress"),submitButton:n.find(".btn-email-brochure"),form:a,marketing:n.find(".optInMarketing"),productData:[{name:"hospitalPDSUrl",value:e.promo.hospitalPDF},{name:"extrasPDSUrl",value:e.promo.extrasPDF},{name:"provider",value:e.info.provider},{name:"providerName",value:e.info.providerName},{name:"productName",value:e.info.productTitle},{name:"productId",value:e.productId},{name:"productCode",value:e.info.productCode},{name:"premium",value:e.premium[Results.settings.frequency].lhcfreetext},{name:"premiumText",value:e.premium[Results.settings.frequency].lhcfreepricing}],product:e,identifier:"SEND_BROCHURES"+e.productId,emailResultsSuccessCallback:function(a,n){a.success?(t.find(".formInput").hide(),t.find(".moreInfoEmailBrochuresSuccess").show(),R.modules.emailBrochures.tearDown(n),R.modules.healthResults.setSelectedProduct(e)):R.modules.errorHandling.error({errorLevel:"warning",message:'Oops! Something seems to have gone wrong. Please try again by re-entering your email address or alternatively contact our call centre on <span class="callCentreHelpNumber">'+R.site.content.callCentreHelpNumber+"</span> and they'll be able to assist you further.",page:"healthMoreInfo.js:onSendBrochuresCallback",description:a.message,data:e})}})}function v(){e("#"+I).modal("hide"),O=!1}function g(e){m(F),R.modules.resultsHeaderBar.enableAffixMode(),O&&v()}function y(e,t){return A=e,A!==!1&&(t===!0?A.showApply=!0:A.showApply=!1),A}function b(){return B===!1?null:A}function C(e){D(),k(e)}function D(){"undefined"==typeof A.hospitalCover&&"undefined"!=typeof A.hospital&&"undefined"!=typeof A.hospital.benefits&&(w("hospital.benefits","hospitalCover"),P(A.hospital.inclusions.publicHospital,"hospitalCover","Public Hospital"),P(A.hospital.inclusions.privateHospital,"hospitalCover","Private Hospital")),"undefined"==typeof A.extrasCover&&"undefined"!=typeof A.extras&&"object"==typeof A.extras&&w("extras","extrasCover")}function k(t){A.aboutFund="<p>Apologies. This information did not download successfully.</p>",A.whatHappensNext="<p>Apologies. This information did not download successfully.</p>",A.warningAlert="",e.when(R.modules.comms.get({url:"health_fund_info/"+A.info.provider+"/about.html",cache:!0,errorLevel:"silent",onSuccess:function(e){A.aboutFund=e}}),R.modules.comms.get({url:"health_fund_info/"+A.info.provider+"/next_info.html",cache:!0,errorLevel:"silent",onSuccess:function(e){A.whatHappensNext=e}}),R.modules.comms.get({url:"health/quote/dualPrising/getFundWarning.json",data:{providerId:A.info.providerId},cache:!0,errorLevel:"silent",onSuccess:function(e){A.warningAlert=e.warningMessage}})).then(t,t)}function w(e,t){A[t]={inclusions:[],restrictions:[],exclusions:[]};var a,n;_.each(Object.byString(A,e),function(i,o){a=e+"."+o+".covered",foundObject=_.findWhere(resultLabels,{p:a}),"undefined"!=typeof foundObject&&(n=foundObject.n,P(i.covered,t,n))})}function P(e,t,a){switch(e){case"Y":A[t].inclusions.push(a);break;case"R":A[t].restrictions.push(a);break;case"N":A[t].exclusions.push(a)}}function S(){var t=e("#health_contactDetails_email").val();""!==t&&e("#emailAddress").val(t).trigger("blur")}function E(){T=e(".resultsHeadersBg").height()}var T,A,I,F,R=window.meerkat,N=R.modules.events,x={healthMoreInfo:{}},$=x.healthMoreInfo,M=e(".bridgingContainer"),O=!1,B=!1;R.modules.register("healthMoreInfo",{initMoreInfo:a,events:x,setProduct:y,prepareProduct:C,prepareCover:D,prepareExternalCopy:k,getOpenProduct:b,close:g,applyEventListeners:n})}(jQuery),function(e,t){var a=window.meerkat,n=(a.modules.events,{healthMoreInfo:{bridgingPage:{CHANGE:"BRIDGINGPAGE_CHANGE",SHOW:"BRIDGINGPAGE_SHOW",HIDE:"BRIDGINGPAGE_HIDE"}}});n.healthMoreInfo}(jQuery),function(e,t){function a(){e(document).ready(function(){l=e(".health_payment_day"),r=e(".health_details-policyDate"),l.on("change",function(){s.messaging.publish(d.POLICY_DATE_CHANGE,e(this).val())})})}function n(e,t,a,n){"undefined"==typeof n&&(n=7),("undefined"==typeof a||a.length<1)&&(a=[1]);var i=null;i="undefined"==typeof t||""===t?new Date:s.modules.utils.returnDate(t),i=new Date(i.getTime()+24*n*60*60*1e3);for(var o=0,l=!1;31>o&&!l;)i=new Date(i.getTime()+864e5),l=_.contains(a,i.getDate()),o++;r.val(s.modules.utils.returnDateValue(i)),e.text("Your payment will be deducted on: "+healthFunds._getNiceDate(i))}function i(t,a,n,i){var l,r,d,c,h;l="undefined"==typeof t||""===t?new Date:s.modules.utils.returnDate(t),"undefined"==typeof a&&(a=7),"undefined"==typeof n&&(n=!1),"undefined"==typeof i&&(i=!0),h=e(i?"#health_payment_bank_paymentDay":"#health_payment_credit_paymentDay"),r=new Date(l),n?r=s.modules.utils.calcWorkingDays(r,a):r.setDate(r.getDate()+a),h.children().each(function(){""!==e(this).val()&&(d=new Date(e(this).val()),c=o(d,r),e(this).val(s.modules.utils.returnDateValue(c)))})}function o(e,t){if(t>e){var a=new Date(e.setMonth(e.getMonth()+1));return o(a,t)}return e}var l,r,s=window.meerkat,d={POLICY_DATE_CHANGE:"POLICY_DATE_CHANGE"};s.modules.register("healthPaymentDate",{init:a,events:d,paymentDaysRenderEarliestDay:n,populateFuturePaymentDays:i})}(jQuery),function(e,t){function a(e){return e.origin!==y.origin?void console.error("domain name mismatch"):void("string"==typeof e.data&&"page loaded"===e.data?clearTimeout(k):o(e.data))}function n(){}function i(t){y=t,c=e("#"+y.name+"_nab_cardNumber"),h=e("#"+y.name+"_nab_cardName"),u=e("#"+y.name+"_nab_crn"),p=e("#"+y.name+"_nab_rescode"),m=e("#"+y.name+"_nab_restext"),f=e("#"+y.name+"_nab_expiryMonth"),v=e("#"+y.name+"_nab_expiryYear"),g=e("#"+y.name+"_nab_cardType"),e(".gatewayProvider").text("NAB")}function o(e){var t=JSON.parse(e);l(t)?b.messaging.publish(b.modules.events.paymentGateway.SUCCESS,t):b.messaging.publish(b.modules.events.paymentGateway.FAIL,t)}function l(e){var t=e&&e.CRN&&""!==e.CRN;return t=t&&"00"==e.rescode}function r(e){return c.val(e.pan),h.val(e.cardName),u.val(e.CRN),p.val(e.rescode),m.val(e.restext),f.val(e.expMonth),v.val(e.expYear),g.val(e.cardType),!0}function s(e){"undefined"!=typeof e&&(p.val(e.rescode),m.val(e.restext)),c.val(""),h.val(""),u.val(""),p.val(""),m.val(""),f.val(""),v.val(""),g.val("")}function d(e){clearTimeout(k),k=_.delay(function(){b.messaging.publish(C.paymentGateway.FAIL)},45e3);var t='<iframe width="100%" height="390" frameBorder="0" src="'+y.src+"external/hambs/nab_ctm_iframe.jsp?providerCode="+y.providerCode+"&b="+y.brandCode+'"></iframe>';b.modules.dialogs.changeContent(e,t),window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent&&window.attachEvent("onmessage",a)}var c,h,u,p,m,f,v,g,y,b=window.meerkat,C=b.modules.events,D=(b.logging.info,{healthPaymentGatewayNAB:{}}),k=(D.healthPaymentGatewayNAB,!1);b.modules.register("healthPaymentGatewayNAB",{init:n,success:r,fail:s,onOpen:d,setup:i})}(jQuery),function(e,t){function a(){}function n(t){u=t,r=e("#"+u.name+"-registered"),s=e("#"+u.name+"_number"),d=e("#"+u.name+"_type"),c=e("#"+u.name+"_expiry"),h=e("#"+u.name+"_name"),e(".gatewayProvider").text("Westpac")}function i(e){return e&&e.number&&e.type&&e.expiry&&e.name?(s.val(e.number),d.val(e.type),c.val(e.expiry),void h.val(e.name)):(p.messaging.publish(p.modules.events.paymentGateway.FAIL,"Registration response parameters invalid"),!1)}function o(e){r.val(""),s.val(""),d.val(""),c.val(""),h.val("")}function l(e){clearTimeout(m),m=setTimeout(function(){p.modules.dialogs.changeContent(e,'<iframe width="100%" height="340" frameBorder="0" src="'+u.src+"?transactionId="+p.modules.transactionId.get()+'"></iframe>')},1e3)}var r,s,d,c,h,u,p=window.meerkat,m=!1;p.modules.register("healthPaymentGatewayWestpac",{success:i,fail:o,onOpen:l,init:a,setup:n})}(jQuery),function(e,t){function a(){e(document).ready(function(){return"health"!==T.site.vertical||"confirmation"===T.site.pageAction?!1:($coverStateDate=e("#health_payment_details_start"),$coverStateDateCalendar=e("#health_payment_details_start_calendar"),b=e("#health_payment_details_type"),w=e("#health_payment_details_frequency"),$bankAccountDetailsRadioGroup=e("#health_payment_details_claims"),$sameBankAccountRadioGroup=e("#health_payment_bank_claims"),D=e(".health-payment-details_update"),k=e("#update-content"),C=e(".health-payment-details_premium"),P=C.find(".amount"),S=C.find(".frequencyText"),E=C.find(".lhcText"),T.messaging.subscribe(A.WEBAPP_LOCK,function(e){var t="undefined"!=typeof e&&e.source&&"healthPaymentStep"===e.source,a="undefined"!=typeof e&&e.disableFields&&e.disableFields===!0;u(t,a)}),T.messaging.subscribe(A.WEBAPP_UNLOCK,function(e){h()}),T.messaging.subscribe(A.health.CHANGE_MAY_AFFECT_PREMIUM,n),T.messaging.subscribe(A.healthResults.SELECTED_PRODUCT_RESET,function(e){n(),i()}),b.find("input").on("change",c),e("#update-premium").on("click",function(){T.modules.coupon.validateCouponCode(e(".coupon-code-field").val())}),e(".coupon-code-field").on("change",n),e("#update-premium").on("click",p),e("#health_payment_credit_type").on("change",creditCardDetails.set),creditCardDetails.set(),$bankAccountDetailsRadioGroup.find("input").on("click",m),$sameBankAccountRadioGroup.find("input").on("click",m),i(),C.hide(),D.show(),void k.hide())})}function n(){C.hide(),D.show(),k.hide(),e("#health_declaration-selection").hide(),e("#confirm-step").hide(),e(".simples-dialogue-31").hide(),e("#update-premium").removeClass("hasAltPremium")}function i(){F.bank={weekly:!1,fortnightly:!0,monthly:!0,quarterly:!1,halfyearly:!1,annually:!0},F.credit={weekly:!1,fortnightly:!1,monthly:!0,quarterly:!1,halfyearly:!1,annually:!0},F.frequency={weekly:27,fortnightly:31,monthly:27,quarterly:27,halfyearly:27,annually:27},F.creditBankSupply=!1,F.creditBankQuestions=!1,creditCardDetails.resetConfig(),e("#health_payment_details_start").val(""),b.find("input").prop("checked",!1).change(),b.find("label").removeClass("active"),w.val(""),e("#health_payment_details_claims input").prop("checked",!1).change(),e("#health_payment_details_claims input").find("label").removeClass("active"),d(0,90)}function o(e,t){F[e]=t}function l(e){return F[e]}function r(){return b.find("input:checked").val()}function s(){return w.val()}function d(e,t){F.minStartDateOffset=e,F.maxStartDateOffset=t;var a=T.modules.utils.getUTCToday(),n=0,i=0,o=36e5;a+=10*o,n=a,e>0&&(n+=24*e*o),i=a+24*t*o,a=new Date(n),F.minStartDate=a.getUTCDate()+"/"+(a.getUTCMonth()+1)+"/"+a.getUTCFullYear(),a=new Date(i),F.maxStartDate=a.getUTCDate()+"/"+(a.getUTCMonth()+1)+"/"+a.getUTCFullYear()}function c(){var e=r(),t=s(),a=T.modules.healthResults.getSelectedProduct(),n='<option id="health_payment_details_frequency_" value="">Please choose...</option>';if(""===e||null===a)return!1;var i;if("cc"===e)i=F.credit;else{if("ba"!==e)return!1;i=F.bank}var o=a.premium;i.weekly===!0&&o.weekly.value>0&&(n+='<option id="health_payment_details_frequency_W" value="weekly">Weekly</option>'),i.fortnightly===!0&&o.fortnightly.value>0&&(n+='<option id="health_payment_details_frequency_F" value="fortnightly">Fortnightly</option>'),i.monthly===!0&&o.monthly.value>0&&(n+='<option id="health_payment_details_frequency_M" value="monthly">Monthly</option>'),i.quarterly===!0&&o.quarterly.value>0&&(n+='<option id="health_payment_details_frequency_Q" value="quarterly">Quarterly</option>'),i.halfyearly===!0&&o.halfyearly.value>0&&(n+='<option id="health_payment_details_frequency_H" value="halfyearly">Half-yearly</option>'),i.annually===!0&&o.annually.value>0&&(n+='<option id="health_payment_details_frequency_A" value="annually">Annually</option>'),w.html(n).find("option[value="+t+"]").attr("selected","SELECTED")}function h(){var t=e("#update-premium");t.removeClass("disabled");var a=e("#health_payment_details-selection");a.find(":input").not(".disabled-by-fund").prop("disabled",!1),a.find(".select").not(".disabled-by-fund").removeClass("disabled"),a.find(".btn-group label").not(".disabled-by-fund").removeClass("disabled"),e("#health_payment_details_start").parent().find(".datepicker").children().css("visibility","visible"),T.modules.loadingAnimation.hide(t)}function u(t,a){var n=e("#update-premium");if(n.addClass("disabled"),a===!0){var i=e("#health_payment_details-selection");i.find(":input").prop("disabled",!0),i.find(".select").addClass("disabled"),i.find(".btn-group label").addClass("disabled"),e("#health_payment_details_start").parent().find(".datepicker").children().css("visibility","hidden")}t===!0&&T.modules.loadingAnimation.showAfter(n)}function p(){if(T.modules.journeyEngine.isCurrentStepValid()===!1)return!1;var t={actionStep:" health application premium update"};T.messaging.publish(A.tracking.EXTERNAL,{method:"trackQuoteForms",object:t}),T.messaging.publish(I.WEBAPP_LOCK,{source:"healthPaymentStep",disableFields:!0}),_.defer(function(){T.modules.healthResults.getProductData(function(t){if(null===t){var a='<p>Unfortunately this policy is not currently available. Please select another policy or call our Health Insurance Specialists on <span class="callCentreHelpNumber">'+T.site.content.callCentreHelpNumber+'</span> for assistance.</p><div class="col-sm-offset-4 col-xs-12 col-sm-4"><a class="btn btn-next btn-block" id="select-another-product" href="javascript:;">Select Another Product</a><a class="btn btn-cta btn-block visible-xs" href="tel:'+T.site.content.callCentreHelpNumber+'">Call Us Now</a></div>';y=T.modules.dialogs.show({title:"Policy not available",htmlContent:a}),e("#select-another-product").on("click",function(){T.modules.dialogs.close(y),T.modules.journeyEngine.gotoPath("results")})}else _.isArray(t)&&(t=t[0]),T.modules.healthResults.setSelectedProduct(t,!0),C.slideDown(),D.hide(),k.show(),"cc"===r()?(e("#health_payment_credit-selection").slideDown(),e("#health_payment_bank-selection").hide()):(e("#health_payment_bank-selection").slideDown(),e("#health_payment_credit-selection").hide()),e("#health_declaration-selection").slideDown(),m(),f(),e("#confirm-step").show(),e(".simples-dialogue-31").show();T.messaging.publish(I.WEBAPP_UNLOCK,{source:"healthPaymentStep"})})})}function m(){var e=r();"ba"==e?(v("Y"==$bankAccountDetailsRadioGroup.find("input:checked").val()||F.creditBankQuestions===!0&&$bankAccountDetailsRadioGroup.is(":visible")===!1?!0:!1),g("N"==$sameBankAccountRadioGroup.find("input:checked").val()?!0:!1)):"cc"==e&&(v(!1),g("Y"==$bankAccountDetailsRadioGroup.find("input:checked").val()||F.creditBankQuestions===!0&&$bankAccountDetailsRadioGroup.is(":visible")===!1?!0:!1))}function f(){var t=e("#health_payment_bank_day").val(),a=e("#health_payment_credit_day").val();e("#health_payment_bank_day").empty().append("<option id='health_payment_bank_day_' value='' >Please choose...</option>"),e("#health_payment_credit_day").empty().append("<option id='health_payment_credit_day_' value='' >Please choose...</option>");var n,i=s();n=""!==i?F.frequency[s()]:27;for(var o=1;n>=o;o++)e("#health_payment_bank_day").append("<option id='health_payment_bank_day_"+o+"' value='"+o+"'>"+o+"</option>"),e("#health_payment_credit_day").append("<option id='health_payment_credit_day_"+o+"' value='"+o+"'>"+o+"</option>");t&&e("#health_payment_bank_day").val(t),a&&e("#health_payment_credit_day").val(a)}function v(t){t?e(".health_bank-details_claims_group").slideDown():e(".health_bank-details_claims_group").slideUp()}function g(t){t?e(".health-bank_claim_details").slideDown():e(".health-bank_claim_details").slideUp()}var y,b,C,D,k,w,P,S,E,T=window.meerkat,A=T.modules.events,I={WEBAPP_LOCK:"WEBAPP_LOCK",WEBAPP_UNLOCK:"WEBAPP_UNLOCK"},F={bank:[],credit:[],frequency:[],creditBankSupply:!1,creditBankQuestions:!1,minStartDateOffset:0,maxStartDateOffset:90,minStartDate:"",maxStartDate:""};T.modules.register("healthPaymentStep",{init:a,events:I,getSetting:l,overrideSettings:o,setCoverStartRange:d,getSelectedFrequency:s,getSelectedPaymentMethod:r})}(jQuery),function(e,t){function a(){i.messaging.subscribe(o.journeyEngine.STEP_CHANGED,function(e){_.defer(function(){n(!1)})})}function n(t){var a=e(r),n=e(".callCentreHelpNumber"),o=i.modules.address.getWindowHash().split("/")[0];t===!0&&(a=e(".more-info-content").find(r)),s.indexOf(o)>-1?(a.text(i.site.content.callCentreNumberApplication),a.closest(".callCentreNumberClick").attr("href","tel:"+i.site.content.callCentreNumberApplication),n.text(i.site.content.callCentreHelpNumberApplication)):(a.text(i.site.content.callCentreNumber),a.closest(".callCentreNumberClick").attr("href","tel:"+i.site.content.callCentreNumber),n.text(i.site.content.callCentreHelpNumber))}var i=window.meerkat,o=i.modules.events,l={},r=".callCentreNumber",s=["apply","payment"];i.modules.register("healthPhoneNumber",{init:a,events:l,changePhoneNumber:n})}(jQuery),function(e,t){function a(){jQuery(document).ready(function(e){return"health"!==p.site.vertical?!1:(r=e("#logo-price-template").html(),s=e(".policySummaryContainer"),d=e(".policySummaryTemplateHolder"),c=e(".productSummaryDetails"),
g=e(".policySummary.dualPricing"),"confirmation"!=p.site.pageAction&&(h=e("#health_payment_details_frequency"),u=e("#health_payment_details_start"),p.messaging.subscribe(m.healthResults.SELECTED_PRODUCT_CHANGED,function(e){n(e,!1)}),p.messaging.subscribe(m.healthResults.PREMIUM_UPDATED,function(e){n(e,!0)}),p.messaging.subscribe(m.health.CHANGE_MAY_AFFECT_PREMIUM,function(e){s.find(".policyPriceWarning").show()})),l(),void p.messaging.publish(v.INIT))})}function n(e,t){var a=h.val();""===a&&(a=Results.getFrequency()),i(e,a,t);var n="Please confirm";""!==u.val()&&(n=u.val()),o(e,n)}function i(e,t,a){e._selectedFrequency=t,a?e.mode="lhcInc":e.mode="",e.showAltPremium=!1;var n=_.template(r),i=n(e);d.html(i),g.find(".Premium").html(i),s.find(".policyPriceWarning").hide(),g.length>0&&(e.showAltPremium=!0,i=n(e),g.find(".altPremium").html(i))}function o(e,t,a){c.find(".name").text(e.info.providerName+" "+e.info.name),c.find(".startDate").text(t),"undefined"!=typeof e.hospital.inclusions&&(c.find(".excess").html(e.hospital.inclusions.excess),c.find(".excessWaivers").html(e.hospital.inclusions.waivers),c.find(".copayment").html(e.hospital.inclusions.copayment)),c.find(".footer").removeClass("hidden"),c.find(".excess").parent().removeClass("hidden"),c.find(".excessWaivers").parent().removeClass("hidden"),c.find(".copayment").parent().removeClass("hidden"),"undefined"!=typeof a&&a===!1&&c.find(".footer").addClass("hidden"),("undefined"==typeof e.hospital.inclusions||""===e.hospital.inclusions.excess)&&c.find(".excess").parent().addClass("hidden"),("undefined"==typeof e.hospital.inclusions||""===e.hospital.inclusions.waivers)&&c.find(".excessWaivers").parent().addClass("hidden"),("undefined"==typeof e.hospital.inclusions||""===e.hospital.inclusions.copayment)&&c.find(".copayment").parent().addClass("hidden")}function l(){e(".btn-show-how-calculated").on("click",function(){p.modules.dialogs.show({title:"Here is how your premium is calculated:",htmlContent:'<p>The BASE PREMIUM is the cost of a policy set by the health fund. This cost excludes any discounts or additional charges that are applied to the policy due to your age or income.</p><p>LHC LOADING is an initiative designed by the Federal Government to encourage people to take out private hospital cover earlier in life. If you&rsquo;re over the age of 31 and don&rsquo;t already have cover, you&rsquo;ll be required to pay a 2% Lifetime Health Cover loading for every year over the age of 30 that you were without hospital cover. The loading is applied to the BASE PREMIUM of the hospital component of your cover if applicable.<br/>For full information please go to: <a href="http://www.privatehealth.gov.au/healthinsurance/incentivessurcharges/lifetimehealthcover.htm" target="_blank">http://www.privatehealth.gov.au/healthinsurance/incentivessurcharges/lifetimehealthcover.htm</a></p><p>The AUSTRALIAN GOVERNMENT REBATE exists to provide financial assistance to those who need help with the cost of their health insurance premium. It is currently income-tested and tiered according to total income and the age of the oldest person covered by the policy. If you claim a rebate and find at the end of the financial year that it was incorrect for whatever reason, the Australian Tax Office will simply correct the amount either overpaid or owing to you after your tax return has been completed. There is no penalty for making a rebate claim that turns out to have been incorrect. The rebate is calculated against the BASE PREMIUM for both the hospital &amp; extras components of your cover.<br/>For full information please go to: <a href="https://www.ato.gov.au/Calculators-and-tools/Private-health-insurance-rebate-calculator/" target="_blank">https://www.ato.gov.au/Calculators-and-tools/Private-health-insurance-rebate-calculator/</a></p><p>PAYMENT DISCOUNTS can be offered by health funds for people who choose to pay by certain payment methods or pay their premiums upfront. These are applied to the total premium costs.</p>'})})}var r,s,d,c,h,u,p=window.meerkat,m=p.modules.events,f=(p.logging.info,{healthPriceComponent:{INIT:"PRICE_COMPONENT_INITED"}}),v=f.healthPriceComponent,g=[];p.modules.register("healthPriceComponent",{init:a,events:f,updateProductSummaryHeader:i,updateProductSummaryDetails:o})}(jQuery),function(e,t){function a(){e("#filter-frequency input").on("change",i),e(document).on("resultsDataReady",o)}function n(){var t=s.modules.healthResults.getFrequencyInWords(e("#health_filter_frequency").val());e(".health-filter-price .slider-control").trigger(d.sliders.EVENT_UPDATE_RANGE,r(t,!1))}function i(){e(".health-filter-price .slider-control").trigger(d.sliders.EVENT_UPDATE_RANGE,r(l(),!0))}function o(){e(".health-filter-price .slider-control").trigger(d.sliders.EVENT_UPDATE_RANGE,r(l(),!1))}function l(){var t=s.modules.healthResults.getFrequencyInWords(e("#filter-frequency input:checked").val());return t||(t=Results.getFrequency()),t}function r(e,t){var a=Results.getReturnedGeneral();a&&a.premiumRange?premiumsRange=a.premiumRange:premiumsRange=c;var n={};switch(e){case"fortnightly":premiumsRange.fortnightly.max<=0&&(premiumsRange.fortnightly.max=c.fortnightly.max),n=premiumsRange.fortnightly;break;case"monthly":premiumsRange.monthly.max<=0&&(premiumsRange.monthly.max=c.monthly.max),n=premiumsRange.monthly;break;case"annually":premiumsRange.yearly.max<=0&&(premiumsRange.yearly.max=c.yearly.max),n=premiumsRange.yearly;break;default:n=premiumsRange.monthly}return[Number(n.min),Number(n.max),t]}var s=window.meerkat,d=s.modules.events,c=(s.logging.info,{fortnightly:{min:1,max:300},monthly:{min:1,max:560},yearly:{min:1,max:4e3}});s.modules.register("healthPriceRangeFilter",{init:a,setUp:n})}(jQuery),function(e){function t(){n(),i(),Features.init(),s(),d()}function a(){d(),$!==M.modules.deviceMediaState.get()&&(Results.view.calculateResultsContainerWidth(),Features.clearSetHeights(),Features.balanceVisibleRowsHeight()),Results.pagination.refresh()}function n(){e(".adjustFilters").on("click",function(e){e.preventDefault(),e.stopPropagation(),M.modules.healthFilters.open()}),N=e(".resultsLowNumberMessage, .resultsMarketingMessages");var t=e("#health_filter_frequency").val();t=M.modules.healthResults.getFrequencyInWords(t)||"monthly";try{Results.init({url:"ajax/json/health_quote_results.jsp",runShowResultsPage:!1,paths:{results:{list:"results.price",info:"results.info"},brand:"info.Name",productBrandCode:"info.providerName",productId:"productId",productTitle:"info.productTitle",productName:"info.productTitle",price:{annually:"premium.annually.lhcfreevalue",monthly:"premium.monthly.lhcfreevalue",fortnightly:"premium.fortnightly.lhcfreevalue"},availability:{product:"available",price:{annually:"premium.annual.lhcfreevalue",monthly:"premium.monthly.lhcfreevalue",fortnightly:"premium.fortnightly.lhcfreevalue"}},benefitsSort:"info.rank"},show:{nonAvailablePrices:!1},availability:{price:["notEquals",0]},render:{templateEngine:"_",features:{mode:"populate",headers:!1,numberOfXSColumns:2},dockCompareBar:!1},displayMode:"features",pagination:{mode:"page",touchEnabled:Modernizr.touch},sort:{sortBy:"benefitsSort"},frequency:t,animation:{results:{individual:{active:!1},delay:500,options:{easing:"swing",duration:1e3}},shuffle:{active:!1,options:{easing:"swing"}},filter:{reposition:{options:{easing:"swing"}}}},elements:{features:{values:".content",extras:".children"}},dictionary:{valueMap:[{key:"Y",value:"<span class='icon-tick'></span>"},{key:"N",value:"<span class='icon-cross'></span>"},{key:"R",value:"Restricted"},{key:"-",value:"&nbsp;"}]},rankings:{triggers:["RESULTS_DATA_READY"],callback:M.modules.healthResults.rankingCallback,forceIdNumeric:!0}})}catch(a){Results.onError("Sorry, an error occurred initialising page","results.tag","meerkat.modules.healthResults.initResults(); "+a.message,a)}}function i(){var t={compareBarRenderer:ListModeCompareBarRenderer,elements:{button:".compareBtn",bar:".compareBar",boxes:".compareBox"},dictionary:{compareLabel:'Compare <span class="icon icon-arrow-right"></span>',clearBasketLabel:'Clear Shortlist <span class="icon icon-arrow-right"></span>'}};Compare.init(t),$compareBasket=e(Compare.settings.elements.bar),$compareBasket.on("compareAdded",function(t,a){null!==M.modules.healthMoreInfo.getOpenProduct()&&M.modules.healthMoreInfo.getOpenProduct().productId!==a&&M.modules.healthMoreInfo.close(),$compareBasket.addClass("active"),e(Results.settings.elements.resultsContainer+" "+Results.settings.elements.rows+"[data-productId="+a+"]").addClass("compared"),Compare.view.resultsFiltered===!1&&Compare.model.products.length===Compare.settings.maximum&&(e(".compareBtn").addClass("compareInActive"),_.delay(function(){l()},250))}),$compareBasket.on("compareRemoved",function(t,a){Compare.view.resultsFiltered&&Compare.model.products.length>=Compare.settings.minimum&&l(),$element=e(Results.settings.elements.resultsContainer+" "+Results.settings.elements.rows+"[data-productId="+a+"]"),$element.removeClass("compared"),$element.find(".compareCheckbox input").prop("checked",!1),0===Compare.model.products.length&&(e(".compareBar").removeClass("active"),S(!1),E(!0))}),$compareBasket.on("compareNonAvailable",function(e){Compare.view.resultsFiltered&&o()}),$compareBasket.on("compareBucketFull",function(t){e(".result .compareCheckbox :input").not(":checked").prop("disabled",!0)}),$compareBasket.on("compareBucketAvailable",function(t){e(".result .compareCheckbox :input").prop("disabled",!1)}),$compareBasket.on("compareClick",function(e){Compare.view.resultsFiltered?o():l()})}function o(){$container=e(Results.settings.elements.container),Results.settings.animation.filter.active?$container.find(".compared").removeClass("compared"):$container.find(".compared").removeClass("compared notfiltered").addClass("filtered"),$container.find(".compareCheckbox input").prop("checked",!1),e(".compareBtn").addClass("compareInActive"),_.defer(function(){Compare.unfilterResults(),_.defer(function(){Compare.reset()})})}function l(){_.defer(function(){Compare.filterResults(),_.defer(function(){S(!0,5-Results.getFilteredResults().length),E(!1),_.delay(function(){Results.settings.render.features.expandRowsOnComparison&&(e(".featuresHeaders .featuresList > .section.expandable.collapsed > .content").trigger("click"),e(".featuresHeaders .featuresList > .selectionHolder > .children > .category.expandable.collapsed > .content").trigger("click")),null!==M.modules.healthMoreInfo.getOpenProduct()&&M.modules.healthMoreInfo.close(),M.messaging.publish(O.tracking.TOUCH,{touchType:"H",touchComment:"ResCompare",simplesUser:M.site.isCallCentreUser});for(var t=[],a=Results.getFilteredResults(),n=0;n<a.length;n++){var i=a[n];t.push({productID:i.productId})}M.messaging.publish(O.tracking.EXTERNAL,{method:"trackQuoteComparison",object:{products:t,simplesUser:M.site.isCallCentreUser}})},Results.settings.animation.features.scroll.duration+100)})})}function r(){var t=Results.getFilteredResults().length,a=t+" product";1!=t&&(a+="s"),e(".compareBar .productCount").text(a)}function s(){e(Results.settings.elements.resultsContainer).on("featuresDisplayMode",function(){Features.buildHtml()}),e(document).on("generalReturned",function(){var t=Results.getReturnedGeneral();t.pricesHaveChanged&&(M.modules.dialogs.show({title:"Just a quick note",htmlContent:e("#quick-note").html(),buttons:[{label:"Show latest results",className:"btn btn-next",closeWindow:!0}]}),e("input[name='health_retrieve_savedResults']").val("N"))}),e(document).on("resultsLoaded",w),e(document).on("resultsReturned",function(){Compare.reset(),M.modules.utils.scrollPageTo(e("header")),e(".featuresHeaders .expandable.expanded").removeClass("expanded").addClass("collapsed"),L.length>0&&_.defer(function(){L.click()}),M.modules.coupon.loadCoupon("filter",null,function(){M.modules.coupon.renderCouponBanner()})}),e(document).on("resultsDataReady",function(){r(),M.site.isCallCentreUser&&P()}),e(document).on("resultsFetchStart",function(){S(!1),E(!1),M.modules.journeyEngine.loadingShow("getting your quotes"),e("header .slide-feature-pagination, header a[data-results-pagination-control]").addClass("hidden")}),M.messaging.subscribe(q.RESULTS_ERROR,function(){_.delay(function(){M.modules.journeyEngine.gotoPath("previous")},1e3)}),e(document).on("resultsFetchFinish",function(){if(E(!0),_.defer(function(){e("header .slide-feature-pagination, header a[data-results-pagination-control]").removeClass("hidden"),Results.pagination.setupNativeScroll()}),M.modules.journeyEngine.loadingHide(),!M.site.isNewQuote&&!Results.getSelectedProduct()&&M.site.isCallCentreUser){Results.setSelectedProduct(e(".health_application_details_productId").val());var t=Results.getSelectedProduct();t&&M.modules.healthResults.setSelectedProduct(t)}if("Y"===e('input[name="health_directApplication"]').val()){Results.setSelectedProduct(M.site.loadProductId);var a=Results.getSelectedProduct();if(a)M.modules.healthResults.setSelectedProduct(a),M.modules.journeyEngine.gotoPath("next");else{var n=Results.getResult("productTitle",M.site.loadProductTitle),i="";n?(M.modules.healthResults.setSelectedProduct(n),i="Thanks for visiting "+M.site.content.brandDisplayName+'. Please note that for this particular product, the price and/or features have changed since the last time you were comparing. If you need further assistance, you can chat to one of our Health Insurance Specialists on <span class="callCentreHelpNumber">'+M.site.content.callCentreHelpNumber+"</span>, and they will be able to help you with your options."):(e("#health_application_productId").val(""),e("#health_application_productTitle").val(""),i="Thanks for visiting "+M.site.content.brandDisplayName+'. Unfortunately the product you\'re looking for is no longer available. Please head to your results page to compare available policies or alternatively, chat to one of our Health Insurance Specialists on <span class="callCentreHelpNumber">'+M.site.content.callCentreHelpNumber+"</span>, and they will be able to help you with your options."),M.modules.dialogs.show({title:"Just a quick note",htmlContent:i,buttons:[{label:"Show latest results",className:"btn btn-next",closeWindow:!0}]})}M.site.loadProductId="",M.site.loadProductTitle="",e('input[name="health_directApplication"]').val("")}e(Results.settings.elements.page).show()}),e(document).on("populateFeaturesStart",function(){M.modules.performanceProfiling.startTest("results")}),e(Results.settings.elements.resultsContainer).on("populateFeaturesEnd",function(){var e,t=M.modules.performanceProfiling.endTest("results");e=800>t?M.modules.performanceProfiling.PERFORMANCE.HIGH:8e3>t&&M.modules.performanceProfiling.isIE8()===!1?M.modules.performanceProfiling.PERFORMANCE.MEDIUM:M.modules.performanceProfiling.PERFORMANCE.LOW,Results.setPerformanceMode(e)}),e(document).on("resultPageChange",function(e){var t=e.pageData;if(null===t.measurements)return!1;var a=t.measurements.numberOfPages,n=Results.getFilteredResults().length,i=t.measurements.columnsPerPage,o=i*a-n,l=t.pageNumber;if(M.messaging.publish(O.resultsTracking.TRACK_QUOTE_RESULTS_LIST,{additionalData:{pageNumber:l,numberOfPages:a},onAfterEventMode:"Load"}),o>1&&1===a)E(!0),S(!1);else if(E(!1),Compare.view.resultsFiltered===!1){if(l===t.measurements.numberOfPages&&o>2)return S(!0,o),!0;S(!1)}}),e(document).on("FeaturesRendered",function(){e(Features.target+" .expandable > "+Results.settings.elements.features.values).on("mouseenter",function(){var t=e(this).attr("data-featureId"),a=e(Features.target+' [data-featureId="'+t+'"]');a.addClass(Results.settings.elements.features.expandableHover.replace(/[#\.]/g,""))}).on("mouseleave",function(){var t=e(this).attr("data-featureId"),a=e(Features.target+' [data-featureId="'+t+'"]');a.removeClass(Results.settings.elements.features.expandableHover.replace(/[#\.]/g,""))})}),M.messaging.subscribe(O.healthFilters.CHANGED,function(e){o(),e&&e.hasOwnProperty("filter-frequency-change")&&M.modules.resultsTracking.setResultsEventMode("Refresh")}),M.messaging.subscribe(O.device.STATE_ENTER_XS,function(){o()})}function d(){"xs"==M.modules.deviceMediaState.get()&&c(),M.messaging.subscribe(O.device.STATE_ENTER_XS,function(){"results"===M.modules.journeyEngine.getCurrentStep().navigationId&&c()}),M.messaging.subscribe(O.device.STATE_LEAVE_XS,function(){h()})}function c(){Results.view.startColumnWidthTracking(e(window),Results.settings.render.features.numberOfXSColumns,!1)}function h(){Results.view.stopColumnWidthTracking()}function u(){$=M.modules.deviceMediaState.get()}function p(){M.messaging.publish(q.WEBAPP_LOCK,{source:"healthLoadRates"}),M.modules.health.loadRates(function(){M.messaging.publish(q.WEBAPP_UNLOCK,{source:"healthLoadRates"}),Results.get()})}function m(){return B}function f(e){var t=m();return t.premium[e]}function v(e){switch(e){case"weekly":return"W";case"fortnightly":return"F";case"monthly":return"M";case"quarterly":return"Q";case"halfyearly":return"H";case"annually":return"A";default:return!1}}function g(e){switch(e){case"W":return"weekly";case"F":return"fortnightly";case"M":return"monthly";case"Q":return"quarterly";case"H":return"halfyearly";case"A":return"annually";default:return!1}}function y(e){switch(e){case"weekly":return 52;case"fortnightly":return 26;case"quarterly":return 4;case"halfyearly":return 2;case"annually":return 1;default:return 12}}function b(t,a){B=t;var n=e("#mainform");if(null===t)n.find(".health_application_details_provider").val(""),n.find(".health_application_details_productId").val(""),n.find(".health_application_details_productNumber").val(""),n.find(".health_application_details_productTitle").val(""),n.find(".health_application_details_providerName").val("");else{if(n.find(".health_application_details_provider").val(B.info.provider),n.find(".health_application_details_productId").val(B.productId),n.find(".health_application_details_productNumber").val(B.info.productCode),n.find(".health_application_details_productTitle").val(B.info.productTitle),n.find(".health_application_details_providerName").val(B.info.providerName),a===!0)M.messaging.publish(q.healthResults.PREMIUM_UPDATED,B);else{M.messaging.publish(q.healthResults.SELECTED_PRODUCT_CHANGED,B),e(Results.settings.elements.rows).removeClass("active");var i=e(Results.settings.elements.rows+"[data-productid="+B.productId+"]"),o=i.data("position")+1;i.addClass("active"),Results.pagination.gotoPosition(o,!0,!1)}M.modules.writeQuote.write({health_application_provider:B.info.provider,health_application_productId:B.productId,health_application_productName:B.info.productCode,health_application_productTitle:B.info.productTitle},!1)}}function C(){healthFunds.unload(),b(null),M.messaging.publish(q.healthResults.SELECTED_PRODUCT_RESET)}function D(t){M.modules.health.loadRates(function(a){if(null===a)t(null);else{var n=M.modules.journeyEngine.getFormData();_.findWhere(n,{name:"health_showAll"}).value="N",_.findWhere(n,{name:"health_onResultsPage"}).value="N",_.findWhere(n,{name:"health_incrementTransactionId"}).value="N",n.push({name:"health_payment_details_start",value:e("#health_payment_details_start").val()}),n.push({name:"health_payment_details_type",value:M.modules.healthPaymentStep.getSelectedPaymentMethod()}),n.push({name:"health_payment_details_frequency",value:M.modules.healthPaymentStep.getSelectedFrequency()}),M.modules.comms.post({url:"ajax/json/health_quote_results.jsp",data:n,cache:!1,errorLevel:"warning",onSuccess:function(e){Results.model.updateTransactionIdFromResult(e),t(e.results&&e.results.price&&"N"!==e.results.price.available?e.results.price:null)},onError:function(e){t(null)}})}})}function k(t,a){x.find(".featuresTemplateComponent .selectionHolder [data-skey]").each(function(t,a){var n=e(a),i=n.attr("data-skey"),o=n.attr("data-par-skey"),l=Number(n.attr("data-index"));if($parentFeatureList=n.parents(".featuresTemplateComponent").first(),0===l){var r=$parentFeatureList.find('div[data-skey="'+o+'"].hasShortlistableChildren .children').first();r.attr("data-skey")===i?r.after(n):r.prepend(n)}else{var s=l-1;$parentFeatureList.find('.hasShortlistableChildren div[data-par-skey="'+o+'"][data-index="'+s+'"]').first().after(n)}});for(var n=0;n<t.length;n++){var i=t[n];x.find('.featuresTemplateComponent div[data-skey="'+i+'"]').each(function(t,a){var n=e(a),i=n.attr("data-par-skey");null!=i&&($parentFeatureList=n.parents(".featuresTemplateComponent").first(),$parentFeatureList.find(".selection_"+i+" .children").first().append(n))})}x.find(".featuresTemplateComponent > .section.hasShortlistableChildren").each(function(a,n){var i=e(n),o=i.attr("data-skey"),l=x.find(".cell.selection_"+o);if(-1===t.indexOf(o))i.hide(),l.hide();else{i.show();var r=x.find(".featuresHeaders .selection_"+o+"> .children > .cell").length;if(0===r)l.hide();else{l.show();var s=x.find('.featuresHeaders div[data-skey="'+o+'"]'),d=r+s.find("> .children > .cell").length;l.find(".content .extraText .selectedCount").text(r),l.find(".content .extraText .availableCount").text(d)}}}),"undefined"==typeof a?3===M.modules.journeyEngine.getCurrentStepIndex()&&p():a()}function w(){"xs"==M.modules.deviceMediaState.get()&&c(),r();try{e("#resultsPage .compare").unbind().on("click",function(){var t=e(this),a=t.parents(Results.settings.elements.rows).attr("data-productId"),n=Results.getResult("productId",a),i={id:a,object:n};t.is(":checked")?Compare.add(i):Compare.remove(a)})}catch(t){Results.onError("Sorry, an error occurred processing results","results.tag","FeaturesResults.setResultsActions(); "+t.message,t)}M.site.isCallCentreUser&&P()}function P(){e("#resultsPage .price").each(function(){var t=e(this),a=t.parents(Results.settings.elements.rows).attr("data-productId"),n=Results.getResultByProductId(a);if(n.hasOwnProperty("premium")){var i=_.template(U.premiumsPopOver),o=i({product:n,frequency:Results.getFrequency()});M.modules.popovers.create({element:t,contentValue:o,contentType:"content",showEvent:"mouseenter click",position:{my:"top center",at:"bottom center"},style:{classes:"priceTooltips"}})}else M.modules.errorHandling.error({message:"product does not have property premium",page:"healthResults.js",description:"createPremiumsPopOver()",errorLevel:"silent",data:n})})}function S(t,a){var n=e(".resultsMarketingMessage");t?n.addClass("show").attr("data-columns",a):n.removeClass("show")}function E(e){var t;if(e){var a=Results.pagination.calculatePageMeasurements();if(null==a)e=!1;else{var n=Results.getFilteredResults().length;t=a.columnsPerPage-n,(2>t||1!==a.numberOfPages)&&(e=!1)}}return e?(N.addClass("show"),N.attr("data-columns",t)):N.removeClass("show"),e}function T(e,t){var a={},n=Results.getFrequency(),i=e.productId.replace("PHIO-HEALTH-","");return a["rank_productId"+t]=i,a["rank_price_actual"+t]=e.premium[n].value.toFixed(2),a["rank_price_shown"+t]=e.premium[n].lhcfreevalue.toFixed(2),a["rank_frequency"+t]=n,a["rank_lhc"+t]=e.premium[n].lhc,a["rank_rebate"+t]=e.premium[n].rebate,a["rank_discounted"+t]=e.premium[n].discounted,_.isNumber(H)&&H>t&&(a["rank_provider"+t]=e.info.provider,a["rank_providerName"+t]=e.info.providerName,a["rank_productName"+t]=e.info.productTitle,a["rank_productCode"+t]=e.info.productCode,a["rank_premium"+t]=e.premium[Results.settings.frequency].lhcfreetext,a["rank_premiumText"+t]=e.premium[Results.settings.frequency].lhcfreepricing),a}function A(){M.messaging.publish(O.resultsTracking.TRACK_QUOTE_RESULTS_LIST,{additionalData:{preferredExcess:I(),paymentPlan:Results.getFrequency(),sortBy:"benefitsSort"===Results.getSortBy()?"Benefits":"Lowest Price",simplesUser:M.site.isCallCentreUser,isLhcApplicable:j},onAfterEventMode:"Load"})}function I(){var t=null;switch(e("#health_excess").val()){case"1":t="0";break;case"2":t="1-250";break;case"3":t="251-500";break;default:t="ALL"}return t}function F(e){j=e>0?"Y":"N"}function R(){x=e("#resultsPage"),M.messaging.subscribe(O.healthBenefits.CHANGED,k),M.messaging.subscribe(O.RESULTS_RANKING_READY,A)}var N,x,$,M=window.meerkat,O=M.modules.events,B=(M.logging.info,null),H=5,j="N",L=e(".healthPremiumIncreaseContent"),U={premiumsPopOver:"{{ if(product.premium.hasOwnProperty(frequency)) { }}<strong>Total Price including rebate and LHC: </strong><span class=\"highlighted\">{{= product.premium[frequency].text }}</span><br/> <strong>Price including rebate but no LHC: </strong>{{=product.premium[frequency].lhcfreetext}}<br/> <strong>Price including LHC but no rebate: </strong>{{= product.premium[frequency].baseAndLHC }}<br/> <strong>Base price: </strong>{{= product.premium[frequency].base }}<br/> {{ } }}<hr/> {{ if(product.premium.hasOwnProperty('fortnightly')) { }}<strong>Fortnightly (ex LHC): </strong>{{=product.premium.fortnightly.lhcfreetext}}<br/> {{ } }}{{ if(product.premium.hasOwnProperty('monthly')) { }}<strong>Monthly (ex LHC): </strong>{{=product.premium.monthly.lhcfreetext}}<br/> {{ } }}{{ if(product.premium.hasOwnProperty('annually')) { }}<strong>Annually (ex LHC): </strong>{{= product.premium.annually.lhcfreetext}}<br/> {{ } }}<hr/> {{ if(product.hasOwnProperty('info')) { }}<strong>Name: </strong>{{=product.info.productTitle}}<br/> <strong>Product Code: </strong>{{=product.info.productCode}}<br/> <strong>Product ID: </strong>{{=product.productId}}<br/><strong>State: </strong>{{=product.info.State}}<br/> <strong>Membership Type: </strong>{{=product.info.Category}}{{ } }}"},q={healthResults:{SELECTED_PRODUCT_CHANGED:"SELECTED_PRODUCT_CHANGED",SELECTED_PRODUCT_RESET:"SELECTED_PRODUCT_RESET",PREMIUM_UPDATED:"PREMIUM_UPDATED"},WEBAPP_LOCK:"WEBAPP_LOCK",WEBAPP_UNLOCK:"WEBAPP_UNLOCK",RESULTS_ERROR:"RESULTS_ERROR"};M.modules.register("healthResults",{init:R,events:q,initPage:t,onReturnToPage:a,get:p,getSelectedProduct:m,setSelectedProduct:b,resetSelectedProduct:C,getProductData:D,getSelectedProductPremium:f,getNumberOfPeriodsForFrequency:y,getFrequencyInLetters:v,getFrequencyInWords:g,stopColumnWidthTracking:h,toggleMarketingMessage:S,toggleResultsLowNumberMessage:E,onBenefitsSelectionChange:k,recordPreviousBreakpoint:u,rankingCallback:T,publishExtraSuperTagEvents:A,setLhcApplicable:F})}(jQuery),function(e,t){function a(){jQuery(document).ready(function(e){meerkat.modules.performanceProfiling.isSafariAffectedByColumnCountBug()&&e(".benefits-component .benefits-list .children").css("-webkit-column-count","1")})}meerkat.modules.register("healthSafariColumnCountFix",{init:a})}(jQuery),function(e,t){function a(){r.modules.comms.get({url:"segment/filter.json",cache:!1,errorLevel:"silent",dataType:"json",useDefaultErrorHandling:!1}).done(function(e){l(e),n()}).fail(function(e,t,a){d(t+": "+a)})}function n(){c.hasOwnProperty("segments")&&c.segments.length>0&&_.each(c.segments,function(t){o(t)===!0&&e("."+t.classToHide).css("visibility","hidden")})}function i(e){return!e.hasOwnProperty("segmentId")||isNaN(e.segmentId)||e.segmentId<=0?(s("Segment is not valid"),!1):e.hasOwnProperty("errors")&&e.errors.length>0?(s(e.errors[0].message),!1):!0}function o(e){return i(e)!==!0?!1:e.hasOwnProperty("canHide")&&e.canHide===!0&&e.hasOwnProperty("classToHide")&&0!==e.classToHide.length&&e.classToHide.trim()?!0:!1}function l(e){c=e}var r=window.meerkat,s=(r.modules.events,r.logging.info,r.logging.debug),d=r.logging.exception,c=!1;r.modules.register("healthSegment",{filterSegments:a,hideBySegment:n})}(jQuery),function(e,t){var a,n,i,o,l,r,s=window.meerkat,d=(s.modules.events,s.logging.info,{single:{incomeBaseTier:9e4,incomeTier1:{from:90001,to:105e3},incomeTier2:{from:105001,to:14e4},incomeTier3:140001},familyOrCouple:{incomeBaseTier:18e4,incomeTier1:{from:180001,to:21e4},incomeTier2:{from:210001,to:28e4},incomeTier3:280001}});init=function(){a=e("#health_healthCover_dependants"),n=e("#health_healthCover_incomeMessage"),i=e("#health_healthCover_incomeBase"),o=e("#health_healthCover_income"),l=e("#health_healthCover_tier"),r=e(".health-medicare_details")},setTiers=function(t){var c=a.val()-1;c>0?(c=1500*c,n.text("this includes an adjustment for your dependants")):(c=0,n.text(""));var h;h=i.is(":visible")&&e("#health_healthCover_incomeBase").find(":checked").length>0?i.find(":checked").val():healthChoices.returnCoverCode(),o.find("option").each(function(){var a=e(this),n=a.val(),i="";if(null===s.modules.health.getRates()?_ageBonus=0:_ageBonus=parseInt(s.modules.health.getRates().ageBonus),"S"===h||"SM"===h||"SF"===h||""===h)switch(n){case"0":i="$"+formatMoney(d.single.incomeBaseTier+c)+" or less";break;case"1":i="$"+formatMoney(d.single.incomeTier1.from+c)+" - $"+formatMoney(d.single.incomeTier1.to+c);break;case"2":i="$"+formatMoney(d.single.incomeTier2.from+c)+" - $"+formatMoney(d.single.incomeTier2.to+c);break;case"3":i="$"+formatMoney(d.single.incomeTier3+c)+"+ (no rebate)"}else switch(n){case"0":i="$"+formatMoney(d.familyOrCouple.incomeBaseTier+c)+" or less";break;case"1":i="$"+formatMoney(d.familyOrCouple.incomeTier1.from+c)+" - $"+formatMoney(d.familyOrCouple.incomeTier1.to+c);break;case"2":i="$"+formatMoney(d.familyOrCouple.incomeTier2.from+c)+" - $"+formatMoney(d.familyOrCouple.incomeTier2.to+c);break;case"3":i="$"+formatMoney(d.familyOrCouple.incomeTier3+c)+"+ (no rebate)"}""!==i&&a.text(i),"N"!=healthCoverDetails.getRebateChoice()&&healthCoverDetails.getRebateChoice()?(t?l.show():l.slideDown(),r.show()):(t?l.hide():l.slideUp(),r.hide(),s.modules.form.clearInitialFieldsAttribute(r))})},s.modules.register("healthTiers",{init:init,setTiers:setTiers})}(jQuery),function(e,t){function a(){d=e("#health_searchDate").val();var t=d.split("/"),a=t[2]+"-"+t[1]+"-"+t[0];h.applicationDateOverrideValue=""!==d?a+" 00:00:01":null,c.modules.comms.post({url:"ajax/write/setApplicationDate.jsp",data:h,cache:!1,errorLevel:"warning",onSuccess:function(e){o(e),l()}})}function n(){c.modules.comms.post({url:"ajax/load/getApplicationDate.jsp",cache:!1,errorLevel:"warning",onSuccess:function(e){i(e)}})}function i(t){if(null!==t&&""!==t){var a=new Date(t.replace(/ [A]?EST/,"")),n=c.modules.utils.returnDateValueFormFormat(a);e("#health_searchDate").val(n)}}function o(e){u.applicationDate.html(e)}function l(){""===u.applicationDate.html()?u.applicationDateContainer.hide():u.applicationDateContainer.show()}function r(){""===e("#health_productTitleSearch").val()?u.productTitleSearchContainer.hide():(u.productTitleSearch.html(e("#health_productTitleSearch").val()),u.productTitleSearchContainer.show())}function s(){jQuery(document).ready(function(e){0===e(".simples").length&&n(),e("#health_searchDate").on("change",function(){a()}),l(),e("#health_productTitleSearch").on("change",function(){r()})})}var d,c=window.meerkat,h=(c.modules.events,c.logging.info,{}),u={applicationDate:e(".applicationDate"),applicationDateContainer:e(".applicationDateContainer"),productTitleSearchContainer:e(".productTitleSearchContainer"),productTitleSearch:e(".productTitleSearch")},p={};c.modules.register("provider_testing",{init:s,events:p,changeApplicationDate:a,setApplicationDateCalendar:n})}(jQuery),function(e,t){function a(){e(document).ready(function(){i(),e(s.journeyName+", "+s.journeySituation+", "+s.journeyState+", "+s.applicationState+", "+s.journeyPostCode+", "+s.applicationPostCode+", "+s.applicationFirstName+", "+s.applicationSurame).on("change",function(){setTimeout(function(){i()},50)})})}function n(){console.log("[Simples Snapshot] Initiated."),a()}function i(){(""!==e(s.journeySituation+" option:selected").val()||""!==e(s.journeyState).val()||""!==e(s.journeyPostCode).val())&&r.removeClass("hidden"),""===e(s.applicationFirstName).val()&&""===e(s.applicationSurame).val()?(e(".snapshotApplicationFirstName, .snapshotApplicationSurname").hide(),e(".snapshotJourneyName").show()):(e(".snapshotApplicationFirstName, .snapshotApplicationSurname").show(),e(".snapshotJourneyName").hide()),""===e(s.applicationState).val()?(e(".snapshotApplicationState").hide(),e(".snapshotJourneyState").show()):(e(".snapshotApplicationState").show(),e(".snapshotJourneyState").hide()),""===e(s.applicationPostcode).val()?(e(".snapshotApplicationPostcode").hide(),e(".snapshotJourneyPostcode").show()):(e(".snapshotApplicationPostcode").show(),
e(".snapshotJourneyPostcode").hide()),o.modules.contentPopulation.render("#navbar-main .transactionIdContainer .simplesSnapshot")}var o=window.meerkat,l={simplesSnapshot:{}},r=e(".simplesSnapshot"),s={journeyName:"#health_contactDetails_name",journeySituation:"#health_situation_healthCvr",journeyState:"#health_situation_state",applicationState:"#health_application_address_state",journeyPostCode:"#health_situation_postcode",applicationPostCode:"#health_application_address_postCode",applicationFirstName:"#health_application_primary_firstname",applicationSurame:"#health_application_primary_surname"};o.modules.register("simplesSnapshot",{initSimplesSnapshot:n,events:l})}(jQuery);var FatalErrorDialog={display:function(e){FatalErrorDialog.exec(e)},init:function(){},exec:function(e){var t=$.extend({errorLevel:"silent",message:"A fatal error has occurred.",page:"undefined.jsp",description:null,data:null},e);meerkat.modules.errorHandling.error(t)}},Track={splitTest:function(e,t){meerkat.modules.tracking.recordSupertag("splitTesting",{version:e,splitTestName:t})}},healthChoices={_cover:"",_situation:"",_state:"",_benefits:new Object,_performUpdate:!1,initialise:function(e,t,a){healthChoices.setCover(e,!0,!0);var n=this._performUpdate;healthChoices.setSituation(t,n)},hasSpouse:function(){switch(this._cover){case"C":case"F":return!0;default:return!1}},hasChildren:function(){switch(this._cover){case"F":case"SPF":return!0;default:return!1}},setCover:function(e,t,a){t=t||!1,a=a||!1,healthChoices._cover=e,t||healthChoices.resetRebateForm(),healthChoices.hasSpouse()?$("#partner-health-cover, #partner, .health-person-details-partner, #partnerFund").show():(healthChoices.flushPartnerDetails(),$("#partner-health-cover, #partner, .health-person-details-partner, #partnerFund").hide()),healthChoices.dependants(a),healthCoverDetails.displayHealthFunds(),meerkat.modules.healthTiers.setTiers(a)},setSituation:function(e,t){t!==!1&&(t=!0),e!=healthChoices._situation&&(healthChoices._situation=e),$("#health_benefits_healthSitu, #health_situation_healthSitu").val(e)},isValidLocation:function(e){var t=new RegExp(/^((\s)*([^~,])+\s+)+\d{4}((\s)+(ACT|NSW|QLD|TAS|SA|NT|VIC|WA)(\s)*)$/);return value=$.trim(String(e)),""!=value&&value.match(t)?!0:!1},setLocation:function(e){if(healthChoices.isValidLocation(e)){var t=$.trim(String(e)),a=t.split(" "),n=a.pop(),i=a.pop(),o=a.join(" ");$("#health_situation_state").val(n),$("#health_situation_postcode").val(i).trigger("change"),$("#health_situation_suburb").val(o),healthChoices.setState(n)}else meerkat.site.isFromBrochureSite&&$("#health_situation_location").val("")},setState:function(e){healthChoices._state=e},setDob:function(e,t){""!=e&&t.val(e)},dependants:function(e){healthChoices.hasChildren()&&"Y"==$(".health_cover_details_rebate :checked").val()?e===!0?$(".health_cover_details_dependants").show():$(".health_cover_details_dependants").slideDown():e===!0?$(".health_cover_details_dependants").hide():($("#health_healthCover_dependants option:selected").prop("selected",!1),$("#health_healthCover_income option:selected").prop("selected",!1),$(".health_cover_details_dependants").slideUp())},returnCover:function(){return $("#health_situation_healthCvr option:selected").text()},returnCoverCode:function(){return this._cover},flushPartnerDetails:function(){$("#health_healthCover_partner_dob").val("").change(),$('#partner-health-cover input[name="health_healthCover_partner_cover"]:checked').each(function(){$(this).checked=!1}),resetRadio($("#health_healthCover_partnerCover")),$('#partner-health-cover input[name="health_healthCover_partner_healthCoverLoading"]:checked').each(function(){$(this).checked=!1}),resetRadio($("#health-continuous-cover-partner"))},resetRebateForm:function(){$('#health_healthCover_health_cover_rebate input[name="health_healthCover_rebate"]:checked').each(function(){$(this).checked=!1}),resetRadio($("#health_healthCover_health_cover_rebate")),$("#health_healthCover_dependants option").first().prop("selected",!0),$("#health_healthCover_dependants option:selected").prop("selected",!1),$("#health_healthCover_income option").first().prop("selected",!0),$("#health_healthCover_income option:selected").prop("selected",!1),$("#health_healthCover_incomelabel").val(""),healthCoverDetails.setIncomeBase(),healthChoices.dependants(),meerkat.modules.healthTiers.setTiers(),$(".health_cover_details_dependants").hide(),$("#health_healthCover_tier").hide(),$("#health_rebates_group").hide()}},healthCoverDetails={getRebateChoice:function(){return $("#health_healthCover-selection").find(".health_cover_details_rebate :checked").val()},setIncomeBase:function(e){"S"!=healthChoices._cover&&"SM"!=healthChoices._cover&&"SF"!=healthChoices._cover||"Y"!=healthCoverDetails.getRebateChoice()?e?$("#health_healthCover-selection").find(".health_cover_details_incomeBasedOn").hide():$("#health_healthCover-selection").find(".health_cover_details_incomeBasedOn").slideUp():e?$("#health_healthCover-selection").find(".health_cover_details_incomeBasedOn").show():$("#health_healthCover-selection").find(".health_cover_details_incomeBasedOn").slideDown()},displayHealthFunds:function(){var e=$("#mainform").find(".health-previous_fund"),t=$("#clientFund").find("select"),a=$("#partnerFund").find("select");"NONE"!=t.val()&&""!=t.val()?(e.find("#clientMemberID").slideDown(),e.find(".membership").addClass("onA")):(e.find("#clientMemberID").slideUp(),e.find(".membership").removeClass("onA")),healthChoices.hasSpouse()&&"NONE"!=a.val()&&""!=a.val()?(e.find("#partnerMemberID").slideDown(),e.find(".membership").addClass("onB")):(e.find("#partnerMemberID").slideUp(),e.find(".membership").removeClass("onB"))},setHealthFunds:function(e){var t=$("#health_healthCover_primaryCover").find(":checked").val(),a=$("#health_healthCover_partnerCover").find(":checked").val(),n=$("#clientFund").find("select"),i=$("#partnerFund").find("select");"Y"==t?isLessThan31Or31AndBeforeJuly1($("#health_healthCover_primary_dob").val())?e?$("#health-continuous-cover-primary").show():$("#health-continuous-cover-primary").slideDown():e?$("#health-continuous-cover-primary").hide():$("#health-continuous-cover-primary").slideUp():("N"==t&&resetRadio($("#health-continuous-cover-primary"),"N"),e?$("#health-continuous-cover-primary").hide():$("#health-continuous-cover-primary").slideUp()),"Y"==t&&"NONE"==n.val()?n.val(""):"N"==t&&n.val("NONE"),"Y"==a?isLessThan31Or31AndBeforeJuly1($("#health_healthCover_partner_dob").val())?e?$("#health-continuous-cover-partner").show():$("#health-continuous-cover-partner").slideDown():e?$("#health-continuous-cover-partner").hide():$("#health-continuous-cover-partner").slideUp():("N"==a&&resetRadio($("#health-continuous-cover-partner"),"N"),e?$("#health-continuous-cover-partner").hide():$("#health-continuous-cover-partner").slideUp()),"Y"==a&&"NONE"==i.val()?i.val(""):"N"==a&&i.val("NONE"),healthCoverDetails.displayHealthFunds()},getAgeAsAtLastJuly1:function(e){var t=e.split("/"),a=Number(t[2]),n=Number(t[1])-1,i=Number(t[0]),o=new Date,l=o.getFullYear()-a;return(n>6||6==n&&i>1)&&l--,l}},healthFunds={_fund:!1,name:"the fund",countFrom:{TODAY:"today",NOCOUNT:"",EFFECTIVE_DATE:"effectiveDate"},minType:{FROM_TODAY:"today",FROM_EFFECTIVE_DATE:"effectiveDate"},checkIfNeedToInjectOnAmend:function(e){if($("#health_application_provider").val().length>0){var t=$("#health_application_provider").val(),a="healthFunds_"+t;$(document.body).addClass("injectingFund"),healthFunds.load(t,function(){window[a].processOnAmendQuote&&window[a].processOnAmendQuote===!0&&(window[a].set(),window[a].unset()),$(document.body).removeClass("injectingFund"),e()},!1)}else e()},load:function(e,t,a){if(""==e||!e)return healthFunds.loadFailed("Empty or false"),!1;if(a!==!1&&(a=!0),"undefined"==typeof window["healthFunds_"+e]||0==window["healthFunds_"+e]){var n={transactionId:meerkat.modules.transactionId.get()};return $.ajax({url:"common/js/health/healthFunds_"+e+".jsp",dataType:"script",data:n,async:!0,timeout:3e4,cache:!1,beforeSend:function(e,t){var a=t.url,n="uncache";a=a.replace("?_=","?"+n+"="),a=a.replace("&_=","&"+n+"="),t.url=a},success:function(){a&&healthFunds.process(e),"function"==typeof t&&t(!0)},error:function(a,n){healthFunds.loadFailed(e,n),"function"==typeof t&&t(!1)}}),!1}return e!=healthFunds._fund&&a&&healthFunds.process(e),"function"==typeof t&&t(!0),!0},process:function(e){var t=window["healthFunds_"+e];healthFunds.set=t.set,healthFunds.unset=t.unset,$("body").addClass(e),healthFunds.set(),healthFunds._fund=e},loadFailed:function(e,t){FatalErrorDialog.exec({message:"Unable to load the fund's application questions",page:"health:health_funds.tag",description:"healthFunds.update(). Unable to load fund questions for: "+e,data:t})},unload:function(){healthFunds._fund!==!1&&(healthFunds.unset(),$("body").removeClass(healthFunds._fund),healthFunds._fund=!1,healthFunds.set=function(){},healthFunds.unset=function(){})},set:function(){},unset:function(){},applicationFailed:function(){return!1},_memberIdRequired:function(e){e?($("#clientMemberID").find("input").rules("add","required"),$("#partnerMemberID").find("input").rules("add","required")):($("#clientMemberID").find("input").rules("remove","required"),$("#partnerMemberID").find("input").rules("remove","required"))},_dependants:function(e){e!==!1?(healthFunds.$_dependantDefinition=$("#mainform").find(".health-dependants").find(".definition"),healthFunds.HTML_dependantDefinition=healthFunds.$_dependantDefinition.html(),healthFunds.$_dependantDefinition.html(e)):(healthFunds.$_dependantDefinition.html(healthFunds.HTML_dependantDefinition),healthFunds.$_dependantDefinition=void 0,healthFunds.HTML_dependantDefinition=void 0)},_previousfund_authority:function(e){e!==!1?(healthFunds.$_authority=$(".health_previous_fund_authority label span"),healthFunds.$_authorityText=healthFunds.$_authority.eq(0).text(),healthFunds.$_authority.text(meerkat.modules.healthResults.getSelectedProduct().info.providerName),$(".health_previous_fund_authority").removeClass("hidden")):"undefined"!=typeof healthFunds.$_authority&&(healthFunds.$_authority.text(healthFunds.$_authorityText),healthFunds.$_authority=void 0,healthFunds.$_authorityText=void 0,$(".health_previous_fund_authority").addClass("hidden"))},_partner_authority:function(e){e===!0?$(".health_person-details_authority_group").removeClass("hidden"):$(".health_person-details_authority_group").addClass("hidden")},_reset:function(){healthApplicationDetails.hideHowToSendInfo(),healthFunds._partner_authority(!1),healthFunds._memberIdRequired(!0),healthDependents.resetConfig()},_paymentDays:function(e){if(""==e)return!1;var t=returnDate(e),a=new Date,n=null;n=healthFunds._payments.countFrom==healthFunds.countFrom.TODAY?a:t;var i=0,o=0,l=healthFunds._payments.max;if(healthFunds._payments.minType==healthFunds.minType.FROM_TODAY){var r=Math.round((t-a)/864e5);r<healthFunds._payments.min&&(o=healthFunds._payments.min-r)}else o=healthFunds._payments.min,l-=healthFunds._payments.min;for(var s='<option value="">Please choose...</option>';l>i;){var d=new Date(n.getTime()+24*o*60*60*1e3),c=d.getDay();if("undefined"!=typeof healthFunds._payments.maxDay&&healthFunds._payments.maxDay<d.getDate())o++;else if(healthFunds._payments.weekends||0!=c&&6!=c){var h=meerkat.modules.numberUtils.leadingZero(d.getDate()),u=meerkat.modules.numberUtils.leadingZero(d.getMonth()+1);s+='<option value="'+d.getFullYear()+"-"+u+"-"+h+'">'+healthFunds._getNiceDate(d)+"</option>",o++,i++}else o++}return s},_earliestDays:function(e,t,n){if(!$.isArray(t)||""==e)return!1;var i=returnDate(e);n=7;for(var o=new Date(i.getTime()+24*n*60*60*1e3),l='<option value="">No date has been selected for you</option>',r=0;31>r;r++)for(o=new Date(o.getTime()+864e5),a=0;a<t.length;a++)if(t[a]==o.getDate()){var s=meerkat.modules.numberUtils.leadingZero(o.getDate()),d=meerkat.modules.numberUtils.leadingZero(o.getMonth()+1);l='<option value="'+o.getFullYear()+"-"+d+"-"+s+'" selected="selected">'+healthFunds._getNiceDate(o)+"</option>",r=99;break}return l},_paymentDaysRender:function(e,t){t===!1&&(healthFunds._payments={min:0,max:5,weekends:!1},t='<option value="">Please choose...</option>'),e.html(t),e.parent().siblings("p").text("Your payment will be deducted on: "+e.find("option").first().text()),$(".health-bank_details-policyDay, .health-credit-card_details-policyDay").html(t)},_getDayOfWeek:function(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return t[e.getDay()]},_getMonth:function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"];return t[e.getMonth()]},_getNiceDate:function(e){var t=e.getDate(),a=e.getFullYear();return healthFunds._getDayOfWeek(e)+", "+t+" "+healthFunds._getMonth(e)+" "+a}},healthApplicationDetails={preloadedValue:$("#contactPointValue").val(),periods:1,init:function(){postalMatchHandler.init("health_application")},showHowToSendInfo:function(e,t){var a=$("#health_application_contactPoint-group"),n=a.find(".control-label span");n.text();n.text(e),t?a.find("input").rules("add",{required:!0,messages:{required:"Please choose how you would like "+e+" to contact you"}}):a.find("input").rules("remove","required"),a.removeClass("hidden")},hideHowToSendInfo:function(){var e=$("#health_application_contactPoint-group");e.addClass("hidden")},addOption:function(e,t){var a=$("#health_application_contactPoint");a.append('<label class="btn btn-form-inverse"><input id="health_application_contactPoint_'+t+'" type="radio" data-msg-required="Please choose " value="'+t+'" name="health_application_contactPoint">'+e+"</label>"),0==a.find("input:checked").length&&this.preloadedValue==t&&$("#health_application_contactPoint_"+t).prop("checked",!0)},removeLastOption:function(){var e=$("#health_application_contactPoint");e.find("label").last().remove()},testStatesParity:function(){var e=$("#health_application_address_state");if(e.val()!=$("#health_situation_state").val()){var t=$("#health_application_address_suburbName").val(),a=$("#health_application_address_postCode").val(),n=$("#health_application_address_state").val();if(t.length&&t.indexOf("Please select")<0&&4==a.length&&n.length)return $("#health_application_address_postCode").addClass("error"),!1}return!0}},healthDependents={_dependents:0,_limit:12,maxAge:25,init:function(){healthDependents.resetConfig()},resetConfig:function(){healthDependents.config={fulltime:!1,school:!0,schoolMin:22,schoolMax:24,schoolID:!1,schoolIDMandatory:!1,schoolDate:!1,schoolDateMandatory:!1,defacto:!1,defactoMin:21,defactoMax:24},healthDependents.maxAge=25},setDependants:function(){var e=$("#mainform").find(".health_cover_details_dependants").find("select").val();return"Y"!=healthCoverDetails.getRebateChoice()||isNaN(e)?healthDependents._dependents=1:healthDependents._dependents=e,healthChoices.hasChildren()?($("#health_application_dependants-selection").show(),healthDependents.updateDependentOptionsDOM(),void $("#health_application_dependants-selection").find(".health_dependant_details").each(function(){var e=parseInt($(this).attr("data-id"));e>healthDependents._dependents?$(this).hide():$(this).show(),healthDependents.checkDependent(e)})):void $("#health_application_dependants-selection").hide()},addDependent:function(){if(healthDependents._dependents<healthDependents._limit){healthDependents._dependents++;var e=$("#health_application_dependants_dependant"+healthDependents._dependents);e.find("input[type=text], select").val(""),resetRadio(e.find(".health_dependant_details_maritalincomestatus"),""),e.find(".error-field label").remove(),e.find(".has-error, .has-success").removeClass("has-error").removeClass("has-success"),e.show(),healthDependents.updateDependentOptionsDOM(),healthDependents.hasChanged(),$("html").animate({scrollTop:e.offset().top-50},250)}},dropDependent:function(){healthDependents._dependents>0&&($("#health_application_dependants_dependant"+healthDependents._dependents).find("input[type=text]").each(function(){$(this).val("")}),$("#health_application_dependants_dependant"+healthDependents._dependents).find("input[type=radio]:checked").each(function(){this.checked=!1}),$("#health_application_dependants_dependant"+healthDependents._dependents).find("select").each(function(){$(this).removeAttr("selected")}),$("#health_application_dependants_dependant"+healthDependents._dependents).hide(),healthDependents._dependents--,healthDependents.updateDependentOptionsDOM(),healthDependents.hasChanged(),healthDependents._dependents>0?$_obj=$("#health_application_dependants_dependant"+healthDependents._dependents):$_obj=$("#health_application_dependants-selection"),$("html").animate({scrollTop:$_obj.offset().top-50},250))},updateDependentOptionsDOM:function(){healthDependents._dependents<=0?($("#health_application_dependants-selection").find(".remove-last-dependent").hide(),$("#health_application_dependants_threshold").slideDown()):$("#dependents_list_options").find(".remove-last-dependent").is(":visible")||($("#health_application_dependants_threshold").slideUp(),$("#health_application_dependants-selection").find(".remove-last-dependent").hide(),$("#health_application_dependants-selection .health_dependant_details:visible:last").find(".remove-last-dependent").show()),healthDependents._dependents>=healthDependents._limit?$("#health-dependants").find(".add-new-dependent").hide():$("#health-dependants").find(".add-new-dependent").not(":visible")&&$("#health-dependants").find(".add-new-dependent").show()},checkDependent:function(e){var t=e;isNaN(e)&&"object"==typeof e&&(t=e.data);var a,n=$("#health_application_dependants_dependant"+t+"_dob").val();if(n.length){if(a=healthDependents.getAge(n),isNaN(a))return!1}else a=0;healthDependents.addFulltime(t,a),healthDependents.addSchool(t,a),healthDependents.addDefacto(t,a)},getAge:function(e){var t=e.split("/"),a=Number(t[2]),n=Number(t[1])-1,i=Number(t[0]),o=new Date,l=o.getFullYear()-a;return(o.getMonth()<n||o.getMonth()==n&&o.getDate()<i)&&l--,l},addFulltime:function(e,t){return healthDependents.config.fulltime!==!0?($("#health_application_dependants-selection").find(".health_dependant_details_fulltimeGroup").hide(),$("#health_application_dependants-selection").find("#health_application_dependants_dependant"+e+"_dob").rules("remove","validateFulltime"),$("#health_application_dependants-selection").find("#health_application_dependants_dependant"+e+"_dob").rules("add","limitDependentAgeToUnder25"),!1):(t>=healthDependents.config.schoolMin&&t<=healthDependents.config.schoolMax?$("#health_application_dependants-selection").find(".dependant"+e).find(".health_dependant_details_fulltimeGroup").show():$("#health_application_dependants-selection").find(".dependant"+e).find(".health_dependant_details_fulltimeGroup").hide(),$("#health_application_dependants-selection").find("#health_application_dependants_dependant"+e+"_dob").rules("remove","limitDependentAgeToUnder25"),void $("#health_application_dependants-selection").find("#health_application_dependants_dependant"+e+"_dob").rules("add","validateFulltime"))},addSchool:function(e,t){return healthDependents.config.school===!1?($("#health_application_dependants-selection").find(".health_dependant_details_schoolGroup, .health_dependant_details_schoolIDGroup, .health_dependant_details_schoolDateGroup").hide(),!1):void(t>=healthDependents.config.schoolMin&&t<=healthDependents.config.schoolMax&&(healthDependents.config.fulltime!==!0||$("#health_application_dependants_dependant"+e+"_fulltime_Y").is(":checked"))?($("#health_application_dependants-selection").find(".dependant"+e).find(".health_dependant_details_schoolGroup, .health_dependant_details_schoolIDGroup, .health_dependant_details_schoolDateGroup").show(),healthDependents.config.schoolID===!1?$("#health_application_dependants-selection").find(".dependant"+e).find(".health_dependant_details_schoolIDGroup").hide():this.config.schoolIDMandatory===!0?$("#health_application_dependants-selection").find("#health_application_dependants_dependant"+e+"_schoolID").rules("add",{required:!0,messages:{required:"Please enter dependant "+e+"'s student ID"}}):$("#health_application_dependants-selection").find("#health_application_dependants_dependant"+e+"_schoolID").rules("remove","required"),this.config.schoolDate!==!0?$("#health_application_dependants-selection").find(".dependant"+e).find(".health_dependant_details_schoolDateGroup").hide():this.config.schoolDateMandatory===!0?$("#health_application_dependants-selection").find("#health_application_dependants_dependant"+e+"_schoolDate").rules("add",{required:!0,messages:{required:"Please enter date that dependant "+e+" commenced study"}}):$("#health_application_dependants-selection").find("#health_application_dependants_dependant"+e+"_schoolDate").rules("remove","required")):$("#health_application_dependants-selection").find(".dependant"+e).find(".health_dependant_details_schoolGroup, .health_dependant_details_schoolIDGroup, .health_dependant_details_schoolDateGroup").hide())},addDefacto:function(e,t){return healthDependents.config.defacto===!1?!1:void(t>=healthDependents.config.defactoMin&&t<=healthDependents.config.defactoMax?$("#health_application_dependants-selection").find(".dependant"+e).find(".health_dependant_details_maritalincomestatus").show():$("#health_application_dependants-selection").find(".dependant"+e).find(".health_dependant_details_maritalincomestatus").hide())},hasChanged:function(){var e=$("#health_application_dependants-selection").find(".health-dependants-tier");if("N"==healthCoverDetails.getRebateChoice())e.slideUp();else if(healthDependents._dependents>0){$("#health_healthCover_dependants").val(healthDependents._dependents).trigger("change");var t=$("#health_healthCover_tier");e.find("select").html(t.find("select").html()),e.find("#health_application_dependants_incomeMessage").text(t.find("span").text()),e.is(":hidden")&&e.slideDown()}else e.slideUp()}};$.validator.addMethod("defactoConfirmation",function(e,t){return"Y"==$(t).parent().find(":checked").val()?!0:!1}),$.validator.addMethod("validateMinDependants",function(e,t){return!$("#${name}_threshold").is(":visible")}),$.validator.addMethod("limitDependentAgeToUnder25",function(e,t){var a=returnAge(e);return a>=healthDependents.maxAge?($(t).rules("add",{messages:{limitDependentAgeToUnder25:"Your child cannot be added to the policy as they are aged "+healthDependents.maxAge+" years or older. You can still arrange cover for this dependant by applying for a separate singles policy or please contact us if you require assistance."}}),!1):!0}),$.validator.addMethod("validateFulltime",function(e,t){var a=$(t).parents(".health_dependant_details").find(".health_dependant_details_fulltimeGroup input[type=radio]:checked").val(),n=returnAge(e),i=21==healthDependents.config.schoolMin?"st":22==healthDependents.config.schoolMin?"nd":23==healthDependents.config.schoolMin?"rd":"th";return n>=healthDependents.maxAge?($(t).rules("add",{messages:{validateFulltime:"Dependants over "+healthDependents.maxAge+" are considered adult dependants and can still be covered by applying for a separate singles policy"}}),!1):"N"===a&&n>=healthDependents.config.schoolMin?($(t).rules("add",{messages:{validateFulltime:"This policy provides cover for children until their "+healthDependents.config.schoolMin+i+" birthday"}}),!1):!0}),creditCardDetails={resetConfig:function(){creditCardDetails.config={visa:!0,mc:!0,amex:!0,diners:!1}},render:function(){var e=$("#health_payment_credit_type"),t=$("#health_payment_credit-selection .cards");t.children().hide();var a='<option id="health_payment_credit_type_" value="">Please choose...</option>',n=e.find(":selected").val();creditCardDetails.config.visa===!0&&(a+='<option id="health_payment_credit_type_v" value="v">Visa</option>',t.find(".visa").show()),creditCardDetails.config.mc===!0&&(a+='<option id="health_payment_credit_type_m" value="m">Mastercard</option>',t.find(".mastercard").show()),creditCardDetails.config.amex===!0&&(a+='<option id="health_payment_credit_type_a" value="a">AMEX</option>',t.find(".amex").show()),creditCardDetails.config.diners===!0&&(a+='<option id="health_payment_credit_type_d" value="d">Diners Club</option>',t.find(".diners").show()),e.html(a).find("option[value="+n+"]").attr("selected","selected")},set:function(){creditCardDetails.$_obj=$("#health_payment_credit_number"),creditCardDetails.$_objCCV=$("#health_payment_credit_ccv");var e=creditCardDetails._getType();field_credit_card_validation.set(e,creditCardDetails.$_obj,creditCardDetails.$_objCCV)},_getType:function(){return $("#health_payment_credit_type").find(":selected").val()}};