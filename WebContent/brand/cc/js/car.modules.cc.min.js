/*!
 * CTM-Platform v0.8.3
 * Copyright 2014 Compare The Market Pty Ltd
 * http://www.comparethemarket.com.au/
 */


!function(a,b){function c(){a(document).ready(function(){if("car"!==m.site.vertical)return!1;if(e(),"confirmation"===m.site.pageAction)return!1;d(),("amend"===m.site.pageAction||"latest"===m.site.pageAction||"load"===m.site.pageAction||"start-again"===m.site.pageAction)&&m.modules.form.markInitialFieldsWithValue(a("#mainform"));var b=a("#quote-accessories-template");b.length>0&&(l=_.template(b.html())),b=a("#more-info-template"),b.length>0&&(templateMoreInfo=_.template(b.html())),b=a("#calldirect-template"),b.length>0&&(templateCallDirect=_.template(b.html()))})}function d(){}function e(){if("confirmation"===m.site.pageAction)m.modules.journeyEngine.configure(null);else{f(!1);var b=null;m.site.isFromBrochureSite===!0?b=p.startStep.navigationId:m.site.journeyStage.length>0&&"latest"===m.site.pageAction?b=p.resultsStep.navigationId:m.site.journeyStage.length>0&&"amend"===m.site.pageAction&&(b=p.startStep.navigationId),a(document).ready(function(){m.modules.journeyEngine.configure({startStepId:b,steps:_.toArray(p)});var a=m.modules.transactionId.get();m.site.isNewQuote===!1?m.messaging.publish(n.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Retrieve",transactionID:parseInt(a,10),vertical:m.site.vertical}}):m.messaging.publish(n.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Start",transactionID:parseInt(a,10),vertical:m.site.vertical}})})}}function f(a){g(),h(),a&&m.modules.journeyProgressBar.render(!0)}function g(){var b={title:"Your Car",navigationId:"start",slideIndex:0,externalTracking:{method:"trackQuoteForms",object:m.modules.car.getTrackingFieldsObject},onInitialise:function(){var b=a(".slide-feature-emailquote");a("#quote_privacyoptin").is(":checked")&&b.addClass("privacyOptinChecked"),a("#quote_privacyoptin").on("change",function(){a(this).is(":checked")?b.addClass("privacyOptinChecked"):b.removeClass("privacyOptinChecked")}),m.modules.carSnapshot.init()},validation:{validate:!0,customValidation:function(b){a("#quote_vehicle_selection").find("select").each(function(){return a(this).is("[disabled]")?void b(!1):void 0}),b(!0)}}},c={title:"Car Details",navigationId:"options",slideIndex:1,externalTracking:{method:"trackQuoteForms",object:m.modules.car.getTrackingFieldsObject},tracking:{touchType:"H",touchComment:"OptionsAccs",includeFormData:!0},onInitialise:function(){m.modules.carYoungDrivers.initCarYoungDrivers()},onAfterEnter:function(){m.modules.contentPopulation.render(".journeyEngineSlide:eq(1) .snapshot")}},d={title:"Driver Details",navigationId:"details",slideIndex:2,externalTracking:{method:"trackQuoteForms",object:m.modules.car.getTrackingFieldsObject},tracking:{touchType:"H",touchComment:"DriverDtls",includeFormData:!0},onAfterEnter:function(){m.modules.contentPopulation.render(".journeyEngineSlide:eq(2) .snapshot")},onBeforeLeave:function(){}},e={title:"Address & Contact",navigationId:"address",slideIndex:3,externalTracking:{method:"trackQuoteForms",object:m.modules.car.getTrackingFieldsObject},tracking:{touchType:"H",touchComment:"AddressCon",includeFormData:!0},onInitialise:function(){m.modules.carResults.initPage();var b=a("#quote_drivers_regular_firstname"),c=a("#quote_drivers_regular_surname"),d=a("#quote_contact_phoneinput"),e=a("#quote_contact_email");a("#quote_riskAddress_postCode, #quote_vehicle_parking, #quote_riskAddress_suburb, #quote_riskAddress_nonStdStreet, #quote_riskAddress_streetSearch").on("change",function(){j()}),a("#quote_riskAddress_streetSearch").on("blur",function(){j()}),-1==a(location).attr("href").indexOf("jrny=1")&&a("#quote_options_commencementDate").on("blur",function(){j()}),a("#quote_contact_competition_optin").on("change",function(){a(this).is(":checked")?(b.rules("add",{required:!0,messages:{required:"Please enter your First Name to be eligible for the competition"}}),c.rules("add",{required:!0,messages:{required:"Please enter your Last Name to be eligible for the competition"}}),d.rules("add",{required:!0,messages:{required:"Please enter your Contact Number to be eligible for the competition"}}),e.rules("add",{required:!0,messages:{required:"Please enter your Email Address to be eligible for the competition"}})):(b.rules("remove","required"),c.rules("remove","required"),d.rules("remove","required"),e.rules("remove","required"),b.valid(),c.valid(),d.valid(),e.valid())})},onAfterEnter:function(a){m.modules.contentPopulation.render(".journeyEngineSlide:eq(3) .snapshot"),a.isForward===!0&&"address"===m.modules.journeyEngine.getCurrentStep().navigationId&&j()},onBeforeLeave:function(){}},f={title:"Results",navigationId:"results",slideIndex:4,externalTracking:{method:"trackQuoteForms",object:m.modules.car.getTrackingFieldsObject},onInitialise:function(){m.modules.carMoreInfo.initMoreInfo(),m.modules.carEditDetails.initEditDetails()},onBeforeEnter:function(){m.modules.journeyProgressBar.hide(),a("#resultsPage").addClass("hidden"),m.modules.carFilters.updateFilters(),Results.startResultsFetch()},onAfterEnter:function(){Results.getAjaxRequest()===!1?m.modules.carResults.get():window.setTimeout(function(){4===Results.getAjaxRequest().readyState&&200===Results.getAjaxRequest().status&&a.isArray(Results.getReturnedResults())&&(Results.finishResultsFetch(),Results.publishResultsDataReady(),m.modules.tracking.recordTouch("R","",!0,!1))},5e3),m.modules.carFilters.show()},onBeforeLeave:function(a){a.isBackward===!0&&m.modules.transactionId.getNew(3)},onAfterLeave:function(){m.modules.journeyProgressBar.show(),m.modules.carFilters.hide(),m.modules.carEditDetails.hide()}};p={startStep:b,optionsStep:c,detailsStep:d,addressStep:e,resultsStep:f}}function h(){m.modules.journeyProgressBar.configure([{label:"Your Car",navigationId:p.startStep.navigationId},{label:"Car Details",navigationId:p.optionsStep.navigationId},{label:"Driver Details",navigationId:p.detailsStep.navigationId},{label:"Address & Contact",navigationId:p.addressStep.navigationId},{label:"Your Quotes",navigationId:p.resultsStep.navigationId}])}function i(b){try{b=b||!1;var c=a("#quote_drivers_regular_dob").val();c.length>4&&(c=c.substring(c.length-4));var d=null,e=a("input[name=quote_drivers_regular_gender]:checked").val();if(!_.isUndefined(e))switch(e){case"M":d="Male";break;case"F":d="Female"}var f=null,g=a("input[name=quote_contact_marketing]:checked").val();_.isUndefined(g)||(f=g);var h=null,i=a("input[name=quote_contact_oktocall]:checked").val();_.isUndefined(i)||(h=i);var j=a("#quote_riskAddress_postCode").val(),k=a("#quote_riskAddress_state").val(),l=a("#quote_vehicle_year").val(),n=a("#quote_vehicle_make option:selected").text(),o=a("#quote_contact_email").val(),p=m.modules.transactionId.get(),q=m.modules.journeyEngine.getCurrentStepIndex(),r=m.modules.journeyEngine.getFurtherestStepIndex(),s="";switch(q){case 0:s="your car";break;case 1:s="car details";break;case 2:s="driver details";break;case 3:s="address contact";break;case 4:s=b===!0?"more info":"car results"}var t={vertical:m.site.vertical,actionStep:s,transactionID:p,quoteReferenceNumber:p,yearOfManufacture:null,makeOfCar:null,gender:null,yearOfBirth:null,postCode:null,state:null,email:null,emailID:null,marketOptIn:null,okToCall:null};return r>m.modules.journeyEngine.getStepIndex("start")&&_.extend(t,{yearOfManufacture:l,makeOfCar:n}),r>m.modules.journeyEngine.getStepIndex("details")&&_.extend(t,{yearOfBirth:c,gender:d}),r>m.modules.journeyEngine.getStepIndex("address")&&_.extend(t,{postCode:j,state:k,email:o,marketOptIn:f,okToCall:h}),t}catch(u){return!1}}function j(){Results.getAjaxRequest()!==!1&&4!==Results.getAjaxRequest().readyState&&200!==Results.getAjaxRequest().status&&Results.getAjaxRequest().abort();var a=k();a&&m.modules.carResults.earlyGet("ajax/json/car_quote_results.jsp?fetchMode=early",b)}function k(){if("Y"===a("#quote_riskAddress_nonStd:checked").val()){if(!a("#quote_riskAddress_postCode").isValid())return!1;if(!a("#quote_riskAddress_suburb").isValid())return!1;if(!a("#quote_riskAddress_nonStdStreet").isValid())return!1}else{if(!a("#quote_riskAddress_postCode").isValid())return!1;if(!a("#quote_riskAddress_streetSearch").isValid())return!1}return a("#quote_vehicle_parking").isValid()&&(-1!=a(location).attr("href").indexOf("jrny=1")||a("#quote_options_commencementDate").isValid())?!0:!1}var l,m=window.meerkat,n=m.modules.events,o=(m.logging.info,{car:{},WEBAPP_LOCK:"WEBAPP_LOCK",WEBAPP_UNLOCK:"WEBAPP_UNLOCK"}),p=null;m.modules.register("car",{init:c,events:o,initProgressBar:f,getTrackingFieldsObject:i})}(jQuery),function(a){function b(){a(document).ready(function(){return"car"!==c.site.vertical?!1:(""!==a("#quote_options_commencementDate").val()&&a("#quote_options_commencementDateDropdown_mobile").val(a("#quote_options_commencementDate").val()),void(null==a("#quote_options_commencementDateDropdown_mobile").val()&&a("#quote_options_commencementDateDropdown_mobile").val("")))}),a("#quote_options_commencementDate").on("change",function(){a("#quote_options_commencementDateDropdown_mobile").val(a("#quote_options_commencementDate").val()),null==a("#quote_options_commencementDateDropdown_mobile").val()&&a("#quote_options_commencementDateDropdown_mobile").val("")}),a("#quote_options_commencementDate").attr("data-attach","true"),a("#quote_options_commencementDateDropdown_mobile").on("change",function(){a("#quote_options_commencementDate").val(a("#quote_options_commencementDateDropdown_mobile").val()),a("#quote_options_commencementDate").blur(),a("#quote_options_commencementDate").keyup()})}{var c=window.meerkat;c.modules.events,c.logging.info}c.modules.register("carCommencementDate",{init:b})}(jQuery),function(a){function b(){a(k.oktocall).on("change",c),a(k.marketing).on("change",d),a(k.privacy).on("change",e)}function c(){"Y"!==g(k.oktocall)&&($row=a(k.phoneRow),$row.find(".has-error").removeClass("has-error"),$row.find(".error-field").empty().hide())}function d(){"Y"!==g(k.marketing)&&($row=a(k.emailRow),$row.find(".has-error").removeClass("has-error"),$row.find(".error-field").empty().hide())}function e(){var b=g(k.privacy);a(k.fsg).val(b),a(k.terms).val(b)}function f(){i.logging.debug("optin data",{oktocall:g(k.oktocall),privacy:g(k.privacy),marketing:g(k.marketing),fsg:a(k.fsg).val(),terms:a(k.terms).val()})}function g(b){var c=a(b);return"radio"===c.first().attr("type")?"Y"===c.filter(":checked").val()?"Y":"N":c.is(":checked")?"Y":"N"}function h(){a(document).ready(function(){return"car"!==i.site.vertical?!1:(b(),void f())})}var i=window.meerkat,j=(i.modules.events,i.logging.info,{}),k={fsg:"#quote_fsg",marketing:"#quote_contactFieldSet input[name='quote_contact_marketing']",oktocall:"#quote_contactFieldSet input[name='quote_contact_oktocall']",privacy:"#quote_privacyoptin",terms:"#quote_terms",phone:"#quote_contact_phone",phoneRow:"#contactNoRow",emailRow:"#contactEmailRow"};i.modules.register("carContactOptins",{init:h,events:j,dump:f})}(jQuery),function(a){function b(){c(),d()}function c(){o.on("show.bs.dropdown",function(){var b=a("#edit-details-template");b.length>0&&(templateCallback=_.template(b.html()));var c={youngDriver:a("input[name=quote_drivers_young_exists]:checked").val()};e(templateCallback(c))}).on("click",".dropdown-container",function(a){a.stopPropagation()})}function d(){l.messaging.subscribe(m.WEBAPP_LOCK,function(){f(),o.children(".activator").addClass("inactive").addClass("disabled")}),l.messaging.subscribe(m.WEBAPP_UNLOCK,function(){o.children(".activator").removeClass("inactive").removeClass("disabled")}),l.messaging.subscribe(m.device.STATE_ENTER_XS,function(){f()}),l.messaging.subscribe(m.device.STATE_LEAVE_XS,function(){f()})}function e(a){"xs"==l.modules.deviceMediaState.get()?p=g(a):h(a)}function f(){o.hasClass("open")&&o.find(".activator").dropdown("toggle").end().find(".edit-details-wrapper").empty(),null!==p&&a("#"+p).modal("hide")}function g(b){var c=l.modules.dialogs.show({htmlContent:'<div class="edit-details-wrapper"></div>',hashId:"edit-details",className:"edit-details-modal",closeOnHashChange:!0,onOpen:function(c){var d=a(".edit-details-wrapper",a("#"+c));d.html(b),l.modules.contentPopulation.render("#"+c+" .edit-details-wrapper"),a(".accordion-collapse").on("show.bs.collapse",function(){a(this).prev(".accordion-heading").addClass("active-panel")}).on("hide.bs.collapse",function(){a(this).prev(".accordion-heading").removeClass("active-panel")}),d.show()}});return c}function h(b){var c=a("#edit-details-dropdown .edit-details-wrapper");c.html(b),l.modules.contentPopulation.render("#edit-details-dropdown .edit-details-wrapper"),c.find(".accordion-collapse").addClass("in").end().show()}function i(a){var b,c=a.val();switch(c){case"5":b=1;break;case"4":b=2;break;case"3":b=3;break;case"2":b=4;break;case"1":b=5;break;case"0":b=6}return 6==b?"Rating 6 No NCD":"undefined"==typeof b?"":"Rating "+b+" ("+c+" Years) NCD"}function j(a){var b,c=a.val(),d="";switch(c){case"H":b=21;break;case"7":b=25;break;case"A":b=30;break;case"D":b=40}return"3"==c?d="No Restrictions":"undefined"!=typeof b&&(d="Restricted to "+b+" or older"),d}function k(a){var b=a.find(":checked").val(),c=" Accident/Hail Damage";return"Y"===b?c:"N"===b?"No"+c:""}var l=window.meerkat,m=l.modules.events,n=(l.logging.info,{carEditDetails:{}}),o=(n.carEditDetails,a("#edit-details-dropdown")),p=null;l.modules.register("carEditDetails",{initEditDetails:b,events:n,driverOptin:j,formatNcd:i,formatDamage:k,hide:f})}(jQuery),function(a){function b(){if(r.removeClass("active"),s.removeClass("active"),"undefined"!=typeof Results.settings&&Results.settings.hasOwnProperty("displayMode")===!0)switch(Results.getDisplayMode()){case"price":r.addClass("active");break;case"features":s.addClass("active")}var b=a("#quote_paymentType").val();t.find(".dropdown-toggle span").text("undefined"==typeof b?t.find(".dropdown-menu a:first").text():t.find('.dropdown-menu a[data-value="'+b+'"]').text());var c=a("#quote_excess").val();u.find(".dropdown-toggle span").text("undefined"==typeof c?u.find(".dropdown-menu a:first").text():u.find('.dropdown-menu a[data-value="'+c+'"]').text())}function c(b){b.preventDefault();var c=a(b.target),d=c.parents(".dropdown"),e=c.attr("data-value");d.find(".dropdown-toggle span").text(c.text()),c.parent().siblings().removeClass("active"),c.parent().addClass("active"),d.hasClass("filter-frequency")?e!==B.frequency&&(B.frequency=e,a("#quote_paymentType").val(B.frequency),Results.setFrequency(e),v.messaging.publish(y.CHANGED)):d.hasClass("filter-excess")&&e!==B.excess&&(B.excess=e,a("#quote_excess").val(e),v.messaging.publish(y.CHANGED,{excess:e}))}function d(){B={display:Results.getDisplayMode(),frequency:a("#quote_paymentType").val(),excess:a("#quote_excess").val()}}function e(){t.find("li.active").removeClass("active"),t.find("a[data-value="+B.frequency+"]").each(function(){a(this).parent().addClass("active")}),u.find("li.active").removeClass("active"),_.isEmpty(B.excess)||u.find("a[data-value="+B.excess+"]").each(function(){a(this).parent().addClass("active")})}function f(){q.slideUp(200,function(){q.addClass("hidden")})}function g(){q.removeClass("hidden").hide().slideDown(200),d(),e()}function h(){q.find("li.dropdown, .dropdown-toggle").addClass("disabled"),r.addClass("disabled"),r.find("a").addClass("disabled"),s.addClass("disabled"),s.find("a").addClass("disabled"),a(".slide-feature-filters").find("a").addClass("disabled").addClass("inactive")}function i(){q.find("li.dropdown, .dropdown-toggle").removeClass("disabled"),r.removeClass("disabled"),r.find("a").removeClass("disabled"),s.removeClass("disabled"),s.find("a").removeClass("disabled"),a(".slide-feature-filters").find("a").removeClass("inactive").removeClass("disabled")}function j(){a(document).on("resultsFetchStart",function(){h()}),a(document).on("pagination.scrolling.start",function(){h()}),a(document).on("resultsFetchFinish",function(){i()}),a(document).on("pagination.scrolling.end",function(){i()}),r.on("click",function(c){c.preventDefault(),a(this).hasClass("disabled")||(v.modules.carResults.switchToPriceMode(!0),b(),v.modules.session.poke())}),s.on("click",function(c){c.preventDefault(),a(this).hasClass("disabled")||(v.modules.carResults.switchToFeaturesMode(!0),b(),v.modules.session.poke())}),q.on("click",".dropdown-menu a",c)}function k(){var b=_.template(a("#car-xsFilterBar-template").html()),c=a("#quote_excess").val(),d=b({startingValue:_.isEmpty(c)?0:c});return A=v.modules.dialogs.show({title:a(this).attr("title"),htmlContent:d,hashId:"xsFilterBar",rightBtn:{label:"Save Changes",className:"btn-sm btn-save",callback:m},closeOnHashChange:!0,onOpen:l}),!1}function l(){"undefined"!=typeof Results.settings&&Results.settings.hasOwnProperty("displayMode")===!0&&(a("#xsFilterBarSortRow input:checked").prop("checked",!1),a("#xsFilterBarSortRow #xsFilterBar_sort_"+Results.getDisplayMode()).prop("checked",!0).change()),a("#xsFilterBarFreqRow input:checked").prop("checked",!1),a("#xsFilterBarFreqRow #xsFilterBar_freq_"+a("#quote_paymentType").val()).prop("checked",!0).change();try{v.modules.sliders.init()}catch(b){}}function m(){var c=a("#quote_paymentType"),d=a("#quote_excess"),e={display:a("#xsFilterBarSortRow input:checked").val(),freq:a("#xsFilterBarFreqRow input:checked").val(),excess:a("#xsFilterBarExcessRow input[name=xsFilterBar_excess]").val()};0===Number(e.excess)&&(e.excess=""),c.val(e.freq),d.val(e.excess),e.display!==B.display&&("features"===e.display?v.modules.carResults.switchToFeaturesMode(!0):"price"===e.display&&v.modules.carResults.switchToPriceMode(!0)),v.modules.dialogs.close(A),v.modules.navMenu.close(),b(),B.frequency!==e.freq&&(B.frequency=e.freq,Results.setFrequency(B.frequency),v.messaging.publish(y.CHANGED)),B.excess!==e.excess&&(B.excess=e.excess,v.messaging.publish(y.CHANGED,{excess:e.excess}))}function n(){var b=!a("#navbar-filter").hasClass("hidden");b&&z===!0&&(d(),k())}function o(a){z=_.isUndefined(a)?"xs"===v.modules.deviceMediaState.get():a.isXS===!0,z===!1&&v.modules.dialogs.isDialogOpen(A)&&v.modules.dialogs.close(A)}function p(){q=a("#navbar-filter"),0!==q.length&&(r=q.find(".filter-pricemode"),s=q.find(".filter-featuresmode"),t=q.find(".filter-frequency"),u=q.find(".filter-excess"),j(),a(document).ready(function(){var b;b=u.find(".dropdown-menu"),a("#filter_excessOptions option").each(function(){b.append('<li><a href="javascript:;" data-value="'+this.value+'">'+this.text+"</a></li>")}),b=t.find(".dropdown-menu"),a("#filter_paymentType option").each(function(){b.append('<li><a href="javascript:;" data-value="'+this.value+'">'+this.text+"</a></li>")}),a("#navbar-main .slide-feature-filters a").on("click",function(b){b.preventDefault(),a(this).hasClass("disabled")||n()}),v.messaging.subscribe(w.device.STATE_ENTER_XS,_.bind(o,this,{isXS:!0})),v.messaging.subscribe(w.device.STATE_LEAVE_XS,_.bind(o,this,{isXS:!1})),o()}))}var q,r,s,t,u,v=window.meerkat,w=v.modules.events,x=(v.logging.info,{carFilters:{CHANGED:"CAR_FILTERS_CHANGED"}}),y=x.carFilters,z=!1,A=!1,B={display:!1,frequency:!1,excess:!1};v.modules.register("carFilters",{init:p,events:x,updateFilters:b,hide:f,show:g,disable:h,enable:i,onRequestModal:n})}(jQuery),function(a){function b(){var b={container:D,hideAction:"fadeOut",showAction:"fadeIn",modalOptions:{className:"modal-breakpoint-wide modal-tight bridgingContainer",openOnHashChange:!1,leftBtn:{label:"All Products",icon:'<span class="icon icon-arrow-left"></span>',callback:function(b){a(b.currentTarget).closest(".modal").modal("hide")}}},runDisplayMethod:l,onBeforeShowBridgingPage:i,onBeforeShowTemplate:w,onBeforeShowModal:w,onAfterShowModal:null,onAfterShowTemplate:j,onBeforeHideTemplate:null,onAfterHideTemplate:k,onClickApplyNow:o,onBeforeApply:null,onApplySuccess:x,retrieveExternalCopy:m};A.modules.moreInfo.initMoreInfo(b),h(),c()}function c(){a(document).on("click",".bridgingContainer .btn-call-actions",function(b){b.preventDefault(),b.stopPropagation();var c=a(this),g=a("#car-call-modal-template");g.length>0&&(templateCallback=_.template(g.html()));var h=A.modules.moreInfo.getOpenProduct();if("Y"===h.available){var i=templateCallback(h),j={htmlContent:i,hashId:"call",className:"call-modal",closeOnHashChange:!0,openOnHashChange:!1,onOpen:function(g){a("."+c.attr("data-callback-toggle")).show(),e(".paragraphedContent:visible",".sidebar-right",a("#"+g)),d(),c.hasClass("btn-calldirect")?f(b):r()}};"xs"==A.modules.deviceMediaState.get()&&(j.title="Reference no. "+h.leadNo),z=A.modules.dialogs.show(j)}}).on("click",".call-modal .btn-call-actions",function(b){"xs"!=A.modules.deviceMediaState.get()&&b.preventDefault(),b.stopPropagation();var c=a(this);switch(c.attr("data-callback-toggle")){case"calldirect":a(".callback").hide(),a(".calldirect").show(),f(b);break;case"callback":a(".calldirect").hide(),a(".callback").show(),r()}e(".paragraphedContent:visible",".sidebar-right",c.closest(".modal.in"))}).on("click",".btn-submit-callback",function(b){b.preventDefault();var c=a(this);if(c.closest("form").valid()){var d=A.site.tracking.brandCode.toUpperCase();g(b,{message:d+" - Car Vertical - Call me now",phonecallme:"GetaCall"}),s()}else _.delay(function(){e(".paragraphedContent:visible",".sidebar-right",c.closest(".modal.in"))},200);return!1})}function d(){setupDefaultValidationOnForm(a("#getcallback"));var b=a("#quote_CrClientName");b.length&&!b.val().length&&b.val(a("#quote_drivers_regular_firstname").val()+" "+a("#quote_drivers_regular_surname").val());var c=a("#quote_CrClientTelinput");c.length&&!c.val().length&&c.val(a("#quote_contact_phone").val()),c.attr("data-msg-required","Please enter your contact number")}function e(b,c,d){if("xs"!=A.modules.deviceMediaState.get()&&a(c,d).length){var e=a(b,d).outerHeight(),f=a(c,d).outerHeight();e>=f?(a(c,d).css("min-height",e+"px"),a(b,d).css("min-height",e+"px")):(a(c,d).css("min-height",f+"px"),a(b,d).css("min-height",f+"px"))}}function f(a){var b=A.modules.moreInfo.getOpenProduct();if("undefined"==typeof E[b.productId]){q();var c=A.site.tracking.brandCode.toUpperCase();return g(a,{message:c+" - Car Vertical - Call direct",phonecallme:"CallDirect"})}}function g(b,c){var d=A.modules.moreInfo.getOpenProduct();"undefined"!=typeof d&&null!==d&&"undefined"!=typeof d.vdn&&!_.isEmpty(d.vdn)&&d.vdn>0&&(c.vdn=d.vdn);var e=A.site.tracking.brandCode.toUpperCase(),f={source:e+"CAR",leadNo:d.leadNo,client:a("#quote_CrClientName").val()||"",clientTel:a("#quote_CrClientTelinput").val()||"",state:a("#quote_riskAddress_state").val(),brand:d.productId.split("-")[0],transactionId:A.modules.transactionId.get()},g=a.extend(f,c),h=a(b.target);return A.modules.loadingAnimation.showInside(h,!0),A.modules.comms.post({url:"ajax/write/lead_feed_save.jsp",data:g,dataType:"json",cache:!1,errorLevel:"GetaCall"===c.phonecallme?"warning":"silent",onSuccess:function(){if("GetaCall"==c.phonecallme){A.modules.dialogs.show({title:"Call back request recorded",htmlContent:"<p><strong>Thank you!</strong></p><p>Your Call request has been sent to the insurer's message centre who will be in touch as soon as possible.</p>",hashId:"call-back-success",openOnHashChange:!1,closeOnHashChange:!0,onClose:function(){a(".modal").modal("hide"),A.modules.moreInfo.isBridgingPageOpen()&&A.modules.moreInfo.close()}})}},onComplete:function(){"CallDirect"==c.phonecallme&&(E[d.productId]=!0),A.modules.loadingAnimation.hide(h)}})}function h(){A.messaging.subscribe(B.ADDRESS_CHANGE,function(a){"xs"!=A.modules.deviceMediaState.get()&&-1==a.hash.indexOf("results/moreinfo")&&A.modules.moreInfo.hideTemplate(D)}),A.messaging.subscribe(B.device.STATE_ENTER_XS,function(){A.modules.moreInfo.isBridgingPageOpen()&&A.modules.moreInfo.close(),"undefined"!=typeof z&&a("#"+z).modal("hide")}),A.messaging.subscribe(B.device.STATE_LEAVE_XS,function(){A.modules.moreInfo.isModalOpen()&&A.modules.moreInfo.close(),"undefined"!=typeof z&&a("#"+z).modal("hide")}),A.messaging.subscribe(B.errorHandling.OK_CLICKED,function(){(A.modules.moreInfo.isBridgingPageOpen()||A.modules.moreInfo.isModalOpen())&&A.modules.moreInfo.close()})}function i(){"xs"!=A.modules.deviceMediaState.get()&&a(".resultsContainer, #navbar-filter").hide()}function j(){("lg"==A.modules.deviceMediaState.get()||"md"==A.modules.deviceMediaState.get())&&e(".paragraphedContent",".moreInfoRightColumn",D)}function k(){a(".resultsContainer, #navbar-filter").show()}function l(){"xs"!=A.modules.deviceMediaState.get()?A.modules.moreInfo.showTemplate(D):A.modules.moreInfo.showModal(),A.modules.address.appendToHash("moreinfo")}function m(a){return A.modules.comms.get({url:"ajax/json/get_scrapes.jsp",cache:!0,data:{type:"carBrandScrapes",code:a.productId,group:"car"},errorLevel:"silent",onSuccess:function(a){A.modules.moreInfo.setDataResult(a)}})}function n(b){try{return"transferring.jsp?url="+escape(b.quoteUrl)+"&trackCode="+b.trackCode+"&brand="+escape(b.productDes)+"&msg="+a("#transferring_"+b.productId).text()+"&transactionId="+A.modules.transactionId.get()}catch(c){return A.modules.errorHandling.error({errorLevel:"warning",message:"An error occurred. Sorry about that!<br /><br /> To purchase this policy, please contact the provider "+(""!==b.telNo?" on "+b.telNo:"directly")+" quoting "+b.leadNo+", or select another policy.",page:"carMoreInfo.js:getTransferUrl",description:"Unable to generate transferring URL",data:b}),""}}function o(b,c){if(G===!0&&F.length>0){var d=a("#special-conditions-template");d.length>0&&(templateCallback=_.template(d.html()));var e=A.modules.moreInfo.getOpenProduct();e.specialConditionsRule=F;{var f=templateCallback(e);A.modules.dialogs.show({htmlContent:f,hashId:"special-conditions",title:"Special Conditions Confirmation",closeOnHashChange:!0,openOnHashChange:!1,onOpen:function(d){a(".btn-proceed-to-insurer",a("#"+d)).off("click.proceed").on("click.proceed",function(){return p(b,d,c)}),a(".btn-back",a("#"+d)).off("click.goback").on("click.goback",function(){a(".modal").modal("hide"),A.modules.moreInfo.isBridgingPageOpen()&&A.modules.moreInfo.close()})},onClose:function(){A.modules.moreInfo.applyCallback(!1)}})}return!1}return p(b,!1,c)}function p(b,c,d){return c&&a("#"+c).modal("hide"),_.isEmpty(b.quoteUrl)?(A.modules.errorHandling.error({errorLevel:"warning",message:"An error occurred. Sorry about that!<br /><br /> To purchase this policy, please contact the provider "+(""!==b.telNo?" on "+b.telNo:"directly")+" quoting "+b.leadNo+", or select another policy.",page:"carMoreInfo.js:proceedToInsurer",description:"Insurer did not provide quoteUrl in results object.",data:b}),!1):(u(b),d(!0),!0)}function q(){var a=0;for(var b in E)E.hasOwnProperty(b)&&a++;a>1||t("CrCallDir")}function r(){t("CrCallBac")}function s(){t("CrCallBacSub")}function t(a){var b=A.modules.moreInfo.getOpenProduct();A.messaging.publish(B.tracking.EXTERNAL,{method:"trackBridgingClick",object:{vertical:A.site.vertical,type:a,quoteReferenceNumber:b.leadNo,transactionID:A.modules.transactionId.get(),productID:b.productId}}),A.modules.session.poke()}function u(a){var b=A.modules.transactionId.get();A.messaging.publish(B.tracking.EXTERNAL,{method:"trackHandover",object:{quoteReferenceNumber:a.leadNo,transactionID:b,productID:a.productId,brandCode:a.brandCode}}),A.messaging.publish(B.tracking.EXTERNAL,{method:"trackHandoverType",object:{type:"ONLINE",quoteReferenceNumber:a.leadNo,transactionID:b,productID:a.productId,brandCode:a.brandCode,vertical:A.site.vertical}}),A.messaging.publish(B.tracking.TOUCH,{touchType:"A"}),A.modules.session.poke()}function v(){A.messaging.publish(B.tracking.EXTERNAL,{method:"trackQuoteForms",object:_.bind(A.modules.car.getTrackingFieldsObject,this,!0)})}function w(b){v(),"undefined"!=typeof b&&"undefined"!=typeof b.scrapes&&b.scrapes.length>0&&a.each(b.scrapes,function(b,c){""!==c.html&&a(c.cssSelector).html(c.html)}),a(".contentRow li").each(function(){a(this).prepend('<span class="icon icon-angle-right"></span>')})}function x(){}function y(a,b){G=a,F=b}var z,A=window.meerkat,B=A.modules.events,C={carMoreInfo:{}},D=(C.carMoreInfo,a(".bridgingContainer")),E={},F="",G=!1;A.modules.register("carMoreInfo",{initMoreInfo:b,events:C,setSpecialConditionDetail:y,runDisplayMethod:l,getTransferUrl:n})}(jQuery),function(a){function b(){d(),Features.init(),Compare.init(),e(),f()}function c(){f(),u!==v.modules.deviceMediaState.get()&&(Results.view.calculateResultsContainerWidth(),Features.clearSetHeights(),Features.balanceVisibleRowsHeight()),Results.pagination.refresh()}function d(){try{var a="price";"undefined"!=typeof v.site&&"undefined"!=typeof v.site.resultOptions&&(a="features"==v.site.resultOptions.displayMode?"features":"price"),Results.init({url:"ajax/json/car_quote_results.jsp",runShowResultsPage:!1,paths:{productId:"productId",price:{annually:"headline.lumpSumTotal",annual:"headline.lumpSumTotal",monthly:"headline.instalmentTotal"},availability:{product:"available",price:{annually:"headline.lumpSumTotal",annual:"headline.lumpSumTotal",monthly:"headline.instalmentTotal"}}},show:{savings:!1,featuresCategories:!1,nonAvailablePrices:!0,nonAvailableProducts:!1,unavailableCombined:!0},availability:{product:["equals","Y"],price:["notEquals",-1]},render:{templateEngine:"_",features:{mode:"populate",headers:!1,numberOfXSColumns:1},dockCompareBar:!1},displayMode:a,paginationMode:"page",paginationTouchEnabled:Modernizr.touch,sort:{sortBy:"price.annually"},frequency:"annual",animation:{results:{individual:{active:!1},delay:500,options:{easing:"swing",duration:1e3}},shuffle:{active:!0,options:{easing:"swing",duration:1e3}},filter:{reposition:{options:{easing:"swing"}}}},elements:{features:{values:".content",extras:".children"}},templates:{pagination:{pageText:"Product {{=currentPage}} of {{=totalPages}}"}},dictionary:{valueMap:[{key:"Y",value:"<span class='icon icon-tick'></span>"},{key:"N",value:"<span class='icon icon-cross'></span>"},{key:"R",value:"Restricted / Conditional"},{key:"AI",value:"Additional Information"},{key:"O",value:"Optional"},{key:"L",value:"Limited"},{key:"SCH",value:"As shown in schedule"},{key:"NA",value:"Non Applicable"},{key:"E",value:"Excluded"},{key:"NE",value:"No Exclusion"},{key:"NS",value:"No Sub Limit"},{key:"OTH",value:""}]},rankings:{paths:{rank_productId:"productId",rank_premium:"headline.lumpSumTotal"},filterUnavailableProducts:!1},incrementTransactionId:!1})}catch(b){Results.onError("Sorry, an error occurred initialising page","results.tag","meerkat.modules.carResults.init(); "+b.message,b)}}function e(){a(document.body).on("click","a.offerTerms",o),a(Results.settings.elements.resultsContainer).on("click",".result-row",r),v.messaging.subscribe(w.affix.AFFIXED,function(){a("#resultsPage").css("margin-top","35px")}),v.messaging.subscribe(w.affix.UNAFFIXED,function(){a("#resultsPage").css("margin-top","0")}),v.messaging.subscribe(w.carFilters.CHANGED,function(a){a&&a.hasOwnProperty("excess")&&(Results.settings.incrementTransactionId=!0,j(),Results.settings.incrementTransactionId=!1),v.modules.session.poke()}),v.messaging.subscribe(x.RESULTS_ERROR,function(){_.delay(function(){v.modules.journeyEngine.gotoPath("previous")},1e3)}),a(Results.settings.elements.resultsContainer).on("featuresDisplayMode",function(){Features.buildHtml()}),a(Results.settings.elements.resultsContainer).on("noFilteredResults",function(){Results.view.show()}),a(document).on("resultsLoaded",l),a(document).on("resultsReturned",function(){v.modules.utilities.scrollPageTo(a("header")),a(".featuresHeaders .expandable.expanded").removeClass("expanded").addClass("collapsed")}),a(document).on("resultsFetchStart",function(){v.modules.journeyEngine.loadingShow("getting your quotes"),a("#resultsPage, .loadingDisclaimerText").removeClass("hidden"),Results.pagination.hide()}),a(document).on("resultsFetchFinish",function(){a(Results.settings.elements.page).show(),v.modules.journeyEngine.loadingHide(),a(".loadingDisclaimerText").addClass("hidden"),"price"!==Results.getDisplayMode()?Results.pagination.show():a(document.body).removeClass("priceMode").addClass("priceMode");var b=0;a.each(Results.model.returnedProducts,function(){"Y"===this.available&&"CURR"!==this.productId&&b++}),0===b&&_.isArray(Results.model.returnedProducts)&&Results.model.returnedProducts.length>0&&m()
}),a(document).on("populateFeaturesStart",function(){v.modules.performanceProfiling.startTest("results")}),a(Results.settings.elements.resultsContainer).on("populateFeaturesEnd",function(){var a,b=v.modules.performanceProfiling.endTest("results");a=800>b?v.modules.performanceProfiling.PERFORMANCE.HIGH:8e3>b&&v.modules.performanceProfiling.isIE8()===!1?v.modules.performanceProfiling.PERFORMANCE.MEDIUM:v.modules.performanceProfiling.PERFORMANCE.LOW,Results.setPerformanceMode(a)}),a(document).on("resultPageChange",function(a){var b=a.pageData;if(null===b.measurements)return!1;{var c=Results.getFilteredResults().length,d=b.measurements.columnsPerPage;d*b.measurements.numberOfPages-c}}),a(document).on("FeaturesRendered",function(){a(Features.target+" .expandable > "+Results.settings.elements.features.values).on("mouseenter",function(){var b=a(this).attr("data-featureId"),c=a(Features.target+' [data-featureId="'+b+'"]');c.addClass(Results.settings.elements.features.expandableHover.replace(/[#\.]/g,""))}).on("mouseleave",function(){var b=a(this).attr("data-featureId"),c=a(Features.target+' [data-featureId="'+b+'"]');c.removeClass(Results.settings.elements.features.expandableHover.replace(/[#\.]/g,""))})})}function f(){g(),v.messaging.subscribe(w.device.STATE_ENTER_XS,function(){"results"===v.modules.journeyEngine.getCurrentStep().navigationId&&g()}),v.messaging.subscribe(w.device.STATE_LEAVE_XS,function(){h(),Results.pagination.setCurrentPageNumber(1),Results.pagination.resync()})}function g(){"xs"===v.modules.deviceMediaState.get()&&"features"===Results.getDisplayMode()&&(Results.view.startColumnWidthTracking(a(window),Results.settings.render.features.numberOfXSColumns,!1),Results.pagination.setCurrentPageNumber(1),Results.pagination.resync())}function h(){Results.view.stopColumnWidthTracking()}function i(){u=v.modules.deviceMediaState.get()}function j(){Results.get()}function k(a,b){Results.earlyGet(a,b)}function l(){switch(g(),Results.getDisplayMode()){case"features":q(!1);break;default:z=!0,p(!1)}}function m(){v.modules.dialogs.show({htmlContent:a("#no-results-content")[0].outerHTML}),v.modules.hasOwnProperty("carFilters")&&v.modules.carFilters.disable()}function n(){var b=Results.getDisplayMode();0===b.indexOf("f")&&(b=b.slice(0,-1));var c={vertical:v.site.vertical,actionStep:v.site.vertical+" results",display:b,paymentPlan:a("#navbar-filter .dropdown.filter-frequency span:first-child").text(),preferredExcess:a("#navbar-filter .dropdown.filter-excess span:first-child").text(),event:y};-1!==c.preferredExcess.toLowerCase().indexOf("please")&&(c.preferredExcess=""),v.messaging.publish(w.tracking.EXTERNAL,{method:"trackQuoteList",object:c}),y="Refresh"}function o(b){b.preventDefault();var c=a(b.target),d=c.next(".offerTerms-content"),e=c.closest(".resultInsert, .more-info-content, .call-modal").find(".carCompanyLogo"),f=c.closest(".resultInsert, .more-info-content, .call-modal").find(".productTitle, .productName");v.modules.dialogs.show({title:e.clone().wrap("<p>").addClass("hidden-xs").parent().html()+"<div class='hidden-xs heading'>"+f.html()+"</div><div class='heading'>Offer terms</div>",hashId:"offer-terms",openOnHashChange:!1,closeOnHashChange:!0,htmlContent:e.clone().wrap("<p>").removeClass("hidden-xs").addClass("hidden-sm hidden-md hidden-lg").parent().html()+"<h2 class='visible-xs heading'>"+f.html()+"</h2>"+d.html()})}function p(b){"undefined"==typeof b&&(b=!0),null!==Results.getDisplayMode()&&"price"!==Results.getDisplayMode()&&(Results.pagination.hide(),a("header .xs-results-pagination").addClass("hidden"),Results.setDisplayMode("price"),h(),a(document.body).addClass("priceMode"),a(window).scrollTop(0),b&&n())}function q(b){if("undefined"==typeof b&&(b=!0),null!==Results.getDisplayMode()&&"features"!==Results.getDisplayMode()){var c=z===!0;Results.setDisplayMode("features",c),g(),_.defer(function(){Results.pagination.gotoPage(1),"xs"===v.modules.deviceMediaState.get()&&Results.view.setColumnWidth(a(window),Results.settings.render.features.numberOfXSColumns,!1),Results.pagination.setupNativeScroll()}),Results.pagination.show(!0),a("header .xs-results-pagination").removeClass("hidden"),z=!1,a(document.body).removeClass("priceMode"),a(window).scrollTop(0),b&&n()}}function r(b){if(a(Results.settings.elements.resultsContainer).hasClass("priceMode")!==!1&&"xs"===v.modules.deviceMediaState.get()){var c=a(b.target);c.hasClass("result-row")===!1&&(c=c.parents(".result-row")),"undefined"!=typeof c.attr("data-available")&&"Y"===c.attr("data-available")&&(v.modules.moreInfo.setProduct(Results.getResult("productId",c.attr("data-productId"))),v.modules.carMoreInfo.runDisplayMethod())}}function s(){t=a("#resultsPage"),v.messaging.subscribe(w.RESULTS_RANKING_READY,n)}var t,u,v=window.meerkat,w=v.modules.events,x=(v.logging.info,{RESULTS_ERROR:"RESULTS_ERROR"}),y="Load",z=!1;v.modules.register("carResults",{init:s,initPage:b,onReturnToPage:c,get:j,earlyGet:k,stopColumnWidthTracking:h,recordPreviousBreakpoint:i,switchToPriceMode:p,switchToFeaturesMode:q,showNoResults:m,publishExtraSuperTagEvents:n})}(jQuery),function(){function a(a){var c=!1;switch(a){case"buttonLabel":c="Save Quote";break;case"saveAgain":c='Click \'Save Quote\' to update your saved quote <a href="javascript:;" class="btn btn-save saved-continue-link btn-save-quote">Save Quote</a>';break;case"saveSuccess":c='<div class="col-xs-12"><h4>Your quote has been saved.</h4><p>To retrieve your quote <a href="'+b.site.urls.base+'retrieve_quotes.jsp" class="btn-cancel saved-continue-link btn-link">click here</a>.</p><a href="javascript:;" class="btn btn-cancel">Close</a></div>'}return c}var b=window.meerkat,c=(b.modules.events,b.logging.info,b.messaging,{});b.modules.register("carSaveQuote",{events:c,getCopy:a})}(jQuery),function(a){function b(b){var c="N",e=!_.isEmpty(b.alarm),f=!_.isEmpty(b.immobiliser);if(e&&f?c="B":e?c="A":f&&(c="I"),"N"!==c)a(g.selectorParent).empty(),a(g.visibleRow).hide(),a(g.hiddenRow).empty().append(a("<input/>",{type:"hidden",name:"quote_vehicle_securityOption",id:"quote_vehicle_securityOption",value:c})).append(a("<input/>",{type:"hidden",name:"quote_vehicle_securityOptionCheck",id:"quote_vehicle_securityOptionCheck",value:"Y"})).show();else{if(a(g.hiddenRow).empty(),i.find("option:selected").removeAttr("selected"),i.find("select:first").attr("selectedIndex",0),a(g.selectorParent).empty().append(i),h===!0){h=!1;var j=d.site.vehicleSelectionDefaults.securityOption;_.isEmpty(j)||a(g.selector).find("option").each(function(){var b=a(this);b.val()==j&&b.prop("selected",!0)})}a(g.visibleRow).show()}}function c(){a(document).ready(function(){return"car"!==d.site.vertical?!1:(d.messaging.subscribe(e.carVehicleOptions.UPDATED_VEHICLE_DATA,b),i=a(g.selector).clone(),i.find("option:selected").removeAttr("selected"),i.find("select:first").attr("selectedIndex",0),void a(g.selector).remove())})}var d=window.meerkat,e=d.modules.events,f=(d.logging.info,{carVehicleOptions:{UPDATED_VEHICLE_DATA:"UPDATED_VEHICLE_DATA"}}),g={selector:"#securityOptionRow .select:first, #securityOptionRow .fieldrow_legend:first",selectorParent:"#securityOptionRow .row-content",visibleRow:"#securityOptionRow",hiddenRow:"#securityOptionHiddenRow"},h=!0,i=null;d.modules.register("carSecurityOptions",{init:c,events:f,onUpdatedVehicleData:b})}(jQuery),function(a){function b(){d.messaging.subscribe(e.car.SELECTION_RENDERED,function(a){c(a.type)})}function c(){var b=a("#quote_vehicle_make");if(""!==b.val()){var c=a(".quoteSnapshot");c.removeClass("hidden"),d.modules.contentPopulation.render(".journeyEngineSlide:eq(0) .snapshot")}}{var d=window.meerkat,e=d.modules.events,f=(d.logging.info,{carSnapshot:{}});f.example}d.modules.register("carSnapshot",{init:b,events:f})}(jQuery),function(a){function b(b){if(Q===!1){var e=a(I.factory.button);F.modules.loadingAnimation.showAfter(e);var f={redbookCode:a(I.redbook).val()};Q=!0,F.modules.comms.get({url:"ajax/json/car_vehicle_options.jsp",data:f,cache:!0,useDefaultErrorHandling:!1,numberOfAttempts:3,errorLevel:"fatal",onSuccess:function(a){L=a,d(),F.messaging.publish(H.carVehicleOptions.UPDATED_VEHICLE_DATA,L),A(),_.isFunction(b)&&b()},onError:c,onComplete:function(){Q=!1,F.modules.loadingAnimation.hide(e)}})}}function c(a,b,c,d,e){F.modules.errorHandling.error({message:"Sorry, we cannot seem to retrieve a list of accessories for your vehicles at this time. Please come back to us later and try again.",page:"carVehicleOptions.js:getVehicleData()",errorLevel:"warning",description:"Failed to retrieve a list of accessories for RedBook Code: "+c,data:e})}function d(){var a=["alarm","immobiliser","options","standard"];_.isObject(L)||(L={});for(var b=0;b<a.length;b++)L.hasOwnProperty(a[b])&&_.isArray(L[a[b]])||(L[a[b]]=[])}function e(){var b=m(L.options),c=o(L.standard),d=_.template(a(I.factory.template).html()),e=d({optionalAccessories:b,standardAccessories:c});return K.factory=F.modules.dialogs.show({title:a(this).attr("title"),htmlContent:e,hashId:"factory-options",tabs:[{title:"Add Factory/Dealer Options",xsTitle:"Factory/Dealer Options",targetSelector:".quote-factory-options"},{title:"View Included Standard Accessories",xsTitle:"Standard Accessories",targetSelector:".quote-standard-accessories"}],buttons:[{label:"Save Changes",className:"btn-save",action:_.bind(x,this,{type:"factory"})}],rightBtn:{label:"Save Changes",className:"btn-sm btn-save",callback:_.bind(x,this,{type:"factory"})},closeOnHashChange:!0,openOnHashChange:!1,onClose:_.bind(B,this,{type:"factory"}),onOpen:function(b){_.isArray(L.options)&&L.options.length?a(".quote-factory-options .no-items-found").addClass("hidden"):a(".quote-factory-options .items-found").addClass("hidden"),_.isArray(L.standard)&&L.standard.length?a(".quote-standard-accessories .no-items-found").addClass("hidden"):a(".quote-standard-accessories .items-found").addClass("hidden"),a("#"+b).on("click",".nav-tabs a",function(c){c.preventDefault(),c.stopPropagation(),a(this).tab("show"),a("#"+b+" .modal-title-label").html(a(this).attr("title"))}),a(".nav-tabs a:first").click(),J&&_.defer(function(){a(function(){a("html.lt-ie9 form#quote_vehicle_factoryOptionsDialogForm").on("change.checkedForIE",".checkbox input, .compareCheckbox input",function(){var b=a(this);b.is(":checked")?b.addClass("checked"):b.removeClass("checked")}),a("html.lt-ie9 form#quote_vehicle_factoryOptionsDialogForm .checkbox input").change()})})}}),!1}function f(){var b=n(M),c=o(L.standard),d=p(),e=_.template(a(I.accessories.template).html()),f=e({optionalAccessories:b,standardAccessories:c,selectedAccessories:d});return K.accessories=F.modules.dialogs.show({title:a(this).attr("title"),htmlContent:f,hashId:"accessories",tabs:[{title:"Add Non-Standard Accessories",xsTitle:"Non-Standard Accessories",targetSelector:".quote-optional-accessories"},{title:"View Included Standard Accessories",xsTitle:"Standard Accessories",targetSelector:".quote-standard-accessories"}],buttons:[{label:"Save Changes",className:"btn-save",action:_.bind(x,this,{type:"accessories"})}],rightBtn:{label:"Save Changes",className:"btn-sm btn-save",callback:_.bind(x,this,{type:"accessories"})},closeOnHashChange:!0,openOnHashChange:!1,onClose:_.bind(B,this,{type:"accessories"}),onOpen:function(b){_.isArray(M)&&M.length?a(".quote-optional-accessories .no-items-found").addClass("hidden"):a(".quote-optional-accessories .items-found").addClass("hidden"),_.isArray(L.standard)&&L.standard.length?a(".quote-standard-accessories .no-items-found").addClass("hidden"):a(".quote-standard-accessories .items-found").addClass("hidden"),a("#"+b).on("click",".nav-tabs a",function(c){c.preventDefault(),c.stopPropagation(),a(this).tab("show"),a("#"+b+" .modal-title-label").html(a(this).attr("title"))}),a(".nav-tabs a:first").click(),g()}}),!1}function g(){a(I.accessories.add).find("button:first").on("click",i),a(I.accessories.clear).find("button:first").on("click",h),a(I.accessories.included).find("label.btn").off().on("click",function(){a(this).change(),"N"==a(this).find("input:first").val()?_.defer(function(){a(I.accessories.included).hide(),a(I.accessories.price).show()}):a(I.accessories.price).hide(),_.defer(function(){a(I.accessories.add+","+I.accessories.clear).show()})});for(var b=0;b<O.accessories.length;b++){var c=O.accessories[b],d=a(I.accessories.addeditems),e=d.find("li.added-item-"+c.position).first();e.data("info",c),e.find("a:first").on("click",_.bind(k,this,c))}}function h(){a(I.accessories.price+","+I.accessories.add+","+I.accessories.clear).hide(),a(I.accessories.included).show(),$type=a(I.accessories.type),$included=a(I.accessories.included),$price=a(I.accessories.price),$included.find(".active").removeClass("active").end().find("input:checked").prop("checked",!1).change().end().find(".error-field").empty().end().removeClass("has-error"),$type.find("select:first").prop("selectedIndex",0).end().find("option").prop("selected",!1).end().removeClass("has-error").end().find(".error-field").empty(),$price.removeClass("has-error").find(".error-field").empty().end().find("input").val("")}function i(){var b=l();b!==!1&&(a(I.accessories.type).find("option").each(function(){0===a(this).val().indexOf(b.position)&&a(this).remove()}),a(I.accessories.addeditems).append(j(b)),h())}function j(b){return a("<li/>").addClass("added-item-"+b.position).data("info",b).append(a("<span/>").append(b.info.label)).append(a("<a/>",{title:"remove accessory"}).addClass("icon-cross").on("click",_.bind(k,this,b))).append(a("<span/>").append(b.price===!1?"included":"$"+b.price))}function k(b){a(I.accessories.addeditems).find(".added-item-"+b.position).remove(),a(I.accessories.type).find("option").each(function(){return parseInt(a(this).val(),10)>b.position?(a(this).before(a("<option/>",{text:b.info.label,value:b.position+"_"+b.info.code})),!1):void 0})}function l(){var b=a(I.accessories.type).find("option:selected"),c=a(I.accessories.included+" .active").find("input"),d=a(I.accessories.price).find("input").val(),e=!_.isEmpty(b)&&!_.isEmpty(b.val()),f=!_.isEmpty(c)&&!_.isEmpty(c.val()),g=!_.isEmpty(d)&&!isNaN(d)&&d>0;if($type=a(I.accessories.type),e===!1?($type.addClass("has-error"),$type.find(".error-field").empty().append("Select an accessory")):($type.removeClass("has-error"),$type.find(".error-field").empty()),$included=a(I.accessories.included),f===!1?($included.addClass("has-error"),$included.find(".error-field").empty().append("Is included in purchase price?")):($included.removeClass("has-error"),$included.find(".error-field").empty()),$price=a(I.accessories.price),g===!1?($price.addClass("has-error"),$price.find(".error-field").empty().append("Enter the accessory purchase price")):($price.removeClass("has-error"),$included.find(".error-field").empty()),e===!0&&f===!0){var h=b.val();if(b=h.substring(3).replace(/^\s+|\s+$/gm,""),position=String(h.substring(0,2)),c="Y"==c.val(),d=""===d||isNaN(d)?!1:d,c===!0||d!==!1){for(var i=!1,j=0;j<M.length;j++)M[j].code==b&&(i={position:position,included:c,price:d,info:M[j]},j=M.length+1);if(i!==!1){if(c===!1){var k=Math.ceil(i.info.standard*(i.info.min/100)),l=Math.floor(i.info.standard*(i.info.max/100));if(Number(d)<k||Number(d)>l)return $price.addClass("has-error"),$price.find(".error-field").empty().append("Please enter a value between $"+k+" and $"+l),!1}return i}}}return!1}function m(b){for(var c=a("<ul/>"),d=0;d<b.length;d++){var e=b[d],f="tmp_fact_"+d+"_chk",g="tmp_quote_opts_opt"+("0"+d).slice(-2),h=a("<input/>",{type:"checkbox",name:g,id:f,value:e.code});-1!==_.indexOf(O.factory,f)&&h.attr("checked",!0),c.append(a("<li/>").append(a("<div/>").addClass("checkbox").append(h).append(a("<label/>").attr("for",f).append(C(e.label)))))}return c.html()}function n(b){function c(a){for(var b=0;b<O.accessories.length;b++)if(a==O.accessories[b].info.code)return!0;return!1}var d=a("<select/>"),e=[];e.push(a("<option/>",{text:"please choose...",value:""}));for(var f=0;f<b.length;f++){var g=b[f],h=a("<option/>",{text:g.label,value:("0"+f).slice(-2)+"_"+String(g.code).replace("/","/ ")});c(g.code)||e.push(h)}for(var i=0;i<e.length;i++)d.append(e[i]);return d.html()}function o(b){for(var c=a("<ul/>"),d=0;d<b.length;d++){var e=b[d];c.append(a("<li/>",{text:C(e.label)}))}return c.html()}function p(){for(var b=a("<ul/>"),c=0;c<O.accessories.length;c++)b.append(j(O.accessories[c]));return b.html()}function q(a){for(var b=0;b<M.length;b++)if(M[b].code===a)return M[b];return!1}function r(a){return L.options.hasOwnProperty(a)?L.options[a]:!1}function s(){a(I.factory.inputs).empty(),a(I.factory.saveditems).empty(),a(I.accessories.inputs).empty(),a(I.accessories.saveditems).empty();var b=N.factory,c=N.accessories;if(!_.isUndefined(b)&&!_.isEmpty(b))for(var d in b.opts)if(b.opts.hasOwnProperty(d)){var e=String(parseInt(d.substring(3),10)),f="tmp_fact_"+e+"_chk",g=r(e);g.position=("0"+e).slice(-2),g!==!1&&(O.factory.push("tmp_fact_"+e+"_chk"),a(I.factory.inputs).append(z({id:f.slice(4),name:"quote_opts_opt"+("0"+e).slice(-2),value:g.code})),v({type:"factory",item:g}))}if(!_.isUndefined(c)&&!_.isEmpty(c))for(var h in c.accs)if(c.accs.hasOwnProperty(h)){var i=c.accs[h],j={included:"Y"===i.inc,position:h.substring(3),price:i.hasOwnProperty("prc")?String(i.prc):!1,info:q(i.sel)};O.accessories.push(j),y(j)}B({type:"factory"}),B({type:"accessories"})}function t(b){if(a(".saved-item-"+b.type+"-"+b.position).remove(),"factory"==b.type){for(var c=0;c<O.factory.length;c++)O.factory[c]=="tmp_fact_"+parseInt(b.position,10)+"_chk"&&O.factory.splice(c,1);_.isEmpty(O.factory)&&B({type:"factory"})}else{for(var d=0;d<O.accessories.length;d++)O.accessories[d].info.code==b.code&&O.accessories.splice(d,1);_.isEmpty(O.accessories)&&B({type:"accessories"})}}function u(b){var c=a("<li/>").addClass("saved-item-"+b.type+"-"+("0"+b.position).slice(-2)).data("info",b).append(a("<span/>").append(b.label)).append(a("<a/>",{title:"remove "+("factory"==b.type?"factory option":"accessory")}).addClass("icon-cross").on("click",_.bind(t,this,b)));return _.isNull(b.price)||c.append(a("<span/>").append(b.price===!1?"included":"$"+b.price)),c}function v(b){var c={type:b.type,position:"",label:"",price:null,code:"",item:null};"accessories"==b.type?(c.position=b.item.position,c.label=b.item.info.label,c.price=b.item.price,c.code=b.item.info.code,c.item=b.item,a(I.accessories.saveditems).append(u(c))):(c.position=b.item.position,c.label=b.item.label,c.code=b.item.code,c.item=b.item,a(I.factory.saveditems).append(u(c)))}function w(){P===!1?(O.factory=[],O.accessories=[],O.accessories=[],a(I.factory.inputs).empty(),a(I.factory.saveditems).empty(),a(I.accessories.inputs).empty(),a(I.accessories.saveditems).empty(),B({type:"factory"}),B({type:"accessories"}),b()):(P=!1,b(s))}function x(b){O[b.type]=[],a(I[b.type].inputs).empty(),a(I[b.type].saveditems).empty(),"accessories"==b.type?a(I[b.type].addeditems).find("li").each(function(){var b=a(this).data("info");O.accessories.push(b),y(b)}):a(I[b.type].checkboxes).find(":checked").each(function(){var b=a(this);O.factory.push(b.attr("id"));var c=b.attr("name").slice(4),d=b.attr("id").slice(4),e=d.split("_")[1],f=r(e);f.position=("0"+e).slice(-2),a(I.factory.inputs).append(z({id:d,name:c,value:b.val()}).addClass("saved-item-factory-"+("0"+f.position).slice(-2))),v({type:"factory",item:f})}),F.modules.dialogs.close(K[b.type])}function y(b){a(I.accessories.inputs).append(z({name:"quote_accs_acc"+b.position+"_sel",id:"acc_"+b.position+"_chk",value:b.info.code}).addClass("saved-item-accessories-"+("0"+b.position).slice(-2))).append(z({name:"quote_accs_acc"+b.position+"_inc",value:b.included===!0?"Y":"N"}).addClass("saved-item-accessories-"+("0"+b.position).slice(-2))),b.included===!1&&a(I.accessories.inputs).append(z({name:"quote_accs_acc"+b.position+"_prc",value:b.price}).addClass("saved-item-accessories-"+("0"+b.position).slice(-2))),v({type:"accessories",item:b})}function z(b){var c={type:"hidden"};return _.extend(c,b),a("<input/>",c)}function A(){_.isArray(L.options)&&L.options.length?a("#quote_vehicle_factoryOptionsFieldSet").removeClass("hidden"):a("#quote_vehicle_factoryOptionsFieldSet").addClass("hidden")}function B(b){var c=a(I[b.type].radio+" input:radio").is(":checked");_.isEmpty(O[b.type])?(a(I[b.type].button).css({display:"none"}),a(I[b.type].radio).css({display:"block"}),a(I[b.type].radio+" input:radio").prop("checked",!1).change(),c===!0&&(a(I[b.type].radio+" input:radio:last").prop("checked",!0).change(),a(I[b.type].yn).val("N"))):(a(I[b.type].radio+" input:radio").prop("checked",!1),a(I[b.type].radio+" input:radio:first").prop("checked",!0).change(),a(I[b.type].yn).val("Y"),a(I[b.type].radio).css({display:"none"}),a(I[b.type].button).css({display:"block"}))}function C(b){return a("<div />").html(b).text()}function D(a,b){b.preventDefault(),b.stopPropagation(),a.callback()}function E(){a(document).ready(function(){if("car"!==F.site.vertical)return!1;J=F.modules.performanceProfiling.isIE8(),F.messaging.subscribe(G.car.VEHICLE_CHANGED,w),M=[],_.isObject(F.site.nonStandardAccessoriesList)&&F.site.nonStandardAccessoriesList.hasOwnProperty("items")&&_.isArray(F.site.nonStandardAccessoriesList.items)&&(M=F.site.nonStandardAccessoriesList.items),_.extend(N,userOptionPreselections);for(var b=["factory","accessories"],c=0;c<b.length;c++){var d=b[c],g=a(I[d].yn).val();_.isEmpty(g)&&!_.isEmpty(N[d])&&(a(I[d].yn).val("Y"),g="Y"),_.isEmpty(g)||(a(I[d].radio+" input:radio").prop("checked",!1).change(),a(I[d].radio+" input:radio[value="+g+"]").prop("checked",!0).change())}a(I.factory.radio+" label:first").on("click",_.bind(D,this,{type:"factory",callback:e})),a(I.accessories.radio+" label:first").on("click",_.bind(D,this,{type:"accessories",callback:f})),a(I.factory.radio+" label:last").on("click",function(){a(I.factory.yn).val("N")}),a(I.accessories.radio+" label:last").on("click",function(){a(I.accessories.yn).val("N")}),a(I.factory.button).on("click",e),a(I.accessories.button).on("click",f)})}var F=window.meerkat,G=F.modules.events,H=(F.logging.info,{car:{VEHICLE_CHANGED:"VEHICLE_CHANGED"},carVehicleOptions:{UPDATED_VEHICLE_DATA:"UPDATED_VEHICLE_DATA"}}),I={factory:{radio:"#quote_vehicle_factoryOptionsRadioBtns",yn:"#quote_vehicle_factoryOptions",button:"#quote_vehicle_factoryOptionsButton",template:"#quote-factoryoptions-template",checkboxes:"#quote_vehicle_factoryOptionsDialog .quote-factory-options",inputs:"#quote_vehicle_options_inputs_container .factory:first",saveditems:"#quote_vehicle_factoryOptionsSelections .added-items ul"},accessories:{radio:"#quote_vehicle_accessoriesRadioBtns",yn:"#quote_vehicle_accessories",button:"#quote_vehicle_accessoriesButton",template:"#quote-nonstandard-accessories-template",inputs:"#quote_vehicle_options_inputs_container .accessories:first",wrapper:"#quote_vehicle_accessoriesDialog .quote-optional-accessories",type:"#quote_vehicle_accessoriesDialog .ac-type",included:"#quote_vehicle_accessoriesDialog .ac-included",price:"#quote_vehicle_accessoriesDialog .ac-price",add:"#quote_vehicle_accessoriesDialog .ac-add",clear:"#quote_vehicle_accessoriesDialog .ac-clear",addeditems:"#quote_vehicle_accessoriesDialog .quote-optional-accessories .added-items ul",saveditems:"#quote_vehicle_accessoriesSelections .added-items ul"},redbook:"#quote_vehicle_redbookCode"},J=!1,K={factory:{},accessories:{}},L={},M=[],N={},O={factory:[],accessories:[]},P=!0,Q=!1;F.modules.register("carVehicleOptions",{init:E,events:H,onVehicleChanged:w})}(jQuery),function(a){function b(b){if(z===!1){y=b;var e=a(t[b]),g=e;g.closest(".form-group").hasClass("hidden")?(g=g.closest(".form-group").prev().find("select"),r.modules.loadingAnimation.showAfter(g)):r.modules.loadingAnimation.showAfter(g);for(var h={},k=0;k<_.indexOf(w,b);k++){var l=w[k];_.indexOf(w,b)>_.indexOf(w,"bodies")&&"bodies"==l?h.body=a(t[l]).val():h[l.substring(0,l.length-1)]=a(t[l]).val()}m(e),e.attr("selectedIndex",0),e.empty().append(a("<option/>",{value:""}).append(u.resetOptionHTML)),j(b,!0),z=!0,_.defer(function(){r.modules.comms.get({url:"car/"+b+"/list.json",data:h,cache:!0,useDefaultErrorHandling:!1,numberOfAttempts:3,errorLevel:"fatal",onSuccess:function(a){return d(b,a),f(b),!0},onError:c,onComplete:function(){return z=!1,r.modules.loadingAnimation.hide(g),p(),i(b),!0}})})}}function c(b,c,d,e,f){z=!1,r.modules.loadingAnimation.hide(a(t[y]));var h=g(y);if(h!==!1){var i=a(t[h]);i.find("option:selected").prop("selected",!1)}return j(y,!1),a(t[y]).empty().append(a("<option/>",{text:u.errorInOptionHTML+y,value:""})).prop("disabled",!1).blur(),r.modules.errorHandling.error({message:"Sorry, we cannot seem to retrieve a list of "+y+" for your vehicles at this time. Please come back to us later and try again.",page:"vehicleSelection.js:getVehicleSelectorData()",errorLevel:"warning",description:"Failed to retrieve a list of "+y+": "+d,data:f}),!1}function d(a,b){e(a);for(var c=_.indexOf(w,a);c<w.length;c++)b.hasOwnProperty(w[c])&&x.hasOwnProperty(w[c])&&(x[w[c]]=b[w[c]])}function e(a){for(var b=_.isUndefined(a)?0:_.indexOf(w,a),c=b;c<w.length;c++)x[w[c]]={}}function f(c){if(x.hasOwnProperty(c)){y=c;var d=!1,e=r.modules.performanceProfiling.isIos()&&"xs"==r.modules.deviceMediaState.get();if(_.isArray(x[c])&&x[c]){var g=null;A===!0&&v.hasOwnProperty(c)&&""!==v[c]&&(g=v[c]),d=1===x[c].length,$selector=a(t[c]),$selector.empty();var k=[];k.push(a("<option/>",{text:u.pleaseChooseOptionHTML,value:""})),"makes"==c?(k.push(a("<optgroup/>",{label:"Top Makes"})),k.push(a("<optgroup/>",{label:"All Makes"}))):e&&d!==!0&&k.push(a("<optgroup/>",{label:c.charAt(0).toUpperCase()+c.slice(1)}));for(var l in x[c])if(x[c].hasOwnProperty(l)){if("function"==typeof x[c][l])continue;var o=x[c][l],p=a("<option/>",{text:o.label,value:o.code});g===!0||d!==!0&&(_.isNull(g)||g!=o.code)||(p.prop("selected",!0),g=!0),"makes"==c?o.isTopMake===!0?p.appendTo(k[1],k[2]):k[2].append(p):e&&d!==!0?k[1].append(p):k.push(p)}for(var q=0;q<k.length;q++)$selector.append(k[q]);$selector.prop("disabled",!1),$selector.is(":visible")||a(t[c+"Row"]).removeClass("hidden"),"makes"===c&&i(c),m($selector),d!==!0&&_.isNull(g)||(n($selector),$selector.blur()),j(c,!1);var w=h(c);r.messaging.publish(s.car.SELECTION_RENDERED,{type:c}),w!==!1&&(_.isArray(x[w])&&!_.isEmpty(x[w])?f(w):d===!0&&(z=!1,b(w)))}else a(t[y]).empty().append(a("<option/>",{text:u.notFoundOptionHTML,value:""}))}}function g(a){var b=_.indexOf(w,a)-1;return w.hasOwnProperty(b)?w[b]:!1}function h(a){var b=_.indexOf(w,a)+1;return w.hasOwnProperty(b)?w[b]:!1}function i(b){var c=_.indexOf(w,b);if(c>-1)for(var d=0;d<w.length;d++)if(t.hasOwnProperty(w[d])){var e=a(t[w[d]]);d>c&&(e.attr("selectedIndex",0),e.empty().append(a("<option/>",{value:""}).append(u.resetOptionHTML)),m(e),e.prop("disabled",!0),1===c&&(a(t.marketValue).val(""),a(t.variant).val(""),a(t.modelDes).val(""),a(t.registrationYear).val("")))}}function j(b,c){c=c||!1;for(var d=0;d<=_.indexOf(w,b);d++)a(t[w[d]]).prop("disabled",c)}function k(c){A=!1;var d=h(c.field),e=_.isEmpty(a(t[c.field]).val());e===!0&&(m(a(t[c.field])),i(c.field));var f=o("makes",a(t.makes).val());f!==!1?a(t.makeDes).val(f.label):a("span[data-source='#quote_vehicle_make']").text("");var g=o("models",a(t.models).val());g!==!1&&a(t.modelDes).val(g.label);var j=o("years",a(t.years).val());j!==!1&&a(t.registrationYear).val(j.code),e===!1&&d!==!1&&(i(d),b(d)),"types"!==c.field||_.isEmpty(a(t.types).val())||p()}function l(){for(var b=0;b<w.length;b++)w.hasOwnProperty(b)&&a(t[w[b]]).on("change",_.bind(k,this,{field:w[b]}))}function m(a){a.removeClass("has-success has-error"),a.closest(".form-group").find(".row-content").removeClass("has-success has-error").end().find(".error-field").remove()}function n(a){a.addClass("has-success"),a.closest(".form-group").find(".row-content").addClass("has-success")}function o(a,b){if(!_.isEmpty(b))for(var c=0;c<x[a].length;c++)if(b==x[a][c].code)return x[a][c];return!1}function p(){var b=a(t.types).val();if(!_.isEmpty(b)){var c=o("makes",a(t.makes).val());c!==!1&&a(t.makeDes).val(c.label);var d=o("models",a(t.models).val());d!==!1&&a(t.modelDes).val(d.label);var e=o("years",a(t.years).val());e!==!1&&a(t.registrationYear).val(e.code);var f=o("types",b);f!==!1&&(a(t.marketValue).val(f.value),a(t.variant).val(f.label)),r.messaging.publish(s.car.VEHICLE_CHANGED)}}function q(){a(document).ready(function(){if("car"!==r.site.vertical)return!1;for(var b=0;b<w.length;b++)a(t[w[b]]).attr("tabindex",b+1);e(),_.extend(v,r.site.vehicleSelectionDefaults),_.extend(x,r.site.vehicleSelectionDefaults.data),l(),f("makes"),p(),r.modules.performanceProfiling.isIE8()&&a(document).on("focus","#quote_vehicle_redbookCode",function(){var b=a(this);b.data("width",b.width()),b.width("auto"),b.data("width-auto",a(this).width()),b.width(b.data("width-auto")<b.data("width")?b.data("width"):b.data("width-auto")+15)}).on("blur","#quote_vehicle_redbookCode",function(){var b=a(this);b.width(b.data("width"))})})}var r=window.meerkat,s=(r.modules.events,r.logging.info,{car:{VEHICLE_CHANGED:"VEHICLE_CHANGED",SELECTION_RENDERED:"SELECTION_RENDERED"}}),t={makes:"#quote_vehicle_make",makeDes:"#quote_vehicle_makeDes",makesRow:"#quote_vehicle_makeRow",models:"#quote_vehicle_model",modelDes:"#quote_vehicle_modelDes",modelsRow:"#quote_vehicle_modelRow",years:"#quote_vehicle_year",registrationYear:"#quote_vehicle_registrationYear",yearsRow:"#quote_vehicle_yearRow",bodies:"#quote_vehicle_body",bodiesDes:"#quote_vehicle_bodyDes",bodiesRow:"#quote_vehicle_bodyRow",transmissions:"#quote_vehicle_trans",transmissionsRow:"#quote_vehicle_transRow",fuels:"#quote_vehicle_fuel",fuelsRow:"#quote_vehicle_fuelRow",types:"#quote_vehicle_redbookCode",typesRow:"#quote_vehicle_redbookCodeRow",marketValue:"#quote_vehicle_marketValue",variant:"#quote_vehicle_variant"},u={pleaseChooseOptionHTML:"Please choose...",resetOptionHTML:"&nbsp;",notFoundOptionHTML:"No match for above choices",errorInOptionHTML:"Error finding "},v={},w=["makes","models","years","bodies","transmissions","fuels","types"],x={},y=!1,z=!1,A=!0;r.modules.register("carVehicleSelection",{init:q,events:s})}(jQuery),function(a){function b(){var b=g.modules.utilities.returnAge(a(i.reg_dob).val(),!0),d=g.modules.utilities.returnAge(a(i.yng_dob).val(),!0),e=Math.min(b,d);20>=e?a(i.age_row).slideUp():24>=e?(a(i.age_row).slideDown(),c(["H"])):29>=e?(a(i.age_row).slideDown(),c(["H","7"])):39>=e?(a(i.age_row).slideDown(),c(["H","7","A"])):(a(i.age_row).slideDown(),c(["H","7","A","D"]))}function c(b){var c=a(i.restrict),d=c.val();c.empty();for(var e=0;e<k.length;e++){var f=k[e];if(j.hasOwnProperty(f)&&("0"===f||"3"===f||_.indexOf(b,f)>=0)){var g=j[f].clone();f===d&&g.prop("selected",!0),c.append(g)}}}function d(){var b=a(i.restrict);b.find("option").each(function(){var b=a(this),c=_.isEmpty(b.val())?0:b.val();j[c]=b.clone(),j[c].prop("selected",!1)})}function e(){var b=a(i.labels).find("input:checked");_.isEmpty(b)||("Y"===b.val()?a(i.toggle).slideDown():a(i.toggle).slideUp("fast",function(){var b=a(this);b.find(":text").val(""),b.find(":radio").prop("checked",!1).change(),a(i.yng_dob).val("").change(),b.find(".has-success").removeClass("has-success"),b.find(".has-error").removeClass("has-error"),b.find(".error-field").remove()}))}function f(){a(document).ready(function(){return"car"!==g.site.vertical?!1:(a(i.labels+" label").on("click",e),a(i.reg_dob+","+i.yng_dob).on("change",b),d(),e(),void b())})}var g=window.meerkat,h=(g.modules.events,g.logging.info,{}),i={toggle:"#quote_drivers_youngToggleArea",labels:"#quote_drivers_youngDriverRow .row-content",restrict:"#quote_options_driverOption",reg_dob:"#quote_drivers_regular_dob",yng_dob:"#quote_drivers_young_dob",age_row:"#quote_restricted_ageRow"},j={},k=["0","3","H","7","A","D"];g.modules.register("carYoungDrivers",{initCarYoungDrivers:f,events:h})}(jQuery);
//# sourceMappingURL=car.modules.cc.min.map