/*!
 * CTM-Platform v0.8.3
 * Copyright 2015 Compare The Market Pty Ltd
 * http://www.comparethemarket.com.au/
 */


!function(a,b){function c(){d(),e(),a(document).ready(function(){h.modules.journeyEngine.configure({startStepId:null,steps:_.toArray(g)})})}function d(){a(document).on("click","#reset-password",f)}function e(){h.modules.journeyProgressBar.configure([]),g={startStep:{title:"Reset Password",navigationId:"resetPassword",slideIndex:0}}}function f(){if(a("#resetPasswordForm").valid()){var b=a("#reset-password");h.modules.loadingAnimation.showInside(b,!0);var c=h.modules.comms.post({errorLevel:"warning",url:"generic/reset_password.json",data:{reset_password:a("#reset_password").val(),reset_confirm:a("#reset_confirm").val(),reset_id:h.site.resetPasswordId,transcheck:a("#transcheck").val()}}),d="We could not reset your password at this time",e=function(b){b=b||d;var c=_.template(a("#reset-fail-modal-template").html(),{message:b});h.modules.dialogs.show({title:"Reset Password Error",htmlContent:c,hashId:"forgot-password",buttons:[{label:"OK",className:"btn-secondary btn-close-dialog"}],onClose:function(){window.location.replace("retrieve_quotes.jsp")}})};c.done(function(b){if("string"==typeof b&&(b=JSON.parse(b)),"undefined"!=typeof b.result){var c=b.result;if("OK"===c){var d=_.template(a("#reset-success-modal-template").html())(),f=b.email;h.modules.dialogs.show({title:"Password Change Successful",htmlContent:d,hashId:"forgot-password",buttons:[{label:"OK",className:"btn-secondary btn-close-dialog"}],onClose:function(){window.location.replace("retrieve_quotes.jsp?email="+encodeURIComponent(f))}})}else b.message?e(b.message):e()}else e()}).fail(function(){e()}).always(function(){h.modules.loadingAnimation.hide(b)})}}var g,h=window.meerkat,i=(h.modules.events,h.logging.info,{});h.modules.register("resetpasswordComponent",{init:c,events:i})}(jQuery);
//# sourceMappingURL=resetpassword.modules.choo.min.map