/*!
 * CTM-Platform v0.8.3
 * Copyright 2015 Compare The Market Pty Ltd
 * http://www.comparethemarket.com.au/
 */


!function(a){function b(){a(document).ready(function(){return"home"!==l.site.vertical?!1:(d(),"confirmation"===l.site.pageAction?!1:(c(),("amend"===l.site.pageAction||"latest"===l.site.pageAction||"load"===l.site.pageAction||"start-again"===l.site.pageAction)&&l.modules.form.markInitialFieldsWithValue(a("#mainform")),$e=a("#calldirect-template"),void($e.length&&(templateCallDirect=_.template($e.html())))))})}function c(){}function d(){if("confirmation"===l.site.pageAction)l.modules.journeyEngine.configure(null);else{e(!1);var b=null;b=l.site.isFromBrochureSite===!0?o.startStep.navigationId:l.site.journeyStage.length&&"latest"===l.site.pageAction?o.resultsStep.navigationId:l.site.journeyStage.length&&"amend"===l.site.pageAction?o.startStep.navigationId:l.modules.emailLoadQuote.getStartStepOverride(b),a(document).ready(function(){l.modules.journeyEngine.configure({startStepId:b,steps:_.toArray(o)});var a=l.modules.transactionId.get();l.site.isNewQuote===!1?l.messaging.publish(m.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Retrieve",transactionID:parseInt(a,10)}}):l.messaging.publish(m.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Start",transactionID:parseInt(a,10)}})})}}function e(a){f(),g(),a&&l.modules.journeyProgressBar.render(!0)}function f(){var b={method:"trackQuoteForms",object:l.modules.home.getTrackingFieldsObject},c={title:"Cover Type",navigationId:"start",slideIndex:0,externalTracking:b,onInitialise:function(){var b=a(".slide-feature-emailquote");a("#home_privacyoptin").is(":checked")&&b.addClass("privacyOptinChecked"),a("#home_privacyoptin").on("change",function(){a(this).is(":checked")?b.addClass("privacyOptinChecked"):b.removeClass("privacyOptinChecked")}),l.modules.currencyField.initCurrency()}},d={title:"Occupancy",navigationId:"occupancy",slideIndex:1,tracking:{touchType:"H",touchComment:"Occupancy",includeFormData:!0},externalTracking:b,onInitialise:function(){l.modules.homeOccupancy.initHomeOccupancy(),l.modules.homeBusiness.initHomeBusiness()},onAfterEnter:function(){l.modules.contentPopulation.render(".journeyEngineSlide:eq(1) .snapshot")}},e={title:"Property Details",navigationId:"property",slideIndex:2,tracking:{touchType:"H",touchComment:"Property",includeFormData:!0},externalTracking:b,onInitialise:function(){l.modules.homePropertyDetails.initHomePropertyDetails(),l.modules.homePropertyFeatures.initHomePropertyFeatures(),l.modules.homeCoverAmounts.initHomeCoverAmounts()},onBeforeEnter:function(){l.modules.homePropertyFeatures.toggleSecurityFeatures(0),l.modules.homeCoverAmounts.toggleCoverAmountsFields(0),l.modules.homePropertyDetails.validateYearBuilt()},onAfterEnter:function(){l.modules.contentPopulation.render(".journeyEngineSlide:eq(2) .snapshot")}},f={title:"Policy Holder",navigationId:"policyHolder",slideIndex:k()?4:3,tracking:{touchType:"H",touchComment:"PolicyHolder",includeFormData:!0},externalTracking:b,onInitialise:function(){k()&&l.modules.homeResults.initPage(),l.modules.homePolicyHolder.initHomePolicyHolder()},onBeforeEnter:function(){l.modules.homePolicyHolder.togglePolicyHolderFields()},onAfterEnter:function(){l.modules.contentPopulation.render(".journeyEngineSlide:eq("+(k()?"4":"3")+") .snapshot")}},g={title:"Cover",navigationId:"history",slideIndex:k()?3:4,tracking:{touchType:"H",touchComment:"History",includeFormData:!0},externalTracking:b,onInitialise:function(){k()||l.modules.homeResults.initPage(),l.modules.homeHistory.initHomeHistory()},onAfterEnter:function(){l.modules.contentPopulation.render(".journeyEngineSlide:eq("+(k()?"3":"4")+") .snapshot")}},h={title:"Results",navigationId:"results",slideIndex:5,externalTracking:b,onInitialise:function(){l.modules.homeMoreInfo.initMoreInfo(),l.modules.homeEditDetails.initEditDetails(),l.modules.homeFilters.initHomeFilters()},onBeforeEnter:function(){l.modules.journeyProgressBar.hide(),a("#resultsPage").addClass("hidden"),l.modules.homeFilters.updateFilters()},onAfterEnter:function(a){a.isForward===!0&&l.modules.homeResults.get(),l.modules.homeFilters.show()},onBeforeLeave:function(a){a.isBackward===!0&&l.modules.transactionId.getNew(3)},onAfterLeave:function(){l.modules.journeyProgressBar.show(),l.modules.homeFilters.hide(),l.modules.homeEditDetails.hide()}};o={startStep:c,occupancyStep:d,propertyStep:e,policyHoldersStep:f,historyStep:g,resultsStep:h}}function g(){for(var a=_.keys(o),b=new Array(a.length-1),c=0;c<a.length-1;c++)b[o[a[c]].slideIndex]={label:o[a[c]].title,navigationId:o[a[c]].navigationId};l.modules.journeyProgressBar.configure(b)}function h(){return a("#home_coverType").val()||null}function i(b){try{b=b||!1;var c=a("#home_property_address_postCode").val(),d=a("#home_property_address_state").val(),e=a("#home_startDate").val(),f=a("#home_policyHolder_dob").val();f.length>4&&(f=f.substring(f.length-4));var g=a("input[name=home_occupancy_ownProperty]:checked").val(),h=a("input[name=home_occupancy_principalResidence]:checked").val(),i=a("#home_coverAmounts_rebuildCost").val(),m=a("#home_coverAmounts_replaceContentsCost").val();switch(j()){case"H":m=null;break;case"C":i=null}var n=a("#home_policyHolder_email").val(),o=null,p=a("input[name=home_policyHolder_marketing]:checked").val(),q="MR"==a("#home_policyHolder_title").val()?"Male":"Female";""===a("#home_policyHolder_title").val()&&(q=null),_.isUndefined(p)||(o=p);var r=null,s=a("input[name=home_policyHolder_oktocall]:checked").val();_.isUndefined(s)||(r=s);var t=l.modules.transactionId.get(),u=l.modules.journeyEngine.getCurrentStepIndex(),v=l.modules.journeyEngine.getFurtherestStepIndex(),w="";switch(u){case 0:w="Cover";break;case 1:w="Occupancy";break;case 2:w="Property";break;case 3:w=k()?"History":"PolicyHolder";break;case 4:w=k()?"PolicyHolder":"History";break;case 5:w=b===!0?"MoreInfo":"Results"}var x={vertical:"Home_Contents",actionStep:w,transactionID:t,quoteReferenceNumber:t,yearOfBirth:null,postCode:null,state:null,email:null,emailID:null,marketOptIn:null,okToCall:null,verticalFilter:null,ownProperty:null,principalResidence:null,replaceContentsCost:null,rebuildCost:null};return v>l.modules.journeyEngine.getStepIndex("start")&&_.extend(x,{commencementDate:e,postCode:c,state:d,verticalFilter:l.modules.home.getVerticalFilter()}),v>l.modules.journeyEngine.getStepIndex("occupancy")&&_.extend(x,{ownProperty:g,principalResidence:h}),v>l.modules.journeyEngine.getStepIndex("property")&&_.extend(x,{replaceContentsCost:m,rebuildCost:i}),v>l.modules.journeyEngine.getStepIndex("policyHolder")&&_.extend(x,{yearOfBirth:f,email:n,marketOptIn:o,okToCall:r,gender:q}),x}catch(y){return!1}}function j(){var b=a("#home_coverType").val();switch(b){case"Home Cover Only":return"H";case"Contents Cover Only":return"C";case"Home & Contents Cover":return"HC"}return""}function k(){return _.indexOf(["34","35"],l.modules.splitTest.get())>=0}var l=window.meerkat,m=l.modules.events,n=(l.logging.info,{home:{},WEBAPP_LOCK:"WEBAPP_LOCK",WEBAPP_UNLOCK:"WEBAPP_UNLOCK"}),o=null;l.modules.register("home",{init:b,events:n,initProgressBar:e,getCoverType:j,getTrackingFieldsObject:i,getVerticalFilter:h})}(jQuery),function(a){function b(b){var c=a("#"+k.name+"_businessType").find("option:selected").text().toLowerCase();"home office"==c||"surgery/consulting rooms"==c?(a(k.businessRooms+", "+k.employees).slideDown(b),a(k.dayCareChildren+", "+k.registeredDayCare).slideUp(b),d()):"day care"==c?(a(k.dayCareChildren+", "+k.registeredDayCare).slideDown(b),a(k.businessRooms+", "+k.employees+", "+k.employeeAmount).slideUp(b)):a(k.businessRooms+", "+k.employees+", "+k.employeeAmount+", "+k.dayCareChildren+", "+k.registeredDayCare).slideUp(b)}function c(c){"Y"==a("input[name="+k.name+"_conducted]:checked").val()?(a(k.businessType).slideDown(c),b(c)):e(c)}function d(b){"Y"==a("input[name="+k.name+"_employees]:checked").val()?a(k.employeeAmount).slideDown(b):a(k.employeeAmount).slideUp(b)}function e(b){a(k.businessType+", "+k.businessRooms+", "+k.employees+", "+k.employeeAmount+", "+k.dayCareChildren+", "+k.registeredDayCare).slideUp(b)}function f(){a(document).ready(function(){a("input[name="+k.name+"_conducted]").on("change",function(){c()}),a("#"+k.name+"_businessType").on("change",function(){b()}),a("input[name="+k.name+"_employees]").on("change",function(){d()})})}function g(){i("[HomeBusiness] Initialised"),f(),a(document).ready(function(){b(0),d(0),c(0)})}var h=window.meerkat,i=(h.modules.events,h.logging.info),j={},k={name:"home_businessActivity",businessRooms:".businessRooms",employees:".hasEmployees",dayCareChildren:".dayCareChildren",registeredDayCare:".registeredDayCare",businessType:".businessType",employeeAmount:".employeeAmount"};h.modules.register("homeBusiness",{initHomeBusiness:g,events:j})}(jQuery),function(a){function b(){a(document).ready(function(){c.modules.commencementDate.initCommencementDate({dateField:"#home_startDate",getResults:c.modules.homeResults.get,updateData:function(a){_.extend(a,c.modules.homeEditDetails.getFormData())}})})}var c=window.meerkat;c.modules.register("homeCommencementDate",{init:b})}(jQuery),function(a){function b(b){"Y"==a("input[name="+l.abovePolicyLimitsElement+"]:checked").val()?a(l.abovePolicyLimitsAmount).slideDown(b):a(l.abovePolicyLimitsAmount).slideUp(b)}function c(b){a(l.rebuildCost+", "+l.replaceContentsCost).find('input[type="hidden"]').each(function(){var b=a(this);""!==b.val()&&b.attr("data-value",b.val()).val("")});var c=a(l.coverType).find("option:selected").val();switch(c){case"Home Cover Only":a(l.abovePolicyLimits+", "+l.replaceContentsCost+", "+l.abovePolicyLimitsAmount+", "+l.itemsAway+", "+l.unspecifiedCoverAmount+", "+l.specifiedItems+", "+l.specifyPersonalEffects).slideUp(b),a(l.rebuildCost).slideDown(b),$hidden=a(l.rebuildCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value"));break;case"Contents Cover Only":a(l.rebuildCost).slideUp(b),a(l.replaceContentsCost+", "+l.abovePolicyLimits+", "+l.itemsAway+", "+l.specifyPersonalEffects).slideDown(b),$hidden=a(l.replaceContentsCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value"));break;case"Home & Contents Cover":a(l.rebuildCost+", "+l.replaceContentsCost+", "+l.abovePolicyLimits+", "+l.itemsAway+", "+l.specifyPersonalEffects).slideDown(b),$hidden=a(l.rebuildCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value")),$hidden=a(l.replaceContentsCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value"))}e(b)}function d(){var b=Number(a(l.bicycle).val()),c=Number(a(l.musical).val()),d=Number(a(l.clothing).val()),e=Number(a(l.jewellery).val()),f=Number(a(l.sporting).val()),g=Number(a(l.photo).val()),h=b+c+d+e+f+g;a(l.coverTotal).val(h).trigger("blur")}function e(b){var c=a(l.coverType).find("option:selected").val(),d=i.modules.homeOccupancy.isPrincipalResidence();"Y"==a("input[name="+l.itemsAwayElement+"]:checked").val()?(a(l.unspecifiedCoverAmount+", "+l.specifyPersonalEffects).slideDown(b),"Y"==a("input[name="+l.specifyPersonalEffectsElement+"]:checked").val()?a(l.specifiedItems).slideDown(b):a(l.specifiedItems).slideUp(b)):f(b),d&&-1!=a.inArray(c,["Home & Contents Cover","Contents Cover Only"])?a(l.itemsAway).slideDown(b):(a(l.itemsAway).slideUp(b),f(b))}function f(b){a(l.unspecifiedCoverAmount+", "+l.specifyPersonalEffects+", "+l.specifiedItems).slideUp(b)}function g(){a(document).ready(function(){a("input[name="+l.abovePolicyLimitsElement+"]").on("change",function(){b()}),a("input[name="+l.itemsAwayElement+"], input[name="+l.specifyPersonalEffectsElement+"]").on("change",function(){e()}),a(l.specifiedValues+", "+l.contentsCost).on("blur",function(){d()})})}function h(){j("[HomeCoverAmounts] Initialised"),g(),a(document).ready(function(){b(0),e(0)})}var i=window.meerkat,j=(i.modules.events,i.logging.info),k={},l={abovePolicyLimitsElement:"home_coverAmounts_abovePolicyLimits",abovePolicyLimitsAmount:".abovePolicyLimitsAmount",itemsAwayElement:"home_coverAmounts_itemsAway",specifyPersonalEffectsElement:"home_coverAmounts_specifyPersonalEffects",bicycle:"#home_coverAmounts_specifiedPersonalEffects_bicycle",bicycleentry:"#home_coverAmounts_specifiedPersonalEffects_bicycleentry",musical:"#home_coverAmounts_specifiedPersonalEffects_musical",clothing:"#home_coverAmounts_specifiedPersonalEffects_clothing",jewellery:"#home_coverAmounts_specifiedPersonalEffects_jewellery",sporting:"#home_coverAmounts_specifiedPersonalEffects_sporting",photo:"#home_coverAmounts_specifiedPersonalEffects_photo",coverTotal:"#home_coverAmounts_coverTotal",principalResidence:"home_occupancy_principalResidence",specifiedItems:"#specifiedItemsRows",abovePolicyLimits:"#abovePolicyLimitsRow",rebuildCost:"#rebuildCostRow",replaceContentsCost:"#replaceContentsCostRow",unspecifiedCoverAmount:"#unspecifiedCoverAmountRow",specifyPersonalEffects:"#specifyPersonalEffectsRow",itemsAway:"#itemsAwayRow",coverType:"#home_coverType",specifiedValues:".specifiedValues",contentsCost:"#home_coverAmounts_replaceContentsCostentry"};i.modules.register("homeCoverAmounts",{initHomeCoverAmounts:h,toggleCoverAmountsFields:c,events:k})}(jQuery),function(a){function b(){d(),f()}function c(){return{coverType:a("#home_coverType").val(),icon:k.modules.homeSnapshot.getIcon(),ownsHome:a("#home_occupancy_ownProperty_Y").is(":checked"),isPrincipalResidence:a("#home_occupancy_principalResidence_Y").is(":checked"),businessActivity:a("#home_businessActivity_conducted_Y").is(":checked"),isBodyCorp:a("#home_property_bodyCorp_Y").is(":checked"),hasInternalSiren:a("#home_property_securityFeatures_internalSiren").is(":checked"),hasExternalSiren:a("#home_property_securityFeatures_externalSiren").is(":checked"),hasExternalStrobe:a("#home_property_securityFeatures_strobeLight").is(":checked"),hasBackToBase:a("#home_property_securityFeatures_backToBase").is(":checked"),isSpecifyingPersonalEffects:a("#home_coverAmounts_itemsAway_Y").is(":checked"),specifiedPersonalEffects:a("#home_coverAmounts_specifyPersonalEffects_Y").is(":checked"),bicycles:e("#home_coverAmounts_specifiedPersonalEffects_bicycleentry"),musical:e("#home_coverAmounts_specifiedPersonalEffects_musicalentry"),clothing:e("#home_coverAmounts_specifiedPersonalEffects_clothingentry"),jewellery:e("#home_coverAmounts_specifiedPersonalEffects_jewelleryentry"),sporting:e("#home_coverAmounts_specifiedPersonalEffects_sportingentry"),photography:e("#home_coverAmounts_specifiedPersonalEffects_photoentry"),hasOlderResident:a("#home_policyHolder_anyoneOlder_Y").is(":checked"),hasRetiredOver55:a("#home_policyHolder_over55_Y").is(":checked"),previousCover:a("#home_disclosures_previousInsurance_Y").is(":checked"),previousClaims:a("#home_disclosures_claims_Y").is(":checked")}}function d(){n.on("show.bs.dropdown",function(){var b=a("#edit-details-template");b.length>0&&(templateCallback=_.template(b.html()));var d=c();g(templateCallback(d))}).on("click",".dropdown-container",function(a){a.stopPropagation()})}function e(b){return $el=a(b),"$0"===$el.val()||""===$el.val()?!1:!0}function f(){k.messaging.subscribe(l.WEBAPP_LOCK,function(){h(),n.children(".activator").addClass("inactive").addClass("disabled")}),k.messaging.subscribe(l.WEBAPP_UNLOCK,function(){n.children(".activator").removeClass("inactive").removeClass("disabled")}),k.messaging.subscribe(l.device.STATE_ENTER_XS,function(){h()}),k.messaging.subscribe(l.device.STATE_LEAVE_XS,function(){h()})}function g(a){"xs"==k.modules.deviceMediaState.get()?o=i(a):j(a)}function h(){n.hasClass("open")&&n.find(".activator").dropdown("toggle").end().find(".edit-details-wrapper").empty(),null!==o&&a("#"+o).modal("hide")}function i(b){var c=k.modules.dialogs.show({htmlContent:'<div class="edit-details-wrapper"></div>',hashId:"edit-details",className:"edit-details-modal",closeOnHashChange:!0,onOpen:function(c){var d=a(".edit-details-wrapper",a("#"+c));d.html(b),k.modules.contentPopulation.render("#"+c+" .edit-details-wrapper"),a(".accordion-collapse").on("show.bs.collapse",function(){a(this).prev(".accordion-heading").addClass("active-panel")}).on("hide.bs.collapse",function(){a(this).prev(".accordion-heading").removeClass("active-panel")}),d.show()}});return c}function j(b){var c=a("#edit-details-dropdown .edit-details-wrapper");c.html(b),k.modules.contentPopulation.render("#edit-details-dropdown .edit-details-wrapper"),c.find(".accordion-collapse").addClass("in").end().show()}var k=window.meerkat,l=k.modules.events,m=(k.logging.info,{homeEditDetails:{}}),n=(m.homeEditDetails,a("#edit-details-dropdown")),o=null;k.modules.register("homeEditDetails",{initEditDetails:b,events:m,hide:h,getFormData:c})}(jQuery),function(a){function b(){c(),v.removeClass("active"),w.removeClass("active");var b=C.modules.home.getCoverType();if("undefined"!=typeof Results.settings&&Results.settings.hasOwnProperty("displayMode")===!0)switch(Results.getDisplayMode()){case"price":v.addClass("active");break;case"features":w.addClass("active")}var d=a("#home_paymentType").val();x.find(".dropdown-toggle span").text("undefined"==typeof d?x.find(".dropdown-menu a:first").text():x.find('.dropdown-menu a[data-value="'+d+'"]').text()),("H"==b||"HC"==b)&&y.find(".dropdown-toggle span").text("undefined"==typeof K.homeExcess?y.find(".dropdown-menu a:first").text():y.find('.dropdown-menu a[data-value="'+K.homeExcess+'"]').text()),("C"==b||"HC"==b)&&z.find(".dropdown-toggle span").text("undefined"==typeof K.contentsExcess?z.find(".dropdown-menu a:first").text():z.find('.dropdown-menu a[data-value="'+K.contentsExcess+'"]').text())}function c(){var a=C.modules.home.getCoverType();switch(a){case"H":return y.add(A).show(),z.add(B).add(".excess-update").hide(),void y.find("li a").addClass("updateExcess");case"C":return y.add(A).add(".excess-update").hide(),z.add(B).show(),void z.find("li a").addClass("updateExcess");case"HC":return y.add(A).add(z).add(B).add(".excess-update").show(),void z.find("li a").removeClass("updateExcess")}}function d(){var b=C.modules.home.getCoverType(),c=a("#xsFilterBarHomeExcessRow"),d=a("#xsFilterBarContentsExcessRow");switch(b){case"H":return c.show(),void d.hide();case"C":return c.hide(),void d.show();case"HC":return void c.add(d).show()}}function e(c){c.preventDefault();var d=a(c.target);if(d.hasClass("updateExcess"))f(c),b();else{var e=d.parents(".dropdown"),g=d.attr("data-value");e.find(".dropdown-toggle span").text(d.text()),d.parent().siblings().removeClass("active"),d.parent().addClass("active"),e.hasClass("filter-frequency")&&g!==K.frequency&&(K.frequency=g,a("#home_paymentType").val(K.frequency),Results.setFrequency(g),C.messaging.publish(G.CHANGED))}}function f(b){var c=C.modules.home.getCoverType();b.preventDefault();var d,e,f=a(b.target);"update"===f.text()?(d=a(".homeExcess .dropdown-toggle span").text().replace("$",""),e=a(".contentsExcess .dropdown-toggle span").text().replace("$","")):(d=f.text().replace("$",""),e=f.text().replace("$","")),d===K.homeExcess||"H"!=c&&"HC"!=c||(K.homeExcess=d,a("#home_homeExcess").val(d)),e===K.contentsExcess||"C"!=c&&"HC"!=c||(K.contentsExcess=e,a("#home_contentsExcess").val(e)),"H"==c?C.messaging.publish(G.CHANGED,{homeExcess:d}):"C"==c?C.messaging.publish(G.CHANGED,{contentsExcess:e}):C.messaging.publish(G.CHANGED,{contentsExcess:e,homeExcess:d})}function g(){K={display:Results.getDisplayMode(),frequency:a("#home_paymentType").val(),homeExcess:a("#home_homeExcess").val()||K.homeExcess,contentsExcess:a("#home_contentsExcess").val()||K.contentsExcess}}function h(){K={homeExcess:a("#home_baseHomeExcess").val(),contentsExcess:a("#home_baseContentsExcess").val()}}function i(){x.find("li.active").removeClass("active"),x.find("a[data-value="+K.frequency+"]").each(function(){a(this).parent().addClass("active")}),y.find("li.active").removeClass("active"),z.find("li.active").removeClass("active"),_.isEmpty(K.homeExcess)||y.find("a[data-value="+K.homeExcess+"]").each(function(){a(this).parent().addClass("active")}),_.isEmpty(K.contentsExcess)||z.find("a[data-value="+K.contentsExcess+"]").each(function(){a(this).parent().addClass("active")})}function j(){u.slideUp(200,function(){u.addClass("hidden")})}function k(){u.removeClass("hidden").hide().slideDown(200),g(),i()}function l(){u.find("li.dropdown, .dropdown-toggle").addClass("disabled"),v.addClass("disabled").find("a").addClass("disabled"),w.addClass("disabled").find("a").addClass("disabled"),a(".slide-feature-filters").find("a").addClass("disabled").addClass("inactive"),a(".excess-update").find("a").addClass("disabled").addClass("inactive")}function m(){C.modules.compare.isCompareOpen()===!1&&(u.find("li.dropdown.filter-excess, .filter-excess .dropdown-toggle").removeClass("disabled"),v.removeClass("disabled").find("a").removeClass("disabled"),w.removeClass("disabled").find("a").removeClass("disabled"),a(".slide-feature-filters").find("a").removeClass("inactive").removeClass("disabled"),a(".excess-update").find("a").removeClass("inactive").removeClass("disabled")),u.find("li.dropdown.filter-frequency, .filter-frequency .dropdown-toggle").removeClass("disabled")}function n(){a(document.body).on("mousewheel DOMMouseScroll onmousewheel",function(a){J&&(a.preventDefault(),a.stopPropagation())}),a(document).on("resultsFetchStart pagination.scrolling.start",function(){J=!0,l()}),a(document).on("resultsFetchFinish pagination.scrolling.end",function(){J=!1,m()}),C.messaging.subscribe(D.compare.EXIT_COMPARE,m),v.on("click",function(c){c.preventDefault(),a(this).hasClass("disabled")||(C.modules.homeResults.switchToPriceMode(!0),b(),C.modules.session.poke())}),w.on("click",function(c){c.preventDefault(),a(this).hasClass("disabled")||(C.modules.homeResults.switchToFeaturesMode(!0),b(),C.modules.session.poke())}),u.on("click",".dropdown-menu a, .excess-update a",e)}function o(){var b=_.template(a("#home-xsFilterBar-template").html()),c=a("#home_homeExcess").val(),d=a("#home_contentsExcess").val(),e=b({homeStartingValue:_.isEmpty(c)?a("#home_baseHomeExcess").val():c,contentsStartingValue:_.isEmpty(d)?a("#home_baseContentsExcess").val():d});return I=C.modules.dialogs.show({title:a(this).attr("title"),htmlContent:e,hashId:"xsFilterBar",rightBtn:{label:"Save Changes",className:"btn-sm btn-save",callback:q},closeOnHashChange:!0,onOpen:p}),!1}function p(b){"undefined"!=typeof Results.settings&&Results.settings.hasOwnProperty("displayMode")===!0&&(a("#xsFilterBarSortRow input:checked").prop("checked",!1),a("#xsFilterBarSortRow #xsFilterBar_sort_"+Results.getDisplayMode()).prop("checked",!0).change()),a("#xsFilterBarFreqRow input:checked").prop("checked",!1),a("#xsFilterBarFreqRow #xsFilterBar_freq_"+a("#home_paymentType").val()).prop("checked",!0).change(),a("input[name=xsFilterBar_homeExcess], input[name=xsFilterBar_contentsexcess]",a("#"+b)).prop("checked",!1),a("#xsFilterBar_homeExcess_"+K.homeExcess,a("#"+b)).prop("checked",!0).change(),a("#xsFilterBar_contentsexcess_"+K.contentsExcess,a("#"+b)).prop("checked",!0).change(),d()}function q(){var c=a("#home_paymentType"),d=a("#home_homeExcess"),e=a("#home_contentsExcess"),f={display:a("#xsFilterBarSortRow input:checked").val(),freq:a("#xsFilterBarFreqRow input:checked").val(),homeExcess:a("#xsFilterBarHomeExcessRow input:checked").val(),contentsExcess:a("#xsFilterBarContentsExcessRow input:checked").val()};0===Number(f.homeExcess)&&(f.homeExcess=""),0===Number(f.contentsExcess)&&(f.contentsExcess=""),c.val(f.freq),d.val(f.homeExcess),e.val(f.contentsExcess),f.display!==K.display&&("features"===f.display?C.modules.homeResults.switchToFeaturesMode(!0):"price"===f.display&&C.modules.homeResults.switchToPriceMode(!0)),C.modules.dialogs.close(I),C.modules.navMenu.close(),K.frequency!==f.freq&&(K.frequency=f.freq,Results.setFrequency(K.frequency),C.messaging.publish(G.CHANGED)),K.homeExcess!==f.homeExcess&&(K.homeExcess=f.homeExcess,C.messaging.publish(G.CHANGED,{homeExcess:f.homeExcess})),K.contentsExcess!==f.contentsExcess&&(K.contentsExcess=f.contentsExcess,C.messaging.publish(G.CHANGED,{contentsExcess:f.contentsExcess})),b()}function r(){var b=!a("#navbar-filter").hasClass("hidden");b&&H===!0&&(g(),o())}function s(a){H=_.isUndefined(a)?"xs"===C.modules.deviceMediaState.get():a.isXS===!0,H===!1&&C.modules.dialogs.isDialogOpen(I)&&C.modules.dialogs.close(I)}function t(){E("[HomeFilters] Initialised"),a(document).ready(function(){if(u=a("#navbar-filter"),u.length){v=u.find(".filter-pricemode"),w=u.find(".filter-featuresmode"),x=u.find(".filter-frequency"),y=u.find(".filter-excess.homeExcess"),z=u.find(".filter-excess.contentsExcess"),A=u.find(".filter-label.homeExcessLabel"),B=u.find(".filter-label.contentsExcessLabel"),h(),n();var b;b=y.find(".dropdown-menu"),a("#filter_homeExcessOptions option").each(function(){b.append('<li><a href="javascript:;" data-value="'+this.value+'">'+this.text+"</a></li>")}),b=z.find(".dropdown-menu"),a("#filter_contentsExcessOptions option").each(function(){b.append('<li><a href="javascript:;" data-value="'+this.value+'">'+this.text+"</a></li>")}),b=x.find(".dropdown-menu"),a("#filter_paymentType option").each(function(){b.append('<li><a href="javascript:;" data-value="'+this.value+'">'+this.text+"</a></li>")}),a("#navbar-main .slide-feature-filters a").on("click",function(b){b.preventDefault(),a(this).hasClass("disabled")||r()}),C.messaging.subscribe(D.device.STATE_ENTER_XS,_.bind(s,this,{isXS:!0})),C.messaging.subscribe(D.device.STATE_LEAVE_XS,_.bind(s,this,{isXS:!1})),s()}})}var u,v,w,x,y,z,A,B,C=window.meerkat,D=C.modules.events,E=C.logging.info,F={homeFilters:{CHANGED:"HOME_FILTERS_CHANGED"}},G=F.homeFilters,H=!1,I=!1,J=!1,K={display:!1,frequency:!1,homeExcess:!1,contentsExcess:!1};C.modules.register("homeFilters",{initHomeFilters:t,events:F,updateFilters:b,hide:j,show:k,disable:l,enable:m,onRequestModal:r,toggleXSFilters:d})}(jQuery),function(a){function b(b){"Y"==a("input[name="+g.name+"_previousInsurance]:checked").val()?a(g.atCurrentAddress+", "+g.pastInsurer+", "+g.insuranceExpiry+", "+g.insuranceCoverLength).slideDown(b):a(g.atCurrentAddress+", "+g.pastInsurer+", "+g.insuranceExpiry+", "+g.insuranceCoverLength).slideUp(b)}function c(){a("input[name="+g.name+"_previousInsurance]").on("change",function(){b()})}function d(){f("[HomeHistory] Initialised"),a(document).ready(function(){c(),b(0)})}var e=window.meerkat,f=e.logging.info,g={name:"home_disclosures",atCurrentAddress:".atCurrentAddress",pastInsurer:".pastInsurer",insuranceExpiry:".insuranceExpiry",insuranceCoverLength:".insuranceCoverLength"};e.modules.register("homeHistory",{initHomeHistory:d})}(jQuery),function(a){function b(){var b={container:H,hideAction:"fadeOut",showAction:"fadeIn",modalOptions:{className:"modal-breakpoint-wide modal-tight bridgingContainer",openOnHashChange:!1,leftBtn:{label:"All Products",icon:'<span class="icon icon-arrow-left"></span>',callback:function(b){a(b.currentTarget).closest(".modal").modal("hide")}}},runDisplayMethod:n,onBeforeShowBridgingPage:k,onBeforeShowTemplate:y,onBeforeShowModal:y,onAfterShowModal:x,onAfterShowTemplate:l,onBeforeHideTemplate:null,onAfterHideTemplate:m,onClickApplyNow:p,onBeforeApply:null,onApplySuccess:z,retrieveExternalCopy:o,additionalTrackingData:{verticalFilter:null,productName:null}};E.modules.moreInfo.initMoreInfo(b),i(),c()}function c(){a(document).on("click",".bridgingContainer .btn-call-actions",function(b){b.preventDefault(),b.stopPropagation();var c=a(this),g=a("#home-call-modal-template");g.length&&(templateCallback=_.template(g.html()));var h=E.modules.moreInfo.getOpenProduct();if("Y"===h.productAvailable){var i=templateCallback(h),j={htmlContent:i,hashId:"call",className:"call-modal "+h.brandCode,closeOnHashChange:!0,openOnHashChange:!1,onOpen:function(g){a("."+c.attr("data-callback-toggle")).show(),e(".paragraphedContent:visible",".sidebar-right",a("#"+g)),d(),c.hasClass("btn-calldirect")?f(b):s()}};"xs"==E.modules.deviceMediaState.get()&&(j.title="Reference no. "+h.leadNo),B=E.modules.dialogs.show(j)}}).on("click",".call-modal .btn-call-actions",function(b){"xs"!=E.modules.deviceMediaState.get()&&b.preventDefault(),b.stopPropagation();var c=a(this);switch(c.attr("data-callback-toggle")){case"calldirect":a(".callback").hide(),a(".calldirect").show(),f(b);break;case"callback":a(".calldirect").hide(),a(".callback").show(),s()}e(".paragraphedContent:visible",".sidebar-right",c.closest(".modal.in"))}).on("click",".btn-submit-callback",function(b){b.preventDefault();var c=a(this);if(c.closest("form").valid()){var d=E.site.tracking.brandCode.toUpperCase();g(b,{message:d+" - Home Vertical - Call me now",phonecallme:"GetaCall"}),t()}else _.delay(function(){e(".paragraphedContent:visible",".sidebar-right",c.closest(".modal.in"))},200);return!1})}function d(){setupDefaultValidationOnForm(a("#getcallback"));{var b=a("#home_CrClientName"),c=a("#home_policyHolder_firstName"),d=a("#home_policyHolder_lastName");c.length,d.length}(c.length&&""!==c.val()||d.length&&""!==d.val())&&b.val(a.trim(c.val()+" "+d.val()));var e=a("#home_CrClientTelinput");e.length&&!e.val().length&&e.val(a("#home_policyHolder_phone").val()),e.attr("data-msg-required","Please enter your contact number")}function e(b,c,d){if("xs"!=E.modules.deviceMediaState.get()&&a(c,d).length){var e=a(b,d).outerHeight(),f=a(c,d).outerHeight();e>=f?(a(c,d).css("min-height",e+"px"),a(b,d).css("min-height",e+"px")):(a(c,d).css("min-height",f+"px"),a(b,d).css("min-height",f+"px"))}}function f(a){r();var b=E.modules.moreInfo.getOpenProduct();if("undefined"==typeof I[b.productId]){var c=E.site.tracking.brandCode.toUpperCase();return g(a,{message:c+" - Home Vertical - Call direct",phonecallme:"CallDirect"})}}function g(b,c){var d=E.modules.moreInfo.getOpenProduct();"undefined"!=typeof d&&null!==d&&"undefined"!=typeof d.vdn&&!_.isEmpty(d.vdn)&&d.vdn>0&&(c.vdn=d.vdn);var e=a("#home_property_address_state").val(),f=(E.site.tracking.brandCode.toUpperCase(),""),g="",h=a("#home_CrClientName"),i=h.length?h.val():"",j=a("#home_policyHolder_firstName").val(),k=a("#home_policyHolder_lastName").val(),l=a("#home_CrClientTelinput"),m=l.length?l.val():"",n=a("#home_policyHolder_phone").val();""!==i?f=i:(""!==j||""!==k)&&(f=a.trim(j+" "+k)),""!==m?g=m:""!==n&&(g=n);var o={state:e,brand:d.productId.split("-")[0],productId:d.productId,clientNumber:d.leadNo,clientName:f,phoneNumber:g,partnerReference:E.modules.transactionId.get()},p=a.extend(o,c),q=a(b.target);return E.modules.loadingAnimation.showInside(q,!0),E.modules.comms.post({url:"leadfeed/homecontents/getacall.json",data:p,dataType:"json",cache:!1,errorLevel:"GetaCall"===c.phonecallme?"warning":"silent",onSuccess:function(){if("GetaCall"==c.phonecallme){E.modules.dialogs.show({title:"Call back request recorded",htmlContent:"<p><strong>Thank you!</strong></p><p>Your Call request has been sent to the insurer's message centre who will be in touch as soon as possible.</p>",hashId:"call-back-success",openOnHashChange:!1,closeOnHashChange:!0,onClose:function(){a(".modal").modal("hide"),E.modules.moreInfo.isBridgingPageOpen()&&E.modules.moreInfo.close()}})}},onComplete:function(){"CallDirect"==c.phonecallme&&(I[d.productId]=!0),E.modules.loadingAnimation.hide(q)}})}function h(){var b=a(".quote-summary-table");b.find("tbody tr").remove();var c="",d=function(a,b){b=b.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");var d=["<tr>","<td>",a,"</td>",'<td class="cover-amount">',"$<span>",b,"</span>","</td>","</tr>"].join("");c+=d},e=E.modules.home.getCoverType();if("H"==e||"HC"==e){var f=parseInt(a("#home_coverAmounts_rebuildCost").val());d("Home Cover",f)}if("C"==e||"HC"==e){var g=parseInt(a("#home_coverAmounts_replaceContentsCost").val());if(d("Contents Cover",g),"Y"==a(".itemsAway :checked").val()){var h=parseInt(a("#home_coverAmounts_unspecifiedCoverAmount").val());"Y"==a(".specifyPersonalEffects :checked").val()&&a('.specifiedItems input[type="hidden"]').each(function(){var a=this.value||0;h+=parseInt(a)}),d("Personal Effects",h)}}b.append(c)}function i(){E.messaging.subscribe(F.ADDRESS_CHANGE,function(a){"xs"!=E.modules.deviceMediaState.get()&&-1==a.hash.indexOf("results/moreinfo")&&E.modules.moreInfo.hideTemplate(H)}),E.messaging.subscribe(F.device.STATE_ENTER_XS,function(){E.modules.moreInfo.isBridgingPageOpen()&&E.modules.moreInfo.close(),"undefined"!=typeof B&&a("#"+B).modal("hide")
}),E.messaging.subscribe(F.device.STATE_LEAVE_XS,function(){E.modules.moreInfo.isModalOpen()&&E.modules.moreInfo.close(),"undefined"!=typeof B&&a("#"+B).modal("hide")}),E.messaging.subscribe(F.errorHandling.OK_CLICKED,function(){(E.modules.moreInfo.isBridgingPageOpen()||E.modules.moreInfo.isModalOpen())&&E.modules.moreInfo.close()}),E.messaging.subscribe(F.transactionId.CHANGED,function(){L=!0})}function j(){D=a(window).scrollTop()}function k(){j(),"xs"!=E.modules.deviceMediaState.get()&&a(".resultsContainer, #navbar-compare, #navbar-filter").hide()}function l(){x(),("lg"==E.modules.deviceMediaState.get()||"md"==E.modules.deviceMediaState.get())&&e(".paragraphedContent",".moreInfoRightColumn",H)}function m(){a(".resultsContainer, #navbar-filter, #navbar-compare").show(),a(window).scrollTop(D)}function n(){"xs"!=E.modules.deviceMediaState.get()?E.modules.moreInfo.showTemplate(H):E.modules.moreInfo.showModal(),E.modules.address.appendToHash("moreinfo")}function o(a){return w(),E.modules.comms.get({url:"ajax/json/get_scrapes.jsp",cache:!0,data:{type:"homeBrandScrapes",code:a.productId,group:"home"},errorLevel:"silent",onSuccess:function(a){E.modules.moreInfo.setDataResult(a)}})}function p(b,c){if(K===!0&&J.length){var d=a("#special-conditions-template");d.length&&(templateCallback=_.template(d.html()));var e=E.modules.moreInfo.getOpenProduct();e.specialConditionsRule=J;{var f=templateCallback(e);E.modules.dialogs.show({htmlContent:f,hashId:"special-conditions",title:"Special Conditions Confirmation",closeOnHashChange:!0,openOnHashChange:!1,onOpen:function(d){a(".btn-proceed-to-insurer",a("#"+d)).off("click.proceed").on("click.proceed",function(a){return a.preventDefault(),q(b,d,c)}),a(".btn-back",a("#"+d)).off("click.goback").on("click.goback",function(){a(".modal").modal("hide"),E.modules.moreInfo.isBridgingPageOpen()&&E.modules.moreInfo.close()})},onClose:function(){E.modules.moreInfo.applyCallback(!1)}})}return!1}return q(b,!1,c)}function q(b,c,d){if(c&&a("#"+c).modal("hide"),B&&a("#"+B).modal("hide"),_.isEmpty(b.quoteUrl))return E.modules.errorHandling.error({errorLevel:"warning",message:"An error occurred. Sorry about that!<br /><br /> To purchase this policy, please contact the provider "+(""!==b.telNo?" on "+b.telNo:"directly")+" quoting "+b.leadNo+", or select another policy.",page:"homeMoreInfo.js:proceedToInsurer",description:"Insurer did not provide quoteUrl in results object.",data:b}),!1;var e=b.leadfeedinfo.split("||"),f=!1;return _.isEmpty(e[0])||(f={data:{vertical:"homecontents",phonecallme:"NoSaleCall",productId:b.productId,clientName:e[0],phoneNumber:e[1],clientNumber:b.leadNo,partnerReference:E.modules.transactionId.get(),brand:b.productId.split("-")[0],state:a("#home_property_address_state").val()},settings:{errorLevel:"silent"}}),E.modules.partnerTransfer.transferToPartner({encodeTransferURL:!0,product:b,applyNowCallback:d,productName:b.headline.name,productBrandCode:b.brandCode,brand:b.productDes,verticalFilter:E.modules.home.getVerticalFilter(),productID:b.trackingProductId,noSaleLead:f}),!0}function r(){L===!0&&(L=!1,u("CrCallDir"))}function s(){u("CrCallBac")}function t(){u("CrCallBacSub")}function u(a){var b=E.modules.moreInfo.getOpenProduct();E.modules.partnerTransfer.trackHandoverEvent({product:b,type:a,quoteReferenceNumber:b.leadNo,transactionID:E.modules.transactionId.get(),productID:b.productId,productName:b.headline.name,verticalFilter:E.modules.home.getVerticalFilter(),productBrandCode:b.brandCode},!1)}function v(){E.messaging.publish(F.tracking.EXTERNAL,{method:"trackQuoteForms",object:_.bind(E.modules.home.getTrackingFieldsObject,this,!0)})}function w(){var a=E.modules.home.getCoverType();switch(a){case"H":return void(C="home");case"C":return void(C="contents");case"HC":return void(C="homeandcontents")}}function x(){var a=E.modules.moreInfo.getOpenProduct(),b={additionalTrackingData:{verticalFilter:E.modules.home.getVerticalFilter(),productName:a.headline.name,productID:a.trackingProductId}};E.modules.moreInfo.updateSettings(b),v()}function y(b){h(),"undefined"!=typeof b&&"undefined"!=typeof b.scrapes&&b.scrapes.length&&a.each(b.scrapes,function(b,c){""!==c.html&&-1!=c.cssSelector.indexOf(C)&&a(c.cssSelector.replace("-"+C,"")).html(c.html)}),a(".contentRow li").each(function(){a(this).prepend('<span class="icon icon-angle-right"></span>')})}function z(){}function A(a,b){K=a,J=b}var B,C,D,E=window.meerkat,F=E.modules.events,G={homeMoreInfo:{}},H=(G.homeMoreInfo,a(".bridgingContainer")),I={},J="",K=!1,L=!0;E.modules.register("homeMoreInfo",{initMoreInfo:b,events:G,setSpecialConditionDetail:A,runDisplayMethod:n,setScrollPosition:j})}(jQuery),function(a){function b(){return"Y"==a("input:radio[name="+m.principalResidence+"]:checked").val()?!0:"N"==a("input:radio[name="+m.principalResidence+"]:checked").val()?!1:null}function c(c){{var e=a("input:radio[name="+m.ownProperty+"]:checked").val(),f=(a(m.howOccupied).find("option:selected").val(),b());a(m.howOccupied)}null!==f&&(f||"undefined"!=typeof e&&"N"!=e)?f?(a(m.howOccupiedRow).slideUp(c),a(m.whenMovedInYearRow).slideDown(c),d(c)):(a(m.howOccupiedRow).slideDown(c),a(m.whenMovedInYearRow+", "+m.whenMovedInMonthRow).slideUp(c)):(a(m.howOccupiedRow).slideUp(c),a(m.whenMovedInYearRow+", "+m.whenMovedInMonthRow).slideUp(c))}function d(b){var c=a('select[name="'+m.whenMovedInYear+'"]').val(),d=a("#"+m.whenMovedInMonth),e=12;if(c==k&&(e=l),c>=k-2){a(m.whenMovedInMonthRow).slideDown(b),d.find("option").show();for(var f=12;f>e;f--)d.find("[value="+f+"]").hide()}else a(m.whenMovedInMonthRow).slideUp(b)}function e(){a(document).ready(function(){a("#"+m.whenMovedInYear).on("change",function(){d()}),a("input[name="+m.name+"_ownProperty], "+m.howOccupied).on("change",function(){c()}),a("input[name="+m.principalResidence+"]").on("change",function(){c()})})}function f(){h("[HomeOccupancy] Initialised"),e(),a(document).ready(function(){c(0)})}var g=window.meerkat,h=(g.modules.events,g.logging.info),i={},j=new Date,k=j.getFullYear(),l=j.getMonth()+1,m={name:"home_occupancy",ownProperty:"home_occupancy_ownProperty",principalResidence:"home_occupancy_principalResidence",whenMovedInYear:"home_occupancy_whenMovedIn_year",whenMovedInMonth:"home_occupancy_whenMovedIn_month",howOccupied:"#home_occupancy_howOccupied",whenMovedInYearRow:".whenMovedInYear",whenMovedInMonthRow:".whenMovedInMonth",howOccupiedRow:".howOccupied"};g.modules.register("homeOccupancy",{initHomeOccupancy:f,events:i,isPrincipalResidence:b})}(jQuery),function(a){function b(b){var c=i.modules.homeOccupancy.isPrincipalResidence();"Y"==a("input[name="+l.anyoneOlder+"]:checked").val()&&c?a(l.oldestDOBRow).slideDown(b):a(l.oldestDOBRow).slideUp(b),d(b)}function c(c){var e=i.modules.homeOccupancy.isPrincipalResidence();e?(a(l.anyoneOlderRow+", "+l.otherOccupantsRow).slideDown(c),b(c),d(c)):a(l.anyoneOlderRow+", "+l.over55+", "+l.oldestDOBRow+", "+l.otherOccupantsRow).slideUp(c)}function d(b){var c=i.modules.homeOccupancy.isPrincipalResidence(),d=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,g=a("#"+l.name+"_dob"),h=a("#"+l.name+"_jointDob"),j=a("input[name="+l.anyoneOlder+"]:checked").val();c&&(g.val().match(d)&&e(g.val())>=55||h.val().match(d)&&e(h.val())>=55||"Y"===j&&l.oldestPersonDob.val().match(d)&&e(l.oldestPersonDob.val())>=55)?a(l.over55).slideDown(b,function(){f()}):a(l.over55).slideUp(b,function(){f()})}function e(a){var b=new Date,c=a.split("/").reverse(),d=b.getFullYear()-parseInt(c[0],10),e=b.getMonth()+1-parseInt(c[1],10);return(0>e||0===e&&b.getDate()<parseInt(c[2],10))&&d--,d}function f(){l.oldestPersonDob.trigger("blur")}function g(){a(document).ready(function(){a("input[name="+l.anyoneOlder+"]").on("change",function(){b()}),a("#"+l.name+"_dob, #"+l.name+"_jointDob").add(l.oldestPersonDob).on("change",function(){b(),d()}),l.toggleJointPolicyHolder.on("click",function(){l.jointPolicyHolder.is(":visible")?(l.jointPolicyHolder.slideUp(400,function(){f()}),l.addPolicyHolderBtn.slideDown()):(l.jointPolicyHolder.slideDown(400,function(){f()}),l.addPolicyHolderBtn.slideUp()),d()})})}function h(){j("[HomePolicyHolder] Initialised"),g(),a(document).ready(function(){c(0),b(0),d(0),l.jointPolicyHolder.hide(),(""!==a("#home_policyHolder_jointFirstName").val()||""!==a("#home_policyHolder_jointLastName").val()||""!==a("#home_policyHolder_jointDob").val()||""!==a("#home_policyHolder_jointDob").val())&&l.toggleJointPolicyHolder.click()})}var i=window.meerkat,j=(i.modules.events,i.logging.info),k={},l={name:"home_policyHolder",anyoneOlder:"home_policyHolder_anyoneOlder",oldestDOBRow:"#oldest_person_DOB",anyoneOlderRow:"#anyoneOlder",principalResidence:"home_occupancy_principalResidence",over55:".over55",otherOccupantsRow:"#home_policyHolder_other_occupants",toggleJointPolicyHolder:a(".toggleJointPolicyHolder"),jointPolicyHolder:a("#jointPolicyHolder"),addPolicyHolderBtn:a(".addPolicyHolderBtn"),oldestPersonDob:a("#home_policyHolder_oldestPersonDob")};i.modules.register("homePolicyHolder",{initHomePolicyHolder:h,togglePolicyHolderFields:c,events:k})}(jQuery),function(a){function b(){a("#"+j.yearBuilt).blur()}function c(b){"other"==a("#"+j.propertyType).find("option:selected").text().toLowerCase()?a(j.bestDescribesHome).slideDown(b):a(j.bestDescribesHome).slideUp(b)}function d(b){parseInt(a("#"+j.yearBuilt).find("option:selected").val())<=1914?a(j.heritage).slideDown(b):a(j.heritage).slideUp(b)}function e(){a(document).ready(function(){a("#"+j.propertyType).on("change",function(){c()}),a("#"+j.yearBuilt).on("change",function(){d()})})}function f(){h("[HomeProperties] Initialised"),e(),a(document).ready(function(){c(0),d(0)})}var g=window.meerkat,h=(g.modules.events,g.logging.info),i={},j={name:"home_property",propertyType:"home_property_propertyType",yearBuilt:"home_property_yearBuilt",bestDescribesHome:".bestDescribesHome",heritage:".heritage"};g.modules.register("homePropertyDetails",{initHomePropertyDetails:f,events:i,validateYearBuilt:b})}(jQuery),function(a){function b(b){var c=a(g.coverType).find("option:selected").val();switch(c){case"Contents Cover Only":case"Home & Contents Cover":a(g.name).slideDown(b);break;default:a(g.name).slideUp(b)}}function c(){e("[HomePropertiesFeatures] Initialised"),a(document).ready(function(){b(0)})}var d=window.meerkat,e=(d.modules.events,d.logging.info),f={},g={name:"#home_property",coverType:"#home_coverType"};d.modules.register("homePropertyFeatures",{initHomePropertyFeatures:c,toggleSecurityFeatures:b,events:f})}(jQuery),function(a){function b(){v=a("#resultsPage"),d(),Features.init(),x.modules.compare.initCompare(),e(),g()}function c(){g(),w!==x.modules.deviceMediaState.get()&&(Results.view.calculateResultsContainerWidth(),Features.clearSetHeights(),Features.balanceVisibleRowsHeight()),Results.pagination.refresh()}function d(){try{var a="price";"undefined"!=typeof x.site&&"undefined"!=typeof x.site.resultOptions&&(a="features"==x.site.resultOptions.displayMode?"features":"price"),Results.init({url:"ajax/json/home/results.jsp",runShowResultsPage:!1,paths:{price:{annual:"price.annual.total",monthly:"price.monthly.total"},availability:{product:"productAvailable"},productId:"productId",productBrandCode:"brandCode",productName:"headline.name"},show:{savings:!1,featuresCategories:!1,nonAvailableProducts:!1,unavailableCombined:!0},availability:{product:["equals","Y"]},render:{templateEngine:"_",features:{mode:"populate",headers:!1,numberOfXSColumns:1},dockCompareBar:!1},displayMode:a,pagination:{mode:"page",touchEnabled:Modernizr.touch,emptyContainerFunction:l,afterPaginationRefreshFunction:m},sort:{sortBy:"price.annually"},frequency:"annual",animation:{results:{individual:{active:!1},delay:500,options:{easing:"swing",duration:1e3}},shuffle:{active:!0,options:{easing:"swing",duration:1e3}},filter:{reposition:{options:{easing:"swing"}}}},elements:{features:{values:".content",extras:".children"}},templates:{pagination:{pageText:"Product {{=currentPage}} of {{=totalPages}}"}},dictionary:{valueMap:[{key:"Y",value:"<span class='icon icon-tick'></span>"},{key:"N",value:"<span class='icon icon-cross'></span>"},{key:"R",value:"Restricted / Conditional"},{key:"AI",value:"Additional Information"},{key:"O",value:"Optional"},{key:"L",value:"Limited"},{key:"SCH",value:"As shown in schedule"},{key:"NA",value:"Non Applicable"},{key:"E",value:"Excluded"},{key:"NE",value:"No Exclusion"},{key:"NS",value:"No Sub Limit"},{key:"OTH",value:""}]},rankings:{paths:{rank_productId:"productId",rank_premium:"price.annual.total"},filterUnavailableProducts:!1},incrementTransactionId:!1})}catch(b){Results.onError("Sorry, an error occurred initialising page","results.tag","meerkat.modules.homeResults.initResults(); "+b.message,b)}}function e(){a(document.body).on("click","a.offerTerms",q),a(Results.settings.elements.resultsContainer).on("click",".result-row",t),x.messaging.subscribe(y.affix.AFFIXED,function(){a("#resultsPage").css("margin-top","35px")}),x.messaging.subscribe(y.affix.UNAFFIXED,function(){a("#resultsPage").css("margin-top","0")}),x.messaging.subscribe(y.homeFilters.CHANGED,function(a){a&&(a.hasOwnProperty("homeExcess")||a.hasOwnProperty("contentsExcess"))?(x.modules.resultsTracking.setResultsEventMode("Load"),Results.settings.incrementTransactionId=!0,k(),Results.settings.incrementTransactionId=!1):x.modules.resultsTracking.setResultsEventMode("Refresh"),x.modules.session.poke()}),x.messaging.subscribe(z.RESULTS_ERROR,function(){_.delay(function(){x.modules.journeyEngine.gotoPath("previous")},1e3)}),x.messaging.subscribe(Results.model.moduleEvents.RESULTS_MODEL_UPDATE_BEFORE_FILTERSHOW,function(){f()}),a(Results.settings.elements.resultsContainer).on("featuresDisplayMode",function(){Features.buildHtml()}),a(Results.settings.elements.resultsContainer).on("noFilteredResults",function(){Results.view.show()}),a(document).on("resultsLoaded",n),a(document).on("resultsReturned",function(){x.modules.utilities.scrollPageTo(a("header")),a(".featuresHeaders .expandable.expanded").removeClass("expanded").addClass("collapsed")}),a(document).on("resultsFetchStart",function(){x.modules.journeyEngine.loadingShow("getting your quotes"),a("#resultsPage, .loadingDisclaimerText").removeClass("hidden"),Results.pagination.hide()}),a(document).on("resultsFetchFinish",function(){a(Results.settings.elements.page).show(),x.modules.journeyEngine.loadingHide(),a(".loadingDisclaimerText").addClass("hidden"),"price"!==Results.getDisplayMode()?Results.pagination.show():a(document.body).removeClass("priceMode").addClass("priceMode");var b=0;a.each(Results.model.returnedProducts,function(){"Y"===this.productAvailable&&"CURR"!==this.productId&&b++}),0===b&&_.isArray(Results.model.returnedProducts)&&Results.model.returnedProducts.length>0&&o(),x.messaging.publish(y.commencementDate.RESULTS_RENDER_COMPLETED)}),a(document).on("populateFeaturesStart",function(){x.modules.performanceProfiling.startTest("results")}),a(Results.settings.elements.resultsContainer).on("populateFeaturesEnd",function(){var b,c=x.modules.performanceProfiling.endTest("results");b=800>c?x.modules.performanceProfiling.PERFORMANCE.HIGH:8e3>c&&x.modules.performanceProfiling.isIE8()===!1?x.modules.performanceProfiling.PERFORMANCE.MEDIUM:x.modules.performanceProfiling.PERFORMANCE.LOW,Results.setPerformanceMode(b);var d=x.modules.home.getCoverType();"H"===d?(a.each(a(".featuresList"),function(){a(this).children(".homeFeature").appendTo(a(this))}),a.each(a(".featuresList"),function(){a(this).children(".contentsFeature").appendTo(a(this))})):(a.each(a(".featuresList"),function(){a(this).children(".contentsFeature").appendTo(a(this))}),a.each(a(".featuresList"),function(){a(this).children(".homeFeature").appendTo(a(this))}))}),a(document).on("FeaturesRendered",function(){a(Features.target+" .expandable > "+Results.settings.elements.features.values).on("mouseenter",function(){var b=a(this).attr("data-featureId"),c=a(Features.target+' [data-featureId="'+b+'"]');c.addClass(Results.settings.elements.features.expandableHover.replace(/[#\.]/g,""))}).on("mouseleave",function(){var b=a(this).attr("data-featureId"),c=a(Features.target+' [data-featureId="'+b+'"]');c.removeClass(Results.settings.elements.features.expandableHover.replace(/[#\.]/g,""))})})}function f(a){a=a||Results.model.returnedProducts,_.each(a,function(a){_.isUndefined(a.price)||(_.isUndefined(a.price.annual)||_.isUndefined(a.price.annual.total)||(a.price.annual.totalFormatted=x.modules.currencyField.formatCurrency(a.price.annual.total,{roundToDecimalPlace:0})),_.isUndefined(a.price.monthly)||(_.isUndefined(a.price.monthly.total)||(a.price.monthly.totalFormatted=x.modules.currencyField.formatCurrency(a.price.monthly.total,{roundToDecimalPlace:2})),_.isUndefined(a.price.monthly.amount)||(a.price.monthly.amountFormatted=x.modules.currencyField.formatCurrency(a.price.monthly.amount,{roundToDecimalPlace:2})),_.isUndefined(a.price.monthly.firstPayment)||(a.price.monthly.firstPaymentFormatted=x.modules.currencyField.formatCurrency(a.price.monthly.firstPayment,{roundToDecimalPlace:2})))),_.isUndefined(a.HHB)||_.isUndefined(a.HHB.excess)||_.isUndefined(a.HHB.excess.amount)||(a.HHB.excess.amountFormatted=x.modules.currencyField.formatCurrency(a.HHB.excess.amount,{roundToDecimalPlace:0})),_.isUndefined(a.HHC)||_.isUndefined(a.HHC.excess)||_.isUndefined(a.HHC.excess.amount)||(a.HHC.excess.amountFormatted=x.modules.currencyField.formatCurrency(a.HHC.excess.amount,{roundToDecimalPlace:0}))})}function g(){h(),x.messaging.subscribe(y.device.STATE_ENTER_XS,function(){"results"===x.modules.journeyEngine.getCurrentStep().navigationId&&h()}),x.messaging.subscribe(y.device.STATE_LEAVE_XS,function(){i(),Results.pagination.setCurrentPageNumber(1),Results.pagination.resync()})}function h(){"xs"===x.modules.deviceMediaState.get()&&"features"===Results.getDisplayMode()&&(Results.view.startColumnWidthTracking(a(window),Results.settings.render.features.numberOfXSColumns,!1),Results.pagination.setCurrentPageNumber(1),Results.pagination.resync())}function i(){Results.view.stopColumnWidthTracking()}function j(){w=x.modules.deviceMediaState.get()}function k(){v.removeClass("coverTypeContents coverTypeHome");var a=x.modules.home.getCoverType();"H"===a?v.removeClass("coverTypeContents").addClass("coverTypeHome"):"C"===a&&v.addClass("coverTypeContents").removeClass("coverTypeHome"),Results.get()}function l(a){a.find(".btn-pagination").parent("li").remove(),a.find(".pagination-label").addClass("hidden")}function m(a){a.find(".btn-pagination").length>0&&a.find(".pagination-label").removeClass("hidden")}function n(){switch(h(),Results.getDisplayMode()){case"features":s(!1);break;default:A=!0,r(!1)}}function o(){"ctm"==x.site.tracking.brandCode&&x.modules.dialogs.show({htmlContent:a("#no-results-content")[0].outerHTML}),x.modules.hasOwnProperty("homeFilters")&&x.modules.homeFilters.disable()}function p(){var b=x.modules.home.getCoverType(),c=null,d=null;("H"==b||"HC"==b)&&(c=a("#home_homeExcess").val()||a("#home_baseHomeExcess").val()),("C"==b||"HC"==b)&&(d=a("#home_contentsExcess").val()||a("#home_baseContentsExcess").val()),x.messaging.publish(y.resultsTracking.TRACK_QUOTE_RESULTS_LIST,{additionalData:{paymentPlan:a("#navbar-filter .dropdown.filter-frequency span:first-child").text(),homeExcess:c,contentsExcess:d},onAfterEventMode:"Load"})}function q(b){x.modules.homeMoreInfo.setScrollPosition(),b.preventDefault();var c=a(b.target),d=c.next(".offerTerms-content"),e=c.closest(".resultInsert, .more-info-content, .call-modal").find(".companyLogo"),f=c.closest(".resultInsert, .more-info-content, .call-modal").find(".productTitle, .productName");x.modules.dialogs.show({title:e.clone().wrap("<p>").addClass("hidden-xs").parent().html()+"<div class='hidden-xs heading'>"+f.html()+"</div><div class='heading'>Offer terms</div>",hashId:"offer-terms",openOnHashChange:!1,closeOnHashChange:!0,htmlContent:e.clone().wrap("<p>").removeClass("hidden-xs").addClass("hidden-sm hidden-md hidden-lg").parent().html()+"<h2 class='visible-xs heading'>"+f.html()+"</h2>"+d.html()})}function r(b){"undefined"==typeof b&&(b=!0),null!==Results.getDisplayMode()&&"price"!==Results.getDisplayMode()&&(Results.pagination.hide(),a("header .xs-results-pagination").addClass("hidden"),Results.setDisplayMode("price"),i(),a(document.body).addClass("priceMode"),a(window).scrollTop(0),b&&(x.modules.resultsTracking.setResultsEventMode("Refresh"),p()))}function s(b){if("undefined"==typeof b&&(b=!0),null!==Results.getDisplayMode()&&"features"!==Results.getDisplayMode()){var c=A===!0;Results.setDisplayMode("features",c),h(),_.defer(function(){Results.pagination.gotoPage(1),"xs"===x.modules.deviceMediaState.get()&&Results.view.setColumnWidth(a(window),Results.settings.render.features.numberOfXSColumns,!1),Results.pagination.setupNativeScroll()}),Results.pagination.show(!0),a("header .xs-results-pagination").removeClass("hidden"),A=!1,a(document.body).removeClass("priceMode"),a(window).scrollTop(0),b&&(x.modules.resultsTracking.setResultsEventMode("Refresh"),p())}}function t(b){if(a(Results.settings.elements.resultsContainer).hasClass("priceMode")!==!1&&"xs"===x.modules.deviceMediaState.get()){var c=a(b.target);c.hasClass("result-row")===!1&&(c=c.parents(".result-row")),"undefined"!=typeof c.attr("data-available")&&"Y"===c.attr("data-available")&&(x.modules.moreInfo.setProduct(Results.getResult("productId",c.attr("data-productId"))),x.modules.homeMoreInfo.runDisplayMethod())}}function u(){x.messaging.subscribe(y.RESULTS_RANKING_READY,p),x.messaging.subscribe(y.compare.AFTER_ENTER_COMPARE_MODE,function(){a(".filter-excess, .filter-excess a, .excess-update, .excess-update a").addClass("disabled"),a(".filter-featuresmode, .filter-pricemode").addClass("hidden")}),x.messaging.subscribe(y.compare.EXIT_COMPARE,function(){a(".filter-excess, .filter-excess a, .excess-update, .excess-update a").removeClass("disabled"),a(".filter-featuresmode, .filter-pricemode").removeClass("hidden")})}var v,w,x=window.meerkat,y=x.modules.events,z=(x.logging.info,{RESULTS_ERROR:"RESULTS_ERROR"}),A=!1;x.modules.register("homeResults",{init:u,initPage:b,onReturnToPage:c,get:k,stopColumnWidthTracking:i,recordPreviousBreakpoint:j,switchToPriceMode:r,switchToFeaturesMode:s,showNoResults:o,publishExtraSuperTagEvents:p})}(jQuery),function(){function a(a){var c=!1;switch(a){case"buttonLabel":c="Save Quote";break;case"saveAgain":c='Click \'Save Quote\' to update your saved quote <a href="javascript:;" class="btn btn-save saved-continue-link btn-save-quote">Save Quote</a>';break;case"saveSuccess":c='<div class="col-xs-12"><h4>Your quote has been saved.</h4><p>To retrieve your quote <a href="'+b.site.urls.base+'retrieve_quotes.jsp" class="btn-cancel saved-continue-link btn-link">click here</a>.</p><a href="javascript:;" class="btn btn-cancel">Close</a></div>'}return c}var b=window.meerkat,c=(b.modules.events,b.logging.info,b.messaging,{});b.modules.register("homeSaveQuote",{events:c,getCopy:a})}(jQuery),function(a){function b(){c(d()),g.on("change",function(){c(d())}),a("#home_property_address_streetSearch, #home_property_address_streetNum, #home_property_address_postCode, #home_property_address_suburb, #home_property_address_nonStdStreet").on("blur",function(){setTimeout(function(){c()},50)})}function c(a){""!==g.val()&&(h.removeClass("hidden"),"undefined"!=typeof a&&h.find(".icon:first").attr("class","icon").addClass(a)),e.modules.contentPopulation.render(".journeyEngineSlide:eq(0) .snapshot")}function d(){var a="icon-home-contents";switch(g.val()){case"Home Cover Only":a="icon-house";break;case"Contents Cover Only":a="icon-contents"}return a}var e=window.meerkat,f={homeSnapshot:{}},g=a("#home_coverType"),h=a(".quoteSnapshot");e.modules.register("homeSnapshot",{init:b,events:f,getIcon:d})}(jQuery);
//# sourceMappingURL=home.modules.choo.min.map