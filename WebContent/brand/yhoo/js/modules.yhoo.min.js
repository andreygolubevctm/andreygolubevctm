/*!
 * CTM-Platform v0.8.3
 * Copyright 2014 Compare The Market Pty Ltd
 * http://www.comparethemarket.com.au/
 */


function ISODateString(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"}function printStackTrace(a){a=a||{guess:!0};var b=a.e||null;a=!!a.guess;var c=new printStackTrace.implementation,b=c.run(b);return a?c.guessAnonymousFunctions(b):b}!function(a){var b,c;b=window.meerkat=window.meerkat||{},c={},b.messaging={},b.messaging.channels={},b.messaging.subscribe=function(a,c,d){return handler={callback:c,context:d||window},b.messaging.channels[a]||(b.messaging.channels[a]=[]),b.messaging.channels[a].push(handler),handler},b.messaging.unsubscribe=function(a,c){var d=b.messaging.channels[a];if(b.messaging.channels[a]){var e=d.indexOf(c);if(e>-1)return d.splice(e,1),!0}return!1},b.messaging.publish=function(a){var c;if(!b.messaging.channels[a])return!1;c=Array.prototype.slice.call(arguments,1);for(var d=0;d<b.messaging.channels[a].length;d++){var e=b.messaging.channels[a][d];e.callback.apply(e.context,c)}return this},b.site={},b.site.init=function(a){_.extend(b,{site:a})},b.getModule=function(b,c,d){var e=a(b).closest("[data-module]"),f=function(){var a=!0;return e.length&&e.data("module")?(c&&(a=a&&e.data("module").type===c),d&&(a=a&&e.data("module").subtype===d),a):!1};for(f(e);!f(e)&&e.length;)e=e.parent().closest("[data-module]");return f(e)&&e},b.init=function(a,d){_.extend(c,d||{}),b.site.init(a),b.logging.init(),b.modules.init()}}(jQuery),meerkat.logging={};var Driftwood=new function(){this.logger=function(){function a(a,b,e){var f=d(b),g=new Date,h=a[0];if(f>=c.consoleLevelId&&(a[0]=b+":["+ISODateString(g)+"] "+a[0]),f>=c.exceptionLevelId){var i="Sorry, we have encountered an error. Please try again.";"development"==c.mode&&(i+="["+h+"]"),meerkat.modules.errorHandling.error({errorLevel:"silent",page:"meerkat.logging.js",message:i,description:h})}"Microsoft Internet Explorer"!=navigator.appName&&e.apply(console,Array.prototype.slice.call(a))}var b=["NONE","DEBUG","INFO","ERROR","EXCEPTION","NONE"],c={consoleLevel:"DEBUG",consoleLevelId:0,exceptionLevel:"NONE",exceptionLevelId:99,mode:"development",serverPath:"/exceptions/notify?payload=",applicationName:"js_client",cors:!0},d=function(a){return b.indexOf(a.toUpperCase())};return{setServerPath:function(a){c.serverPath=a},env:function(a){"development"==a.toLowerCase()?(c.consoleLevel="DEBUG",c.exceptionLevel="none",c.consoleLevelId=0,c.exceptionLevelId=4):"production"==a.toLowerCase()?(c.consoleLevel="ERROR",c.exceptionLevel="none",c.consoleLevelId=2,c.exceptionLevelId=3):console.log("Unknown environment level")},applicationName:function(a){c.applicationName=a},logLevel:function(a){var b=d(a);b>-1?(c.consoleLevel=a.toUpperCase(),c.consoleLevelId=b):console.log("Setting an invalid log level: "+a)},exceptionLevel:function(a){var b=d(a);b>-1?(c.exceptionLevel=a.toUpperCase(),c.exceptionLevelId=b):console.log("Setting an invalid log level: "+a)},debug:function(){a(arguments,"DEBUG",console.debug)},info:function(){a(arguments,"INFO",console.info)},error:function(){a(arguments,"ERROR",console.error)},exception:function(b){a(b,"EXCEPTION",console.error)}}},defaultLogger=new this.logger,this.exception=function(){defaultLogger.exception(arguments)},this.applicationName=function(a){defaultLogger.applicationName(a)},this.debug=defaultLogger.debug,this.info=defaultLogger.info,this.error=defaultLogger.error,this.env=function(a){defaultLogger.env(a)},this.setServerPath=function(a){defaultLogger.setServerPath(a)},this.exceptionLevel=function(a){"NONE"!=a?defaultLogger.exceptionLevel(a):(this.debug=_.bind(console.debug,console),this.info=_.bind(console.info,console),this.error=_.bind(console.error,console),this.log=_.bind(console.log,console))},this.logLevel=function(a){defaultLogger.logLevel(a)}};window.onerror=function(a,b,c){Driftwood.exception(a,{url:b,line:c})},Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1});var JSON;if(JSON||(JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,!b||"function"==typeof b||"object"==typeof b&&"number"==typeof b.length)return str("",{"":a});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),printStackTrace.implementation=function(){},printStackTrace.implementation.prototype={run:function(a,b){return a=a||this.createException(),b=b||this.mode(a),"other"===b?this.other(arguments.callee):this[b](a)},createException:function(){try{this.undef()}catch(a){return a}},mode:function(a){return a.arguments&&a.stack?"chrome":a.stack&&a.sourceURL?"safari":a.stack&&a.number?"ie":a.stack&&a.fileName?"firefox":a.message&&a["opera#sourceloc"]?!a.stacktrace||-1<a.message.indexOf("\n")&&a.message.split("\n").length>a.stacktrace.split("\n").length?"opera9":"opera10a":a.message&&a.stack&&a.stacktrace?0>a.stacktrace.indexOf("called from line")?"opera10b":"opera11":a.stack&&!a.fileName?"chrome":"other"},instrumentFunction:function(a,b,c){a=a||window;var d=a[b];a[b]=function(){return c.call(this,printStackTrace().slice(4)),a[b]._instrumented.apply(this,arguments)},a[b]._instrumented=d},deinstrumentFunction:function(a,b){a[b].constructor===Function&&a[b]._instrumented&&a[b]._instrumented.constructor===Function&&(a[b]=a[b]._instrumented)},chrome:function(a){return(a.stack+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},safari:function(a){return a.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(a){return a.stack.replace(/^\s*at\s+(.*)$/gm,"$1").replace(/^Anonymous function\s+/gm,"{anonymous}() ").replace(/^(.+)\s+\((.+)\)$/gm,"$1@$2").split("\n").slice(1)},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},opera11:function(a){var b=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/;a=a.stacktrace.split("\n");for(var c=[],d=0,e=a.length;e>d;d+=2){var f=b.exec(a[d]);if(f){var g=f[4]+":"+f[1]+":"+f[2],f=f[3]||"global code",f=f.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,"{anonymous}");c.push(f+"@"+g+" -- "+a[d+1].replace(/^\s+/,""))}}return c},opera10b:function(a){var b=/^(.*)@(.+):(\d+)$/;a=a.stacktrace.split("\n");for(var c=[],d=0,e=a.length;e>d;d++){var f=b.exec(a[d]);f&&c.push((f[1]?f[1]+"()":"global code")+"@"+f[2]+":"+f[3])}return c},opera10a:function(a){var b=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;a=a.stacktrace.split("\n");for(var c=[],d=0,e=a.length;e>d;d+=2){var f=b.exec(a[d]);f&&c.push((f[3]||"{anonymous}")+"()@"+f[2]+":"+f[1]+" -- "+a[d+1].replace(/^\s+/,""))}return c},opera9:function(a){var b=/Line (\d+).*script (?:in )?(\S+)/i;a=a.message.split("\n");for(var c=[],d=2,e=a.length;e>d;d+=2){var f=b.exec(a[d]);f&&c.push("{anonymous}()@"+f[2]+":"+f[1]+" -- "+a[d+1].replace(/^\s+/,""))}return c},other:function(a){for(var b,c,d=/function\s*([\w\-$]+)?\s*\(/i,e=[],f=Array.prototype.slice;a&&a.arguments&&10>e.length;){b=d.test(a.toString())?RegExp.$1||"{anonymous}":"{anonymous}",c=f.call(a.arguments||[]),e[e.length]=b+"("+this.stringifyArguments(c)+")";try{a=a.caller}catch(g){e[e.length]=""+g;break}}return e},stringifyArguments:function(a){for(var b=[],c=Array.prototype.slice,d=0;d<a.length;++d){var e=a[d];void 0===e?b[d]="undefined":null===e?b[d]="null":e.constructor&&(b[d]=e.constructor===Array?3>e.length?"["+this.stringifyArguments(e)+"]":"["+this.stringifyArguments(c.call(e,0,1))+"..."+this.stringifyArguments(c.call(e,-1))+"]":e.constructor===Object?"#object":e.constructor===Function?"#function":e.constructor===String?'"'+e+'"':e.constructor===Number?e:"?")}return b.join(",")},sourceCache:{},ajax:function(a){var b=this.createXMLHTTPObject();if(b)try{return b.open("GET",a,!1),b.send(null),b.responseText}catch(c){}return""},createXMLHTTPObject:function(){for(var a,b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0;c<b.length;c++)try{return a=b[c](),this.createXMLHTTPObject=b[c],a}catch(d){}},isSameDomain:function(a){return"undefined"!=typeof location&&-1!==a.indexOf(location.hostname)},getSource:function(a){return a in this.sourceCache||(this.sourceCache[a]=this.ajax(a).split("\n")),this.sourceCache[a]},guessAnonymousFunctions:function(a){for(var b=0;b<a.length;++b){var c=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,d=a[b],e=/\{anonymous\}\(.*\)@(.*)/.exec(d);if(e){var f=c.exec(e[1]);f&&(c=f[1],e=f[2],f=f[3]||0,c&&this.isSameDomain(c)&&e&&(c=this.guessAnonymousFunction(c,e,f),a[b]=d.replace("{anonymous}",c)))}}return a},guessAnonymousFunction:function(a,b){var c;try{c=this.findFunctionName(this.getSource(a),b)}catch(d){c="getSource failed with url: "+a+", exception: "+d.toString()}return c},findFunctionName:function(a,b){for(var c,d,e=/function\s+([^(]*?)\s*\(([^)]*)\)/,f=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,g=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,h="",i=Math.min(b,20),j=0;i>j;++j)if(c=a[b-j-1],d=c.indexOf("//"),d>=0&&(c=c.substr(0,d)),c&&(h=c+h,(c=f.exec(h))&&c[1]||(c=e.exec(h))&&c[1]||(c=g.exec(h))&&c[1]))return c[1];return"(?)"}},"undefined"==typeof console)var console={log:function(){}};Function.prototype.bind&&console&&"object"==typeof console.log&&["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(a){console[a]=this.bind(console[a],console)},Function.prototype.call),"undefined"==typeof console.debug&&(console.debug=console.log),meerkat.logging.logger=Driftwood,meerkat.logging.debug=meerkat.logging.logger.debug,meerkat.logging.info=meerkat.logging.logger.info,meerkat.logging.error=meerkat.logging.logger.error,meerkat.logging.exception=meerkat.logging.logger.exception,meerkat.logging.init=function(){var a="";a=""!==meerkat.site.vertical?"["+meerkat.site.vertical+"]":"",meerkat.logging.logger.applicationName(a);var b=meerkat.site.isDev?"development":"production";meerkat.logging.logger.env(b),meerkat.logging.info("[logging]","Sergei sees you runnings on "+meerkat.site.environment+" ("+b+"s mode).")},function(){function a(a,b){if(d[a])throw"A module is already defined with the key: "+a;d[a]=b,d[a].moduleName=a,"function"==typeof b.init&&f.push(a),"function"==typeof b.events?_.extend(e,d[a].events()):"object"==typeof d.events&&_.extend(e,d[a].events)}function b(){for(f=f.reverse();f.length;){var a=f.pop();d[a].init()}}var c=window.meerkat,d=(c.logging.info,{}),e={},f=[];d=c.modules={register:a,init:b},c.modules.events=e}(jQuery),function(a){function b(a){window.location.hash=a}function c(a){l.defaultHash=a}function d(a){-1==_.indexOf(g(),a)&&(window.location.hash=i()+"/"+a)}function e(a){for(var b=j.modules.address.getWindowHashAsArray(),c=b.length-1;c>=0;c--)b[c]==a&&b.splice(c,1);window.location.hash=b.join("/")}function f(){a(window).on("hashchange",function(){j.messaging.publish(k.ADDRESS_CHANGE,{hash:j.modules.address.getWindowHash(),hashArray:j.modules.address.getWindowHashAsArray()})})}function g(){return i().split("/")}function h(a){var b=g();return a>=b.length?"":b[a]}function i(){var a=window.location.hash;return null!=a?a.replace("#",""):""}var j=window.meerkat,k=(j.logging.info,{ADDRESS_CHANGE:"ADDRESS_CHANGE"}),l={defaultHash:""};j.modules.register("address",{init:f,events:k,getWindowHashAsArray:g,getWindowHash:i,setHash:b,appendToHash:d,removeFromHash:e,setStartHash:c,getWindowHashAt:h})}(jQuery),function(a){function b(b){b.each(function(b,c){$item=a(c),$item.affix({offset:{top:function(){var a=$item.offset().top;return this.top=a}}})})}function c(){d.messaging.subscribe(e.journeyProgressBar.INIT,function(){b(a(".navbar-affix"))})}{var d=window.meerkat,e=d.modules.events;window.meerkat.logging.info}d.modules.register("affix",{init:c})}(jQuery),function(a){function b(){var b=a("input.typeahead");b.each(function(){var b=a(this),f={name:b.attr("name"),remote:{beforeSend:function(){c(b)},filter:function(a){return d(b),a},url:b.attr("data-source-url")+"%QUERY"},limit:150};f=e(b,f),b.typeahead(f),b.hasClass("input-lg")&&b.prev(".tt-hint").addClass("hint-lg"),b.hasClass("input-sm")&&b.prev(".tt-hint").addClass("hint-sm"),b.hasClass("blur-on-select")&&b.bind("typeahead:selected",function(a,b){b.hasOwnProperty("value")&&"Type your address..."===b.value||a&&a.target&&a.target.blur&&a.target.blur()})})}function c(a){a.hasClass("show-loading")&&g.modules.loadingAnimation.showInside(a.parent(".twitter-typeahead"))}function d(a){a.hasClass("show-loading")&&g.modules.loadingAnimation.hide(a.parent(".twitter-typeahead"))}function e(a,b){return a&&a.hasClass("typeahead-address")&&(b.remote.url=a.attr("id"),b.remote.replace=f,b.valueKey="value",b.template=_.template("<p><%= highlight %></p>"),a.hasClass("typeahead-streetSearch")&&(b.remote.filter=function(b){return d(a),0===b.length&&b.push({value:"Type your address...",highlight:"Can't find your address? <u>Click here.</u>"}),b},a.bind("typeahead:selected",function(a,b){if(b.hasOwnProperty("value")&&"Type your address..."===b.value){var c="";a.target&&a.target.id&&(c=a.target.id.replace("_streetSearch","")),g.messaging.publish(h.CANT_FIND_ADDRESS,{fieldgroup:c})}}))),b}function f(b){var c=a("#"+b);return b="",c.trigger("getSearchURL"),c.data("source-url")&&(b=c.data("source-url")),b}var g=window.meerkat,h={CANT_FIND_ADDRESS:"EVENT_CANT_FIND_ADDRESS"};g.modules.register("autocomplete",{init:b,events:h})}(jQuery),function(a){function b(){jQuery(document).ready(function(){c()}),r.subscribe(q.modules.events.contactDetails.name.FIELD_CHANGED,function(b){H="undefined"!=typeof b.$otherField?a.trim(1===b.fieldIndex?b.$field.val()+" "+b.$otherField.val():b.$otherField.val()+" "+b.$field.val()):b.$field.val()}),r.subscribe(q.modules.events.contactDetails.mobile.FIELD_CHANGED,function(a){I=a.$field.val()}),r.subscribe(q.modules.events.contactDetails.otherPhone.FIELD_CHANGED,function(a){J=a.$field.val()}),r.subscribe(t.VALID,o),r.subscribe(t.INVALID,p)}function c(){u=a(v),w=a(x),y=a(z),A=a(B),u.off("keyup").on("keyup",e),w.off("keyup").on("keyup",e),w.off("focusout").on("focusout",function(){a(this).siblings("[type=hidden]").val(a(this).val().replace(/[^0-9]+/g,""))}),y.off("change").on("change",e),C=a(".call-me-back-submit"),E=a(".call-me-back-form"),C.off("click").on("click",function(){f(a(this).parents("form").first())}),n()}function d(a){null!==H&&a.find(v).val(H),null!==I?a.find(x).val(I):null!==J&&a.find(x).val(J)}function e(){m(a(this).parents("form").first());var b=""!==D.find(u).val(),c=""!==D.find(w).val(),d=""!==D.find(y).val();r.publish(b&&c&&d&&D.valid()?t.VALID:t.INVALID)}function f(b){if(m(b),(!F||"pending"!==F.state())&&D.valid()&&!G){D.find(B).val("Y");var c=[],d=q.modules.form.getData(D),e=q.modules.journeyEngine.getFormData();c=d.concat(e),c.push({name:"quoteType",value:q.site.vertical}),r.publish(t.INVALID),q.modules.loadingAnimation.showAfter(C),F=q.modules.comms.post({url:"ajax/write/request_callback.jsp",data:c,dataType:"json",cache:!1,errorLevel:"silent",onSuccess:function(b){G=!0,q.messaging.publish(t.REQUESTED,{phone:D.find(w).val(),name:D.find(u).val()}),h(),i();var c=a("#mainform");D.find(":input").each(function(){$this=a(this),q.modules.form.appendHiddenField(c,$this.attr("name"),$this.val())}),q.modules.form.appendHiddenField(c,q.site.vertical+"_callmeback_time",b.time),q.modules.form.appendHiddenField(c,q.site.vertical+"_callmeback_date",b.date),0===a("#requested_callmeback_time").length&&q.modules.form.appendHiddenField(c,"requested_callmeback_time",b.time),0===a("#requested_callmeback_date").length&&q.modules.form.appendHiddenField(c,"requested_callmeback_date",b.date)},onError:function(){h(),j(),r.publish(t.VALID)},onComplete:function(){q.modules.loadingAnimation.hide(C)}})}}function g(){return G}function h(){E.each(function(){a(this).hide()})}function i(){E.each(function(){a(this).after(k())})}function j(){E.each(function(){a(this).after('<form class="callmeback-feedback"><h5>Call back service offline</h5><p>Sadly our call back service is offline - Please try again later.</p></form>')})}function k(){return'<form class="callmeback-feedback"><h5>Someone will call you</h5><p>Thank you, a member of our staff will call you in the '+l(D.find(y).val())+"</p></form>"}function l(a){switch(a){case"M":time="morning";break;case"A":time="afternoon";break;default:time="evening (excludes WA)"}return time}function m(a){D=a}function n(){E.each(function(){setupDefaultValidationOnForm(a(this))}),u.length>0&&u.add("rules",{required:!0,messages:{required:"Please enter your name"}}),w.length>0&&w.add("rules",{validateTelNo:!0,messages:{validateTelNo:"Please enter the contact number in the format (area code)(local number) for landline or 04xxxxxxxx for mobile"}}),y.length>0&&y.add("rules",{required:!0,messages:{required:"Please select when you want us to call you back"}})}function o(){null!==D&&D.find(C).removeClass("disabled")}function p(){null!==D&&D.find(C).addClass("disabled")}var q=window.meerkat,r=(q.modules.events,q.logging.info,q.messaging),s={callMeBack:{REQUESTED:"CALL_ME_BACK_REQUESTED",VALID:"CALL_ME_BACK_VALID",INVALID:"CALL_ME_BACK_INVALID"}},t=s.callMeBack,u=null,v=".callmeback_name",w=null,x=".callmeback_phone",y=null,z=".callmeback_timeOfDay",A=null,B=".callmeback_optin",C=null,D=null,E=null,F=null,G=!1,H=null,I=null,J=null;q.modules.register("callMeBack",{init:b,events:s,hasCallbackBeenRequested:g,prefillForm:d,updateSelectedElements:c,submitCallMeBack:f})}(jQuery),function(a){function b(){jQuery(document).ready(function(a){$modalContent=a("#callMeBackModalContent"),$openButton=a("#callMeBackTabButton"),$openButton.on("click",c)}),j.subscribe(i.callMeBack.VALID,e),j.subscribe(i.callMeBack.INVALID,f),j.subscribe(i.callMeBack.REQUESTED,g)}function c(){var b=h.modules.dialogs.show({title:"Get a call back",htmlContent:$modalContent.html(),buttons:[{label:isRequested?"Close":"Cancel",className:"btn-default modal-call-me-back-close",closeWindow:!0},{label:"Call me",className:"btn-primary disabled modal-call-me-back-submit"+(isRequested?" displayNone":""),action:d}],onClose:function(){$openButton.fadeIn()}});$currentCallMeBackModal=a("#"+b),h.modules.callMeBack.updateSelectedElements(),h.modules.callMeBack.prefillForm($currentCallMeBackModal.find("form")),$currentCallMeBackModal.find("h5").hide(),$currentCallMeBackModal.find(".call-me-back-submit").hide(),$openButton.fadeOut();var c=$currentCallMeBackModal.find(".callmeback_name"),e=$currentCallMeBackModal.find(".callmeback_phone");""===c.val()?c.focus():""===e.val()?e.focus():$currentCallMeBackModal.find(".callmeback_timeOfDay").focus()}function d(){h.modules.callMeBack.submitCallMeBack($currentCallMeBackModal.find("form"))}function e(){null!==$currentCallMeBackModal&&$currentCallMeBackModal.find(".modal-call-me-back-submit").removeClass("disabled")}function f(){null!==$currentCallMeBackModal&&$currentCallMeBackModal.find(".modal-call-me-back-submit").addClass("disabled")}function g(){isRequested=!0,null!==$currentCallMeBackModal&&($currentCallMeBackModal.find(".modal-call-me-back-submit").hide(),$currentCallMeBackModal.find(".modal-call-me-back-close").html("Close"))}{var h=window.meerkat,i=h.modules.events,j=h.messaging,k=(h.logging.info,{callMeBackTab:{}});k.callMeBackTab}$currentCallMeBackModal=null,isRequested=!1,h.modules.register("callMeBackTab",{init:b})}(jQuery),function(a){function b(b){var c=a.extend({},n,b);("undefined"==typeof b.errorLevel||null===b.errorLevel)&&console.error("Message to dev: please provide an errorLevel to the comms.post() or comms.get() function.");var e=g(c);return e===!0?!0:d(c,{url:c.url,data:c.data,dataType:c.dataType,type:"POST",timeout:c.timeout})}function c(b){var c=a.extend({},n,b);("undefined"==typeof b.errorLevel||null===b.errorLevel)&&console.error("Message to dev: please provide an errorLevel to the comms.post() or comms.get() function.");var e=g(c);return e===!0?!0:d(c,{url:c.url,type:"GET"})}function d(b,c){var d=k.modules.transactionId.get();try{null==c.data&&(c.data={}),_.isString(c.data)?(c.data+="&transactionId="+d,k.site.isCallCentreUser&&(c.data+="&"&m+"=true")):_.isArray(c.data)?(c.data.push({name:"transactionId",value:d}),k.site.isCallCentreUser&&c.data.push({name:m,value:!0})):_.isObject(c.data)&&(c.data.transactionId=d,k.site.isCallCentreUser&&(c.data[m]=!0))}catch(f){}return a.ajax(c).then(function(a,c,d){var f="undefined"!=typeof b.data?b.data:null;h(a)===!0?i(d,"Server generated error",a.error,b,f):(b.cache===!0&&e(b.url,f,a),null!=b.onSuccess&&b.onSuccess(a),null!=b.onComplete&&b.onComplete(d,c))},function(a,c,d){var e="undefined"!=typeof b.data?b.data:null;i(a,c,d,b,e),null!=b.onComplete&&b.onComplete(a,c)})}function e(a,b,c){l.push({url:a,postData:b,result:c})}function f(a){for(var b=0;b<l.length;b++){var c=l[b];if(a.url===c.url){if(null===a.data&&null===c.postData)return c;if(null!==a.data&&null!==c.postData&&_.isEqual(a.data,c.postData))return c}}return null}function g(a){if(a.cache===!0){var b=f(a);if(null!==b)return k.logging.info("Retrieved from cache",b),null!=a.onSuccess&&a.onSuccess(b.result),null!=a.onComplete&&a.onComplete(),!0}return!1}function h(a){return"undefined"!=typeof a.error?!0:!1}function i(a,b,c,d,e){"undefined"==typeof d&&(d={}),d.useDefaultErrorHandling&&d.onErrorDefaultHandling(a,b,c,d,e),null!=d.onError&&d.onError(a,b,c,d,e)}function j(){return m}var k=window.meerkat,l=[],m="checkAuthenticated",n={url:"not-set",data:null,dataType:!1,numberOfAttempts:1,timeout:6e4,cache:!1,errorLevel:null,useDefaultErrorHandling:!0,onSuccess:function(){},onError:function(){},onComplete:function(){},onErrorDefaultHandling:function(a,b,c,d,e){var f={400:"There was a problem with the last request to the server [400]. Please try again.",401:"There was a problem accessing the data for the last request [401].",403:"There was a problem accessing the data for the last request [403].",404:"The requested page could not be found [404]. Please try again.",500:"There was a problem with your last request to the server [500]. Please try again.",503:"There was a problem with your last request to the server [503]. Please try again."},g="",h={errorLevel:d.errorLevel,message:g,page:"comms.js",description:"Error loading url: "+d.url+" : "+b+" "+c,data:e};a.status&&200!=a.status?g=f[a.status]:"parsererror"==b?g+="There was a problem handling the response from the server [parsererror]. Please try again.":"timeout"==b?g+="There was a problem connecting to the server. Please check your internet connection and try again. [Request Time out].":"abort"==b&&(g+="There was a problem handling the response from the server [abort]. Please try again."),g&&""!==g||c!=m?g&&""!==g||(g="Unknown Error"):(g="Your Simples login session has been lost. Please open Simples in a separate tab, login, then you can continue with this quote.",k.modules.dialogs.isDialogOpen(m)||k.modules.journeyEngine.gotoPath("previous"),_.extend(h,{errorLevel:"warning",id:m})),_.extend(h,{message:g}),(c!=m||c==m&&!k.modules.dialogs.isDialogOpen(m))&&k.modules.errorHandling.error(h)}};k.modules.register("comms",{post:b,get:c,getCheckAuthenticatedLabel:j})}(jQuery),function(a){function b(){}function c(a){F=_.extend(F,a),_.each(F,function(a,b){_.each(a,function(a,c){var e=_.extend(a,{index:c,type:b,fieldIndex:1});d(e),h(e),"undefined"!=typeof e.$otherField&&(e=_.extend({},e,{alternateOtherField:!0,fieldIndex:2}),d(e))})}),prefillLaterFields=!0}function d(b){var c=w(b);"undefined"!=typeof b.alternateOtherField&&b.alternateOtherField&&(c=b.$otherField),c.on("change.contactDetails",function(){$this=a(this),_.defer(function(){e($this,b)})}),e(c,b,!1)}function e(a,b,c){if("undefined"==typeof c&&(c=!0),a.isValid())if(f(b))g(b,c);else{var d=i(b);c&&j(d),l(d)}}function f(b){var c=["email"];return"undefined"!=b.$optInField&&-1!==a.inArray(b.type,c)?!0:!1}function g(a,b){C.modules.loadingAnimation.showAfter(a.$field);var c={data:{type:a.type,value:a.$field.val()},onComplete:function(){C.modules.loadingAnimation.hide(a.$field)},onSuccess:function(c){var d={optins:{email:c.optInMarketing}},e=_.extend(i(a),d);b&&j(e),l(e)},onError:function(){t(a.$optInField)}};C.modules.optIn.fetch(c)}function h(a){"undefined"!=typeof a.$optInField&&a.$optInField.on("change.contactDetails",function(){var b=i(a);k(b),v(b)})}function i(a){var b={index:a.index,type:a.type,$field:w(a),$otherField:a.$otherField,fieldIndex:a.fieldIndex,$savedField:a.$field,$optInField:a.$optInField};return"undefined"!=typeof a.alternateOtherField&&a.alternateOtherField&&(b.$otherField=b.$field,b.$field=a.$otherField),b}function j(a){D.publish(a.type.toUpperCase()+"_FIELD_CHANGED",a)}function k(a){D.publish(a.type.toUpperCase()+"_OPTIN_FIELD_CHANGED",a)}function l(a){"undefined"!=typeof a.$optInField&&m(a)&&s(a.$optInField,a.optins[a.type]),prefillLaterFields&&a.index!==F[a.type].length&&x(a)}function m(a){return n(a)&&!o(a)}function n(a){return"undefined"!=typeof a.optins&&"undefined"!=typeof a.optins[a.type]?!0:!1}function o(a){return q(a).length>1}function p(a){var b=q(a),c=!0;return _.each(b,function(a){a.$field.isValid()||(c=!1)}),c}function q(a){var b=[];return _.each(r(),function(c){"undefined"!=typeof c.$optInField&&c.$optInField.is(a.$optInField)&&b.push(c)}),b}function r(){var a=[];return _.each(F,function(b,c){_.each(b,function(b){a.push(_.extend(b,{type:c}))})}),a}function s(a,b){b?u(a):t(a)}function t(a){A(a,!1),a.parents(".fieldrow").first().slideDown()}function u(a){a.parents(".fieldrow").first().slideUp(),a.attr("data-visible","true"),A(a,!0)}function v(a){prefillLaterFields&&a.index!==F[a.type].length&&y(a)}function w(a){var b=null;return b="undefined"!=typeof a.$fieldInput?a.$fieldInput:a.$field}function x(a){var b=a.$field,c="undefined"==typeof b.attr("data-previous-value")?"":b.attr("data-previous-value"),d=b.val();b.attr("data-previous-value",d);var e;e="undefined"==typeof a.$optInField?null:n(a)?a.optins[a.type]||z(a.$optInField):z(a.$optInField);for(var f=a.index+1;f<F[a.type].length;f++){var g=_.extend(F[a.type][f],{type:a.type}),h=w(g);if(!(""!==h.val()&&c!==h.val()||"undefined"!=typeof g.$otherField&&""!==g.$otherField.val())){if("name"==a.type&&"undefined"!=typeof g.$otherField){var i=d.split(" ");h.val(i[0]),g.$otherField.val(i.slice(1).join(" "))}else h.val(d).attr("data-previous-value",d);(C.modules.performanceProfiling.isIE8()||C.modules.performanceProfiling.isIE9())&&C.modules.placeholder.invalidatePlaceholder("undefined"!=typeof g.$fieldInput?g.$fieldInput:h),"undefined"!=typeof g.$fieldInput&&h.trigger("change").trigger("blur").trigger("focusout"),"undefined"==typeof g.$optInField||o(g)||s(g.$optInField,e)}}}function y(a){var b=z(a.$optInField),c=null;if(n(a)&&(c=a.optins[a.type]),"undefined"!=typeof b)for(var d=a.index+1;d<F[a.type].length;d++){var e=_.extend(F[a.type][d],{type:a.type});"undefined"!=typeof e.$optInField&&(b&&!o(e)?s(e.$optInField,b):(t(e.$optInField),A(e.$optInField,b)))}}function z(b){var c=b.attr("type"),d=null;if("checkbox"==c)d=b.is(":checked");else{if("radio"!=c)return!1;b.each(function(){return a(this).is(":checked")?(d="Y"==b.val(),!1):void 0})}return d}function A(b,c){var d=b.attr("type");if("checkbox"==d)b.prop("checked",c);else if("radio"==d){var e=null;e=c?"Y":"N",b.each(function(){return a(this).val()==e?(a(this).prop("checked",!0).trigger("change"),!1):void 0})}}function B(){return F}var C=window.meerkat,D=(C.modules.events,C.logging.info,C.messaging),E={contactDetails:{name:{FIELD_CHANGED:"NAME_FIELD_CHANGED",OPTIN_FIELD_CHANGED:"NAME_OPTIN_FIELD_CHANGED"},email:{FIELD_CHANGED:"EMAIL_FIELD_CHANGED",OPTIN_FIELD_CHANGED:"EMAIL_OPTIN_FIELD_CHANGED"},phone:{FIELD_CHANGED:"PHONE_FIELD_CHANGED",OPTIN_FIELD_CHANGED:"PHONE_OPTIN_FIELD_CHANGED"},mobile:{FIELD_CHANGED:"MOBILE_FIELD_CHANGED",OPTIN_FIELD_CHANGED:"MOBILE_OPTIN_FIELD_CHANGED"},otherPhone:{FIELD_CHANGED:"OTHERPHONE_FIELD_CHANGED",OPTIN_FIELD_CHANGED:"OTHERPHONE_OPTIN_FIELD_CHANGED"}}},F=(E.contactDetails,{});prefillLaterFields=!0,C.modules.register("contactDetails",{init:b,events:E,configure:c,getFields:B,getFieldsFromOptInGroup:q,isOptInGroupValid:p,isPartOfOptInGroup:o})}(jQuery),function(a){function b(){a(document).ready(function(){a.fn.datepicker.defaults.format="dd/mm/yyyy",a.fn.datepicker.defaults.autoclose=!0,a.fn.datepicker.defaults.forceParse=!1,a.fn.datepicker.defaults.weekStart=1,a.fn.datepicker.defaults.todayHightlight=!0,a.fn.datepicker.defaults.clearBtn=!0,a("[data-provide=datepicker]").each(function(){var b=a(this);b.siblings(".input-group-addon").on("click",function(){b.datepicker("show")})})}),a(document).on("hide",'[data-provide="datepicker"]',function(b){b.target&&(a(b.target).is(":focus")||a(b.target).blur())
})}{var c=window.meerkat;c.logging.info}c.modules.register("datepicker",{init:b})}(jQuery),function(){function a(){function a(a){var b,c=a.target,d=c.tagName.toLowerCase();if(a.shiftKey&&83===a.which&&"input"!==d&&"textarea"!==d&&"select"!==d){b=document.getElementsByTagName("link");for(var e=0;e<b.length;e++){var f=b[e];if(f.rel.toLowerCase().indexOf("stylesheet")>=0){var g=f.getAttribute("href");g=g.replace(/(&|\?)forceReload=\d+/,""),g=g+(g.indexOf("?")>=0?"&":"?")+"forceReload="+(new Date).getTime(),f.setAttribute("href",g)}}}}window.addEventListener&&window.addEventListener("keypress",a)}function b(){c.site.isDev===!0&&a()}var c=window.meerkat;c.modules.register("development",{init:b})}(jQuery),function(a){function b(){return a("html").css("font-family").replace(/'/g,"").replace(/\"/g,"")}function c(){a(window).resize(_.debounce(function(){var a=b();d.messaging.publish(f.RESIZE_DEBOUNCED,{previousState:g,state:a}),a!==g&&(d.messaging.publish(f.STATE_CHANGE,{previousState:g,state:a}),d.messaging.publish(f["STATE_ENTER_"+a.toUpperCase()]),g&&d.messaging.publish(f["STATE_LEAVE_"+g.toUpperCase()]),g=a)}))}var d=window.meerkat,e=(d.modules.events,d.logging.info,{device:{RESIZE_DEBOUNCED:"DEVICE_RESIZE_DEBOUNCED",STATE_CHANGE:"DEVICE_MEDIA_STATE_CHANGE",STATE_ENTER_XS:"DEVICE_STATE_ENTER_XS",STATE_ENTER_SM:"DEVICE_STATE_ENTER_SM",STATE_ENTER_MD:"DEVICE_STATE_ENTER_MD",STATE_ENTER_LG:"DEVICE_STATE_ENTER_LG",STATE_LEAVE_XS:"DEVICE_STATE_LEAVE_XS",STATE_LEAVE_SM:"DEVICE_STATE_LEAVE_SM",STATE_LEAVE_MD:"DEVICE_STATE_LEAVE_MD",STATE_LEAVE_LG:"DEVICE_STATE_LEAVE_LG"}}),f=e.device,g=!1;d.modules.register("deviceMediaState",{init:c,events:e,get:b})}(jQuery),function(a){function b(b){var d=a.extend({},s,b);o="xs"===m.modules.deviceMediaState.get()?!0:!1;var i="mkDialog_"+p;_.isUndefined(d.id)?(d.id=i,p++):k(d.id)&&h(d.id),null!=d.hashId&&m.modules.address.appendToHash(d.hashId);var j=_.template(d.templates.dialogWindow);(null!=d.url||null!=d.externalUrl)&&(d.htmlContent=m.modules.loadingAnimation.getTemplate());var l=j(d);if(a("#dynamic_dom").append(l),a("#"+d.id).modal({show:!0,backdrop:d.buttons&&d.buttons.length>0?"static":!0,keyboard:!1}),a("#"+d.id+" button").on("click",function(b){var e=d.buttons[a(b.currentTarget).attr("data-index")];e.closeWindow===!0&&c(a(b.currentTarget).closest(".modal").attr("id")),"function"==typeof e.action&&e.action(b)}),null!=d.url&&m.modules.comms.get({url:d.url,cache:d.cacheUrl,errorLevel:"warning",onSuccess:function(a){e(d.id,a),"function"==typeof d.onLoad&&d.onLoad(d.id)}}),null!=d.externalUrl){var n='<iframe class="displayNone" id="'+d.id+'_iframe" width="100%" height="100%" frameborder="0" scrolling="no" allowtransparency="true" src="'+d.externalUrl+'"></iframe>';f(d.id,n),a("#"+d.id+"_iframe").on("load",function(){console.log("scoll height",this.contentWindow.document.body.scrollHeight),a(this).show(),m.modules.loadingAnimation.hide(a("#"+d.id))})}return window.setTimeout(function(){g(d.id)},0),"function"==typeof d.onOpen&&d.onOpen(d.id),r.push(d),d.id}function c(a){var b=i(a);h(a),"function"==typeof b.onClose&&b.onClose(a)}function d(){a("#dynamic_dom .modal").each(function(b,c){g(a(c).attr("id"))})}function e(b,c){a("#"+b+" .modal-body").html(c),d()}function f(b,c){a("#"+b+" .modal-body").append(c),d()}function g(b){o="xs"===m.modules.deviceMediaState.get()?!0:!1;var c=a("#"+b);if(0===c.find(".modal-header").outerHeight(!0))window.setTimeout(function(){g(b)},20);else{var d,e,f,h=c.find(".modal-content"),i=c.find(".modal-dialog");d=a(window).height(),o||(d-=60),e=d,e-=c.find(".modal-header").outerHeight(!0),e-=c.find(".modal-footer").outerHeight(!0),e-=c.find(".modal-closebar").outerHeight(!0),o?(h.css("height",d),c.find(".modal-body").css("height",e),f=0,i.css("top",f)):(h.css("max-height",d),c.find(".modal-body").css("max-height",e),f=d/2-i.height()/2,h.height()<d&&(f/=2),i.css("top",f))}}function h(b){if(b&&0!==b.length){var c=a("#"+b);c.on("hidden.bs.modal",function(){c.find("button").unbind(),c.remove()}),c.modal("hide");var d=i(b);if(null!=d){if(null!=d.hashId){m.modules.address.removeFromHash(d.hashId);var e=_.findWhere(q,{hashId:d.hashId});null==e&&q.push(d)}r.splice(d.index,1)}}}function i(a){var b=j(a);return null!==b?(r[b].index=b,r[b]):null}function j(a){for(var b=0;b<r.length;b++)if(r[b].id==a)return b;return null}function k(a){return!_.isNull(j(a))}function l(){a(document).ready(function(){a(document).on("click",".btn-close-dialog",function(){c(a(this).closest(".modal").attr("id"))}),Modernizr.touch&&(a(document).on("touchmove",".modal",function(a){a.preventDefault()}),a(document).on("touchmove",".modal .modal-body",function(a){a.stopPropagation()}))});var e=this;m.messaging.subscribe(n.dynamicContentLoading.PARSED_DIALOG,function(c){var d,e=c.element.attr("data-dialog-hash-id"),f=null;""!==e&&(f=e),d="url"===c.contentType?{title:c.element.attr("data-title"),url:c.contentValue,cacheUrl:c.element.attr("data-cache")?!0:!1}:"externalUrl"===c.contentType?{title:c.element.attr("data-title"),externalUrl:c.contentValue}:{title:a(c.contentValue).attr("data-title"),htmlContent:c.contentValue};var g=a.extend({hashId:f,closeOnHashChange:!0,className:c.element.attr("data-class")},d);b(g)});var f=_.debounce(d,300);a(window).resize(f),m.messaging.subscribe(n.ADDRESS_CHANGE,function(a){for(var b=r.length-1;b>=0;b--){var c=r[b];c.closeOnHashChange===!0&&-1==_.indexOf(a.hashArray,c.hashId)&&e.destroyDialog(c.id)}for(var d=0;d<a.hashArray.length;d++){var f=_.findWhere(r,{hashId:a.hashArray[d]});if(null==f){var g=_.findWhere(q,{hashId:a.hashArray[d]});null!=g&&m.modules.dialogs.show(g)}}},window)}var m=window.meerkat,n=m.modules.events,o=(m.logging.info,"xs"===m.modules.deviceMediaState.get()?!0:!1),p=0,q=[],r=[],s={title:"",htmlContent:null,url:null,cacheUrl:!1,buttons:[],className:"",hashId:null,closeOnHashChange:!1,templates:{dialogWindow:'<div id="{{= id }}" class="modal" tabindex="-1" role="dialog" aria-labelledby="{{= id }}_title" aria-hidden="true">\n						<div class="modal-dialog {{= className }}">\n							<div class="modal-content">\n								<div class="modal-closebar">\n									<a href="javascript:;" class="btn btn-close-dialog"><span class="icon icon-cross"></span></a>\n								</div>\n								{{ if(title != "" ){ }}\n								<div class="modal-header"><h4 class="modal-title" id="{{= id }}_title">{{= title }}</h4></div>\n								{{ } }}\n								<div class="modal-body">\n									{{= htmlContent }}\n								</div>\n								{{ if(typeof buttons !== "undefined" && buttons.length > 0 ){ }}\n									<div class="modal-footer {{ if(buttons.length > 1 ){ }} mustShow {{ } }}">\n										{{ _.each(buttons, function(button, iterator) { }}\n											<button data-index="{{= iterator }}" type="button" class="btn {{= button.className }} ">{{= button.label }}</button>\n										{{ }); }}\n									</div>\n								{{ } }}\n							</div>\n						</div>\n					</div>'},onOpen:function(){},onClose:function(){},onLoad:function(){}};m.modules.register("dialogs",{init:l,show:b,changeContent:e,destroyDialog:h,isDialogOpen:k})}(jQuery),function(a){function b(){a(document).ready(function(){Modernizr.touch&&(a(document).on("touchmove",".dropdown-backdrop, .dropdown-interactive form",function(a){a.preventDefault(),a.stopPropagation()}),a(document).on("touchmove",".dropdown-interactive .scrollable",function(a){a.stopPropagation()}))}),a(document).on("show.bs.dropdown",function(b){c(a(b.target))}),a(document).on("shown.bs.dropdown",function(b){if(b.target){var c=!0;"xs"===g.modules.deviceMediaState.get()&&(c=!1),_.defer(function(){d(a(b.target),c)&&a(document.body).addClass("dropdown-fitviewport")}),a(document.body).addClass("dropdown-open")}}),a(document).on("hidden.bs.dropdown",function(){a(document.body).removeClass("dropdown-open").removeClass("dropdown-fitviewport")}),g.messaging.subscribe(h.device.RESIZE_DEBOUNCED,function(){a(".dropdown-interactive").each(function(){var b=a(this);b.removeAttr("data-maxheight"),e(b),b.hasClass("open")&&(d(b,!1)&&a(document.body).addClass("dropdown-fitviewport"),a(document.body).addClass("dropdown-open"))})})}function c(a){var b=a.closest(".dropdown-interactive-base"),c=a.closest(".dropdown-interactive");return b.length&&c.length?i.prependTo(b).on("click",f):c.length?i.prependTo(c).on("click",f):void 0}function d(b,c){if(b&&0!==b.length){var d=0,f=0,h=0;return c===!0&&b.attr("data-maxheight")?f=b.attr("data-maxheight"):(d=a(window).height(),"xs"===g.modules.deviceMediaState.get()?(h+=a("header .dynamicTopHeaderContent").outerHeight(),h+=a("header .navbar-header").outerHeight(),h+=b.find(".activator").outerHeight(),b.prevAll("li:visible").each(function(){h+=a(this).outerHeight()})):(h+=20,b.closest(".navbar-affix").each(function(){h+=a(this).outerHeight()})),h+=b.find("form").outerHeight()-b.find(".scrollable").outerHeight(),f=d-h,b.attr("data-maxheight",f)),f>0?(b.find(".dropdown-container .scrollable").css("max-height",f).css("overflow-y","auto"),!0):(e(b),!1)}}function e(a){a.find(".dropdown-container .scrollable").css("max-height","")}function f(){a('[data-toggle="dropdown"]').parent(".open").children('[data-toggle="dropdown"]').dropdown("toggle")}var g=window.meerkat,h=g.modules.events,i=(g.logging.info,a('<div class="dropdown-backdrop" />'));g.modules.register("dropdownInteractive",{init:b,fitIntoViewport:d,addBackdrop:c})}(jQuery),function(a){function b(){c()}function c(){a(document.body).on("click","a[data-content]",function(a){a.preventDefault(),a.stopPropagation(),d(a)}),a(document.body).on("mouseenter",'[data-trigger=mouseenter], [data-trigger="mouseenter click"]',function(a){d(a)})}function d(b){var c=null,d=null,f=a(b.currentTarget),h=f.attr("data-content"),i=f.attr("data-toggle");if("undefined"!=typeof i&&""!==i){var j=h.split(".");"#"===h[0]||"."===h[0]?(c="selector",d=a(h).html()):"helpid:"==h.substr(0,7)?(c="url",d="ajax/xml/help.jsp?id="+h.substr(7,h.length)):"http"===h.substring(0,4)||"www"===h.substring(0,3)?(c="externalUrl",d=h):"jsp"==j[j.length-1]||"html"==j[j.length-1]?(c="url",d=h):(c="content",d=h),e.messaging.publish(g["PARSED_"+i.toUpperCase()],{element:f,contentType:c,contentValue:d})}}var e=window.meerkat,f=(e.modules.events,e.logging.info,{dynamicContentLoading:{PARSED_POPOVER:"DYNAMIC_CONTENT_PARSED_POPOVER",PARSED_DIALOG:"DYNAMIC_CONTENT_PARSED_DIALOG"}}),g=f.dynamicContentLoading;e.modules.register("dynamicContentLoading",{init:b,events:f})}(jQuery),function(a){function b(){jQuery(document).ready(function(a){v=a("#email-results-dropdown"),w=a("#email-results-component"),x=a(".emailResultsInstructions"),y=a("#emailresults_email"),z=a("#emailresults_marketing"),A=a(D),B=a("#emailResultsSuccess"),C=a(".emailResultsFields"),y.on("keyup change",e),y.on("blur",function(){a(this).val(a.trim(a(this).val()))}),w.on("click",".btn-email-results",i),v.find(".activator").on("click",c),v.on("click",".btn-cancel",q),d(),h(),k(),r.messaging.subscribe(s.WEBAPP_LOCK,p),r.messaging.subscribe(s.WEBAPP_UNLOCK,o)}),t.subscribe(r.modules.events.contactDetails.email.FIELD_CHANGED,function(a){""===y.val()&&y.val(a.$field.val()).trigger("change")})}function c(){J?(B.hide(),w.show(),C.hide()):""!==y.val()&&A.hasClass("disabled")&&y.trigger("change")}function d(){null!==w&&0!==w.length&&setupDefaultValidationOnForm(w)}function e(a){13==a.keyCode||9==a.keyCode?f():E!=y.val()?(n(),clearInterval(F),F=setTimeout(f,800)):m()}function f(){var a=y.valid();a&&g()}function g(){var a=y.val();E=a,G&&"pending"===G.state()&&G&&G.abort(),n(),r.modules.loadingAnimation.showAfter(y);var b={data:{type:"email",value:a},onComplete:function(){m(),r.modules.loadingAnimation.hide(y)},onSuccess:function(a){H=a.exists,a.optInMarketing?(k(),z.prop("checked",!0)):l(),r.site.isCallCentreUser||(a.exists?(h("clickSubmit"),hidePasswords()):(h("createLogin"),showPasswords()))},onError:function(){H=!1,r.site.isCallCentreUser||(h("createLogin"),showPasswords())}};G=r.modules.optIn.fetch(b)}function h(b){var c="Please enter the email you want your results sent to.";switch(b){case"emailresultsAgain":c='Click \'Email Results\' to have this quote sent to you.  <a href="javascript:;" class="btn btn-primary btn-save-quote">Email Results</a>';break;default:c="Please enter the email you want your results sent to."}x.html(c),"emailresultsAgain"===b&&(A=a(D),A.html("Email Results"))}function i(){if(w.valid()){if(I&&"pending"===I.state())return;n();var b=a("#mainform");0===a("#saved_email").length&&r.modules.form.appendHiddenField(b,"saved_email",y.val()),0===a("#saved_marketing").length&&r.modules.form.appendHiddenField(b,"saved_marketing",z.val());var c=[];switch(c.push(r.modules.form.getSerializedData(w)),c.push(r.modules.journeyEngine.getSerializedFormData()),c.push("transactionId="+r.modules.transactionId.get()),c=c.join("&"),Track._type){case"Health":Health._rates!==!1&&(c+=Health._rates)}r.modules.loadingAnimation.showAfter(A),J?r.messaging.publish(s.tracking.TOUCH,{touchType:"S",touchComment:null,includeFormData:!0,callback:function(a){j(a.result.success,a.result.transactionId)}}):r.modules.comms.post({url:"ajax/json/email_results.jsp",data:c,dataType:"json",cache:!1,errorLevel:"silent",onSuccess:function(a){j(a.success,a.transactionId)},onError:function(){r.site.isCallCentreUser&&m()},onComplete:function(){r.modules.loadingAnimation.hide(A)}})}}function j(a,b){m(),r.modules.loadingAnimation.hide(A),a&&(w.hide(),B.fadeIn(),J||(J=!0,h("emailresultsAgain"),v.find(".activator span:not([class])").html("Email Results")),"undefined"!=typeof b&&r.modules.transactionId.set(b))}function k(){z.parents(".row").first().hide()}function l(){z.parents(".row").first().show()}function m(){A.removeClass("disabled")}function n(){A.addClass("disabled")}function o(){v.children(".activator").removeClass("inactive").removeClass("disabled")}function p(){q(),v.children(".activator").addClass("inactive").addClass("disabled")}function q(){v.hasClass("open")&&v.find(".activator").dropdown("toggle")}var r=window.meerkat,s=r.modules.events,t=(r.logging.info,r.messaging),u={emailResults:{}},v=(u.emailResults,null),w=null,x=null,y=null,z=null,A=null,B=null,C=null,D=".btn-email-results",E=null,F=null,G=null,H=null,I=null,J=!1;r.modules.register("emailResults",{init:b,events:u,close:q,enable:o,disable:p,enableSubmitButton:m,disableSubmitButton:n})}(jQuery),function(a){function b(b){("undefined"==typeof b.errorLevel||null===b.errorLevel)&&console.error("Message to dev: please provide an errorLevel to the errorHandling.error() function.");var f,g=a.extend({},e,b);switch(g.errorLevel){case"warning":f=!1,c(f,g);break;case"fatal":f=!0,c(f,g);break;default:f=!1}g.fatal=f;var h="";if("undefined"!=typeof d.modules.transactionId&&(h=d.modules.transactionId.get(),null===h&&(h="")),g.transactionId=h,"object"==typeof g.data&&null!==g.data&&(g.data=JSON.stringify(g.data)),f)try{d.modules.writeQuote.write({triggeredsave:"fatalerror",triggeredsavereason:g.description},!1)}catch(i){}d.modules.comms.post({url:"ajax/write/register_fatal_error.jsp",data:g,useDefaultErrorHandling:!1,errorLevel:"silent",onError:function(){}})}function c(b,c){var e;b?(e=[{label:"Refresh page",className:"btn-primary",action:function(){location.reload()},closeWindow:!1}],d.site.isDev===!0&&e.push({label:"Attempt to continue [dev only]",className:"btn-default",action:null,closeWindow:!0})):e=[{label:"OK",className:"btn-primary",closeWindow:!0}];var f={title:"Error",htmlContent:c.message,buttons:e};_.isNull(c.id)||_.extend(f,{id:c.id});var g=d.modules.dialogs.show(f);b&&!d.site.isDev&&a("#"+g+" .modal-closebar").remove()}var d=window.meerkat,e=(d.logging.info,{errorLevel:"silent",page:"unknown",message:"Sorry, an error has occurred",description:"unknown",data:null,id:null});d.modules.register("errorHandling",{error:b})}(jQuery),function(a){function b(){}function c(a){return e(a).serializeArray()}function d(a){return e(a).serialize()}function e(b){return b.find(":input:visible, input[type=hidden], :input[data-visible=true], :input[data-initValue=true]").filter(function(){return""!==a(this).val()&&"Please choose..."!==a(this).val()})}function f(a){a.find(":input[data-initValue]").removeAttr("data-initValue"),a.find(":input[data-visible]").removeAttr("data-visible"),a.find(":input:visible").attr("data-visible","true")}function g(b){$elements=b.find(":input").filter(function(){return""!==a(this).val()&&"Please choose..."!==a(this).val()}),$elements.attr("data-initValue","true")}function h(a,b,c){a.append('<input type="hidden" id="'+b+'" name="'+b+'" data-visible="true" value="'+c+'" />')}{var i=window.meerkat,j=(i.modules.events,i.logging.info,i.messaging,{form:{}});j.form}i.modules.register("form",{init:b,events:j,getData:c,getSerializedData:d,appendHiddenField:h,markFieldsAsVisible:f,markInitialFieldsWithValue:g})}(jQuery),function(a){function b(){var b=f.modules.performanceProfiling.isIos(),g=f.modules.performanceProfiling.isIos5(),h=f.modules.performanceProfiling.isAndroid(),i=f.modules.performanceProfiling.isChrome();a(document).ready(function(){var f=!1;Modernizr.inputtypes.date&&(b&&!g||h&&i)&&(f=!0),a("[data-provide=dateinput]").each(function(){var b=a(this);f?(b.attr("data-dateinput-type","native"),b.find(".dateinput-tripleField").addClass("hidden"),b.find(".dateinput-nativePicker").removeClass("hidden").find("input").on("change",e)):b.find("input.dateinput-day, input.dateinput-month, input.dateinput-year").on("input",d).on("change",e);var g=b.find(".serialise");c(b,g.val()),g.on("change",function(){c(b,this.value)})})})}function c(a,b){var c=b.split("/"),d="";1!=a.attr("data-locked")&&(a.attr("data-locked",1),0===b.length||3!==c.length?c=["","",""]:(1===c[0].length&&(c[0]="0"+c[0]),1===c[1].length&&(c[1]="0"+c[1]),4===c[2].length&&2===c[1].length&&2===c[0].length&&(d=c[2]+"-"+c[1]+"-"+c[0])),a.find("input.dateinput-day").val(c[0]),a.find("input.dateinput-month").val(c[1]),a.find("input.dateinput-year").val(c[2]),a.find(".dateinput-nativePicker input").val(d),(f.modules.performanceProfiling.isIE8()||f.modules.performanceProfiling.isIE9())&&(f.modules.placeholder.invalidatePlaceholder(a.find("input.dateinput-day")),f.modules.placeholder.invalidatePlaceholder(a.find("input.dateinput-month")),f.modules.placeholder.invalidatePlaceholder(a.find("input.dateinput-year"))),a.removeAttr("data-locked"))}function d(){var b=a(this);if(b.attr("maxlength")&&!b.hasClass("year")&&b.val().length==b.attr("maxlength")){var c=b.hasClass("dateinput-day")?"input.dateinput-month":"input.dateinput-year";b.closest('[data-provide="dateinput"]').find(c).focus().select()}}function e(){var b=a(this).parents('[data-provide="dateinput"]'),c=b.find(".serialise"),d="",e="",f="";if(1!=b.attr("data-locked")){if(b.attr("data-locked",1),"native"==b.attr("data-dateinput-type")){var g=this.value.length>0?this.value.split("-"):["","",""];f=g[0],e=g[1],d=g[2]}else d=b.find("input.dateinput-day").val(),e=b.find("input.dateinput-month").val(),f=b.find("input.dateinput-year").val();1===d.length&&(d="0"+d),1===e.length&&(e="0"+e),d.length>0&&Number(d)>0&&e.length>0&&Number(e)>0&&f.length>0&&Number(f)>0?(c.val(d+"/"+e+"/"+f),c.valid()):c.val(""),c.change(),b.removeAttr("data-locked")}}var f=window.meerkat;f.modules.register("formDateInput",{init:b})}(jQuery),function(a){function b(){Modernizr.input.placeholder&&c()}function c(){var b=a("input[data-placeholder-unfocused]");b.each(function(){var b=a(this),c="";b.attr("placeholder")&&(c=b.attr("placeholder")),b.attr("data-placeholder",c),b.attr("placeholder",b.attr("data-placeholder-unfocused")),b.on("focus.formPlaceholders.unfocused",function(){a(this).attr("placeholder",a(this).attr("data-placeholder"))}),b.on("blur.formPlaceholders.unfocused",function(){a(this).val().length>0||a(this).attr("placeholder",a(this).attr("data-placeholder-unfocused"))})})}var d=window.meerkat;d.modules.register("formPlaceholders",{init:b})}(jQuery),function(a){function b(b){function e(a,b){a>=N.steps.length&&b(null);var d=N.steps[a];if(d.navigationId===N.startStepId)b(d,!0);else try{c(d,m),null!=d.onAfterEnter&&d.onAfterEnter(m),I=d,n(),r(d,function(){null!=I.onBeforeLeave&&I.onBeforeLeave(m),null!=I.onAfterLeave&&I.onAfterLeave(m),_.defer(function(){e(a+1,b)})})}catch(f){E.logging.info("[journeyEngine]",f),b(d,!1)}}if(null===b)return i(),!1;a.extend(N,b),a(N.slideContainer+" ."+N.slideClassName).removeClass("active").addClass("hiddenSlide");for(var f=0;f<N.steps.length;f++)N.steps[f]=a.extend({},O,N.steps[f]);if(null===N.startStepId&&""===E.modules.address.getWindowHash())N.startStepId=N.steps[0].navigationId,E.modules.address.setStartHash(N.startStepId),d({navigationId:N.startStepId});else{if(null===N.startStepId){var j=E.modules.address.getWindowHashAt(0),k=l(j);N.startStepId=null===k?N.steps[0].navigationId:j}var m={};m.direction=L,m.isForward=!0,m.isBackward=!1,m.isStartMode=!0;var o=N.steps[0];e(0,function(a,b){null==a&&(a=o),N.startStepId=a.navigationId,b?(I=null,K=null):(h(I,!1,null),g(m,null,!1)),""!==E.modules.address.getWindowHash()&&E.modules.address.getWindowHash()!==N.startStepId?E.modules.address.setHash(N.startStepId):(E.modules.address.setStartHash(N.startStepId),d({navigationId:N.startStepId}))})}E.messaging.publish(H.READY,this)}function c(a,b){a.initialised===!1&&null!=a.onInitialise&&a.onInitialise(b),a.initialised=!0,D(a),null!=a.onBeforeEnter&&a.onBeforeEnter(b)}function d(b){try{b.isStartMode=!1,""===b.navigationId&&(b.navigationId=N.startStepId);var c=l(b.navigationId);if(null===c&&(c=l(0)),c.stepIndex=j(c.navigationId),null===I)b.direction=L,b.isForward=!0,b.isBackward=!1,e(c,b);else{if(b.previousNavigationId=I.navigationId,b.navigationId==I.navigationId)return!1;if(j(c.navigationId)<j(I.navigationId))b.direction=M,b.isForward=!1,b.isBackward=!0,e(c,b);else{if(j(c.navigationId)!=j(I.navigationId)+1)throw"Moving forward too many steps. "+I.navigationId+" to "+b.navigationId;b.direction=L,b.isForward=!0,b.isBackward=!1,"1"==a(N.slideContainer).attr("data-prevalidation-completed")?(a(N.slideContainer).removeAttr("data-prevalidation-completed"),e(c,b)):r(I,function(){e(c,b)})}}}catch(d){return u(),E.modules.address.setHash(I.navigationId),E.logging.info("[journeyEngine]",d),!1}return!0}function e(a,b){null!==I&&null!=I.onBeforeLeave&&I.onBeforeLeave(b),c(a,b),f(a,b)}function f(b,c){function d(){null!=I&&null!=I.onAfterLeave&&I.onAfterLeave(c)}var e=I;null===I||b.slideIndex==I.slideIndex?(d(),null===I&&h(b,!1),I=b,n(),g(c,e,!0)):($slide=a(N.slideContainer+" ."+N.slideClassName+":eq("+I.slideIndex+")"),$slide.fadeOut(250,function(){$slide.removeClass("active").addClass("hiddenSlide"),d(),I=b,n(),h(b,!0,function(){g(c,e,!0)})}))}function g(b,c,d){a("body").attr("data-step",I.navigationId);var e=E.site.title;null!=I.title&&(e=I.title+" - "+e),window.document.title=e,I.slideScrollTo&&null!==I.slideScrollTo&&E.modules.utilities.scrollPageTo(I.slideScrollTo),d===!0&&null!=I.onAfterEnter&&I.onAfterEnter(b),u();var f=H.STEP_INIT;null!==c&&(f=H.STEP_CHANGED),f===H.STEP_INIT&&i(),b.step=I,b.navigationId=I.navigationId,E.messaging.publish(f,b),null!=I.tracking&&E.messaging.publish(F.tracking.TOUCH,I.tracking),null!=I.externalTracking&&E.messaging.publish(F.tracking.EXTERNAL,I.externalTracking)}function h(b,c,d){$slide=a(N.slideContainer+" ."+N.slideClassName+":eq("+b.slideIndex+")"),c===!0?$slide.fadeIn(250,function(){$slide.removeClass("hiddenSlide").addClass("active"),null!=d&&d()}):($slide.removeClass("hiddenSlide").addClass("active"),null!=d&&d())}function i(){a(document.body).removeClass("jeinit")}function j(a){for(var b=0;b<N.steps.length;b++){var c=N.steps[b];if(c.navigationId==a)return b}}function k(){return N.steps.length}function l(a){var b=j(a);return null==b?null:N.steps[b]}function m(){var a=0;return null!==I&&(a=I.navigationId),j(a)}function n(){(_.isNull(K)||j(K.navigationId)<j(I.navigationId))&&(K=I)}function o(){return j(K.navigationId)}function p(){return I}function q(){var a=0,b=m();return b>0&&(a=--b),N.steps[a].navigationId}function r(b,c){var d=!1;if(null!=b.validation){if(b.validation.validate===!0){var e=!1;a("."+N.slideClassName+":eq("+b.slideIndex+"):visible").length>0&&(e=!0);var f=a("."+N.slideClassName+":eq("+b.slideIndex+")");f.removeClass("hiddenSlide").addClass("active"),E.modules.form.markFieldsAsVisible(f);var g=!0;if(f.find("form").each(function(b,c){$element=a(c);var d=$element.valid();d===!1&&(g=!1)}),e===!1&&f.removeClass("active").addClass("hiddenSlide"),g===!1)throw"Validation failed on "+b.navigationId}null!=b.validation.customValidation&&(d=!0,b.validation.customValidation(function(a){if(!a)throw"Custom validation failed on "+b.navigationId;c(!0)}))}return d===!1&&c(!0),!0}function s(){return a(N.slideContainer+" ."+N.slideClassName+":eq("+I.slideIndex+") form").valid()}function t(){a(N.slideContainer).attr("data-locked","1")}function u(){a(N.slideContainer).removeAttr("data-locked")}function v(){return"1"==a(N.slideContainer).attr("data-locked")}function w(b){var c=a(b.currentTarget);return c.is(".disabled, :disabled")?!1:(b.preventDefault(),b.stopPropagation(),void x(c.attr("data-slide-control"),c))}function x(b,c){"undefined"!=typeof c&&c.hasClass("show-loading")&&E.modules.loadingAnimation.showAfter(c);try{if(v())throw"Journey engine action in progress (isLocked)";t();var d=b;if(I.navigationId!==d){var e;if("next"==d||"previous"==d){var f=j(I.navigationId),g=null;if("next"==d){if(e="forward",g=f+1,g>=N.steps.length)throw"No next steps"}else if(e="backward",g=f-1,0>g)throw"No previous steps";d=N.steps[g].navigationId}j(d)==j(I.navigationId)+1&&"forward"==e?r(I,function(){a(N.slideContainer).attr("data-prevalidation-completed","1"),E.modules.address.setHash(d),"undefined"!=typeof c&&E.modules.loadingAnimation.hide(c)}):(E.modules.address.setHash(d),"undefined"!=typeof c&&E.modules.loadingAnimation.hide(c))}}catch(h){u(),E.logging.info("[journeyEngineListener]",h),"undefined"!=typeof c&&E.modules.loadingAnimation.hide(c)}}function y(){E.messaging.subscribe(F.ADDRESS_CHANGE,function(a){return J===!0?void E.modules.address.setHash(I.navigationId):void d({navigationId:a.hashArray[0]})},window),a(document.body).on("click","a[data-slide-control]",w),E.messaging.subscribe(F.WEBAPP_LOCK,function(){J=!0,a("a[data-slide-control]").each(function(){a(this).addClass("disabled").addClass("inactive")})}),E.messaging.subscribe(F.WEBAPP_UNLOCK,function(){J=!1,a("a[data-slide-control]").each(function(){a(this).removeClass("disabled").removeClass("inactive")})})}function z(){return E.modules.form.getData(a("#mainform"))}function A(){return E.modules.form.getSerializedData(a("#mainform"))}function B(b,c){b=b||"Please wait...",c=c||!1;var d=a("#journeyEngineLoading");"1"!==d.attr("data-active")&&(d.attr("data-active","1"),d.find(".message").attr("data-oldtext",d.find(".message").text()).text(b),d.addClass("displayBlock"),c?d.addClass("opacity1"):_.defer(function(){d.addClass("opacity1")}))}function C(){var b=a("#journeyEngineLoading");b.attr("data-active","0"),b.removeClass("opacity1");var c=b.transitionDuration();_.delay(function(){b.removeClass("displayBlock"),b.find(".message").text(b.find(".message").attr("data-oldtext"))},c)}function D(b){a("#"+E.site.vertical+"_journey_stage").val(b.navigationId)}var E=window.meerkat,F=E.modules.events,G=(E.logging.info,{journeyEngine:{STEP_CHANGED:"STEP_CHANGED",STEP_INIT:"STEP_INIT",READY:"JOURNEY_READY"}}),H=G.journeyEngine,I=null,J=!1,K=null,L="DIRECTION_FORWARD",M="DIRECTION_BACKWARD",N={startStepId:null,steps:[],progressBarSteps:[],slideContainer:"#journeyEngineContainer",slideClassName:"journeyEngineSlide",transition:null},O={title:null,navigationId:null,slideId:null,initialised:!1,onInitialise:null,onBeforeEnter:null,onAfterEnter:null,onBeforeLeave:null,onAfterLeave:null,validation:{validate:!0,customValidation:null},slideScrollTo:"html, body",tracking:null,externalTracking:null};E.modules.register("journeyEngine",{init:y,events:G,configure:b,getStepIndex:j,getCurrentStepIndex:m,getFurtherestStepIndex:o,getStepsTotalNum:k,isCurrentStepValid:s,getFormData:z,getSerializedFormData:A,getCurrentStep:p,loadingShow:B,loadingHide:C,gotoPath:x,getPreviousStepId:q})}(jQuery),function(a){function b(){h.messaging.subscribe(i.journeyEngine.STEP_INIT,function(a){n=a.navigationId,d(!0)}),h.messaging.subscribe(i.journeyEngine.STEP_CHANGED,function(a){n=a.navigationId,d(!1)})}function c(b){m=b;var c=99/m.length;l=a(".journeyProgressBar"),a("head").append("<style>.journeyProgressBar>li{ width: "+c+"% }</style>")}function d(a){var b="",c="",d="",e=m.length-1,f=null,g=null,i=!1,j=!1;_.each(m,function(a,h){f="",g="",j=n===a.navigationId||-1!=_.indexOf(a.matchAdditionalSteps,n),j?(f=' class="current"',i=!0):i?g=' tabindex="-1"':f=' class="complete"',o||j||i?c=d="div":(c='a href="javascript:;"'+g+' data-slide-control="'+a.navigationId+'"',d="a"),b+="<li"+f+"><"+c+">"+a.label+"</"+d+"></li>",h==e&&(f="","complete"==n&&(f=" complete"),b+='<li class="end'+f+'"><div></div></li>')}),l.html(b),a&&h.messaging.publish(k.INIT)}function e(){n="complete",l.addClass("complete"),d()}function f(){o=!1,d()}function g(){o=!0,d()}var h=window.meerkat,i=h.modules.events,j={journeyProgressBar:{INIT:"PROGRESS_BAR_INITED"}},k=j.journeyProgressBar,l=null,m=null,n=null,o=!1;h.modules.register("journeyProgressBar",{init:b,render:d,events:j,configure:c,disable:g,enable:f,setComplete:e})}(jQuery),function(a){function b(a){f()!==!1&&a!==i&&(g.html(c(g.html(),a)),j=i,i=a)}function c(a,b){if(f()!==!1){var c=new RegExp(i,"g");return a.replace(c,b)}}function d(){if(f()!==!1){var a=0;try{"undefined"!=typeof h?a=h.modules.transactionId.get():"undefined"!=typeof Track&&Track._getTransactionId&&(a=Track._getTransactionId())}catch(b){}k_button.setCustomVariable(7891,a)}}function e(){a(document).ready(function(){g=a("#kampyle"),f()!==!1&&(g.prependTo(a("#footer .container")),g.attr("data-kampyle-formid")&&(i=g.attr("data-kampyle-formid")),g.on("click","#kampylink",function(a){d(),"undefined"!=typeof k_button&&(a.preventDefault(),k_button.open_ff("site_code=7343362&lang=en&form_id="+i)),h.modules.writeQuote.write({triggeredsave:"kampyle"})}))})}function f(){return 0===g.length?!1:!0}var g,h=window.meerkat,i=(h.modules.events,h.logging.info,""),j="";h.modules.register("kampyle",{init:e,setFormId:b})}(jQuery),function(){function a(){c.site.leavePageWarning.enabled&&c.site.isCallCentreUser===!1&&c.modules.performanceProfiling.isIE8()===!1&&c.modules.performanceProfiling.isIE9()===!1&&(window.onbeforeunload=function(){return f===!1&&c.modules.saveQuote.isAvailable()===!0?c.site.leavePageWarning.message:void 0},c.messaging.subscribe(d.journeyEngine.STEP_CHANGED,function(){f=!1}),c.messaging.subscribe(d.saveQuote.QUOTE_SAVED,function(){f=!0}))}function b(){f=!0}var c=window.meerkat,d=c.modules.events,e=(c.logging.info,{leavePageWarning:{}}),f=(e.leavePageWarning,!0);c.modules.register("leavePageWarning",{init:a,events:e,disable:b})}(jQuery),function(a){function b(a){var b,c;return"undefined"==typeof a?(b=e.modules.journeyEngine.getCurrentStep(),c=b.navigationId):c=a,"ctm"==h.brand?[h.brand,"quote-form",h.vertical,c].join(":"):["ctm:whiteLabel",h.brand,"quote-form",h.vertical,c].join(":")}function c(a,c,d){lpMTagConfig.vars.push(["page","ConversionStage",a]);var f=!1;f=e.modules.transactionId.get(),lpMTagConfig.vars.push(["visitor","transactionID",f]),h.hasOwnProperty("unit")&&(lpMTagConfig.vars.push(["page","unit",h.unit]),lpMTagConfig.vars.push(["unit",h.unit])),c?(lpMTagConfig.vars.push(["page","PageName",b(d)]),lpMTagConfig.vars.push(["page","OrderNumber",f]),lpMTagConfig.loadTag()):lpMTagConfig.vars.push(["page","PageName",b()]),lpSendData()}function d(){a(document).ready(function(a){function b(a){if(!window.lpMTagConfig.lpTagLoaded){("undefined"==typeof a||"object"==typeof a)&&(a=window.lpMTagConfig.lpMTagSrc?window.lpMTagConfig.lpMTagSrc:window.lpMTagConfig.lpTagSrv?window.lpMTagConfig.lpProtocol+"://"+window.lpMTagConfig.lpTagSrv+"/hcp/html/mTag.js":"/hcp/html/mTag.js"),0!==a.indexOf("http")?a=window.lpMTagConfig.lpProtocol+"://"+window.lpMTagConfig.lpServer+a+"?site="+window.lpMTagConfig.lpNumber:a.indexOf("site=")<0&&(a+=a.indexOf("?")<0?"?":"&",a=a+"site="+window.lpMTagConfig.lpNumber);
var b=document.createElement("script");b.setAttribute("type","text/javascript"),b.setAttribute("charset","iso-8859-1"),b.setAttribute("src",a),document.getElementsByTagName("head").item(0).appendChild(b)}}function d(a,b,c){if(arguments.length>0&&(window.lpMTagConfig.vars=window.lpMTagConfig.vars||[],window.lpMTagConfig.vars.push([a,b,c])),"undefined"!=typeof lpMTag&&"undefined"!=typeof window.lpMTagConfig.pluginCode&&"undefined"!=typeof window.lpMTagConfig.pluginCode.simpleDeploy){var d=window.lpMTagConfig.pluginCode.simpleDeploy.processVars();lpMTag.lpSendData(d,!0)}}function j(){var b="",c=a("#"+h.button);c.length&&(b=c.html()),""===b||"<span></span>"==b||"<SPAN></SPAN>"==b?a('[data-livechat="target"]').attr("data-livechat-state",!1):a('[data-livechat="target"]').attr("data-livechat-state",!0)}if(i=a("html").hasClass("lt-ie9"),"undefined"!=typeof VerticalSettings&&"undefined"!=typeof VerticalSettings.liveChat&&!VerticalSettings.isCallCentreUser){window.lpMTagConfig=_.extend(lpMTagConfig,VerticalSettings.liveChat.config),h=_.extend({},VerticalSettings.liveChat.instance),window.lpMTagConfig=window.lpMTagConfig||{},window.lpMTagConfig.vars=window.lpMTagConfig.vars||[],window.lpMTagConfig.dynButton=window.lpMTagConfig.dynButton||[],window.lpMTagConfig.lpProtocol=0===document.location.toString().indexOf("https:")?"https":"http",window.lpMTagConfig.pageStartTime=(new Date).getTime(),window.lpMTagConfig.pluginsLoaded||(window.lpMTagConfig.pluginsLoaded=!1),window.lpMTagConfig.loadTag=function(){for(var a=document.cookie.split(";"),c={},d=0;d<a.length;d++){var e=a[d].substring(0,a[d].indexOf("="));c[e.replace(/^\s+|\s+$/g,"")]=a[d].substring(a[d].indexOf("=")+1)}for(var a=c.HumanClickRedirectOrgSite,c=c.HumanClickRedirectDestSite,d=["lpTagSrv","lpServer","lpNumber","deploymentID"],e=!0,f=0;f<d.length;f++)window.lpMTagConfig[d[f]]||(e=!1,"undefined"!=typeof console&&console.log&&console.log("LivePerson : lpMTagConfig."+d[f]+" is required and has not been defined before lpMTagConfig.loadTag()."));!window.lpMTagConfig.pluginsLoaded&&e&&(window.lpMTagConfig.pageLoadTime=(new Date).getTime()-window.lpMTagConfig.pageStartTime,a="?site="+(a==window.lpMTagConfig.lpNumber?c:window.lpMTagConfig.lpNumber)+"&d_id="+window.lpMTagConfig.deploymentID+"&default=simpleDeploy",b(null!=window.lpMTagConfig.deploymentConfigPath?window.lpMTagConfig.lpProtocol+"://"+window.lpMTagConfig.deploymentConfigPath+a:window.lpMTagConfig.lpProtocol+"://"+window.lpMTagConfig.lpTagSrv+"/visitor/addons/deploy2.asp"+a),window.lpMTagConfig.pluginsLoaded=!0)},window.attachEvent?window.attachEvent("onload",function(){window.lpMTagConfig.disableOnLoad||window.lpMTagConfig.loadTag()}):window.addEventListener("load",function(){window.lpMTagConfig.disableOnLoad||window.lpMTagConfig.loadTag()},!1),window.lpAddMonitorTag=b,window.lpSendData=d;var k=a('div[data-livechat="target"]');if(k.length&&VerticalSettings.liveChat.enabled&&"undefined"!=typeof h.button){var l='<div id="'+h.button+'" data-livechat="button"></div>';k.append(l),a("#"+h.button).on("click","a",function(){lpMTagConfig.dynButton0.actionHook()})}if(i?k.on("propertychange",_.debounce(j,100)):a(document).on("DOMSubtreeModified",'[data-livechat="target"]',_.debounce(j,100)),e.messaging.subscribe(f.journeyEngine.STEP_INIT,function(a){var b=(a.step.slideIndex+1,a.step.stepIndex+1),d=a.navigationId;c(b),e.messaging.subscribe(f.journeyEngine.STEP_CHANGED,function(a){var b=(a.step.slideIndex+1,a.step.stepIndex+1);d=a.navigationId,c(b)})}),j(),k=a('[data-livechat="target"]'),k.length){var m=k.data("livechat-fire");"object"==typeof m&&(g("manual fire",lpMTagConfig.vars),c(m.step,m.confirmation,m.navigationId))}}})}var e=window.meerkat,f=e.modules.events,g=(e.logging.info,e.logging.debug);window.lpMTagConfig=window.lpMTagConfig||{},window.lpMTagConfig.vars=window.lpMTagConfig.vars||[],window.lpSettings=window.lpSettings||{};var h,i;e.modules.register("liveChat",{init:d,fire:c})}(jQuery),function(a){function b(b){return b.each(function(){var b=a(this),c=b.attr("data-loadinganimation");"after"===c?b.next(".spinner").hide():b.find(".spinner").hide()}),b.find(".spinner")}function c(b){return b.each(function(){var b=a(this),c=b.next(".spinner");c.length>0?c.show():(b.attr("data-loadinganimation","after"),b.after(e()))}),b.find(".spinner")}function d(b,c){return b.each(function(){var b=a(this),d=b.find(".spinner");d.length>0?d.show():(b.attr("data-loadinganimation","inside"),c===!0?b.append(e()):b.prepend(e()))}),b.find(".spinner")}function e(){return'<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>'}{var f=window.meerkat;f.logging.info}f.modules.register("loadingAnimation",{hide:b,showAfter:c,showInside:d,getTemplate:e})}(jQuery),function(a){function b(){g.addClass("disabled")}function c(){g.removeClass("disabled")}function d(){g.hasClass("collapsed")===!0&&(h.addClass("in"),g.removeClass("collapsed"),a('<div class="dropdown-backdrop-underlay" />').prependTo(i).on("click",e))}function e(){g.hasClass("collapsed")===!1&&(h.removeClass("in"),g.addClass("collapsed"),a(".dropdown-backdrop-underlay").remove())}function f(){g=a(".xs-nav-bar-toggler"),h=a(".navbar-collapse-menu"),i=a(".dropdown-interactive-base"),g.on("click",function(){g.hasClass("disabled")===!1&&(g.hasClass("collapsed")===!0?d():e())}),j.messaging.subscribe(k.journeyEngine.STEP_CHANGED,function(){j.modules.navbar.close()}),j.messaging.subscribe(k.device.STATE_LEAVE_XS,function(){e()}),j.messaging.subscribe(k.device.STATE_ENTER_XS,function(){a(".navbar-nav .open").length>0&&d()})}{var g,h,i,j=window.meerkat,k=j.modules.events;j.logging.info}j.modules.register("navbar",{init:f,close:e,open:d,enable:c,disable:b})}(jQuery),function(a){function b(){}function c(a){var b={save_email:a.data.value,vertical:d.site.vertical};return d.modules.comms.post({url:"ajax/json/get_user_exists.jsp",data:b,dataType:"json",cache:!1,errorLevel:"silent",onSuccess:function(b){"function"==typeof a.onSuccess&&a.onSuccess(b)},onError:function(){"function"==typeof a.onError&&a.onError()},onComplete:function(){"function"==typeof a.onComplete&&a.onComplete()}})}{var d=window.meerkat,e=(d.modules.events,d.logging.info,d.messaging,{optIn:{}});e.optIn}d.modules.register("optIn",{init:b,events:e,fetch:c})}(jQuery),function(a){function b(){return"1"===w.val()}function c(){return w.val("")}function d(a){f(),w.val("1").valid(),E.paymentEngine.success(a),l(),h()}function e(a){f(),E.paymentEngine.fail(a),k(),i(),a&&a.length>0&&x.modules.errorHandling.error({message:a,page:"paymentGateway.js",description:"meerkat.modules.paymentGateway.fail()",errorLevel:"silent",data:E})}function f(){A=!0,x.modules.dialogs.destroyDialog(modalId)}function g(){var a="cc";return"function"==typeof E.getSelectedPaymentMethod&&(a=E.getSelectedPaymentMethod()),D!==a&&c(),D="cc"==a&&E.handledType.credit||"ba"==a&&E.handledType.bank?a:"",m(),""!==D}function h(){u.slideDown(),v.slideUp()}function i(){u.slideUp(),v.slideDown()}function j(){u.slideUp(),v.slideUp()}function k(){t.slideDown()}function l(){t.slideUp()}function m(){b()?(l(),h()):(c(),k(),j()),n()}function n(){switch(D){case"cc":a("."+E.name+"-credit").slideDown(),w.rules("add",{required:!0,messages:{required:"Please register your credit card details"}});break;default:a("."+E.name+"-credit").slideUp("","",function(){a(this).hide()}),p()}}function o(){E.handledType={credit:!1,bank:!1},D="",m(),a("body").removeClass(E.name+"-active"),p(),c(),a('[data-provide="paymentGateway"]').off("click",'[data-gateway="launcher"]',s),a("#update-premium").off("click."+E.name,g),"undefined"!=typeof E.paymentTypeSelector&&E.paymentTypeSelector.trigger("change"),x.messaging.unsubscribe(z.SUCCESS,B),x.messaging.unsubscribe(z.FAIL,C)}function p(){w.rules("remove","required")}function q(){}function r(b){return E=_.extend({},E,b),a('[data-provide="paymentGateway"]').on("click",'[data-gateway="launcher"]',s),null==E.paymentEngine?!1:(t=a("."+E.name+" .launcher"),u=a("."+E.name+" .success"),v=a("."+E.name+" .fail"),w=a("#"+E.name+"-registered"),E.paymentEngine.setup(E),a("body").addClass(E.name+"-active"),a("#update-premium").on("click."+E.name,g),"object"==typeof E.clearValidationSelectors&&E.clearValidationSelectors.on("change",p),B=x.messaging.subscribe(z.SUCCESS,d),void(C=x.messaging.subscribe(z.FAIL,e)))}function s(){A=!1,x.modules.tracking.recordSupertag("trackCustomPage","Payment gateway popup"),modalId=x.modules.dialogs.show({htmlContent:x.modules.loadingAnimation.getTemplate(),onOpen:E.paymentEngine.onOpen,onClose:function(){A||e()}})}var t,u,v,w,x=window.meerkat,y=(x.modules.events,x.logging.info,{paymentGateway:{SUCCESS:"PAYMENT_GATEWAY_SUCCESS",FAIL:"PAYMENT_GATEWAY_FAIL"}}),z=y.paymentGateway,A=!1,B=null,C=null,D="",E={paymentEngine:null,name:"",handledType:{credit:!1,bank:!1}};x.modules.register("paymentGateway",{init:q,events:y,reset:o,setup:r})}(jQuery),function(){function a(a){var b=(new Date).getTime(),c={name:a,startTime:b};m.push(c)}function b(a){var b=(new Date).getTime(),c=_.findWhere(m,{name:a});if("undefined"==typeof c)return null;var d=m.indexOf(c);m.splice(d,1);var e=b-c.startTime;return e}function c(){return!!navigator.platform.match(/iPhone|iPod|iPad/i)}function d(){return navigator.userAgent.toLowerCase().indexOf("android")>-1}function e(){return navigator.userAgent.toLowerCase().indexOf("chrome")>-1}function f(){return 8===k()?!0:!1}function g(){return 9===k()?!0:!1}function h(){return c()&&navigator.userAgent.match(/OS 5/)?!0:!1}function i(){return c()&&navigator.userAgent.match(/OS 6/)?!0:!1}function j(){return c()&&navigator.userAgent.match(/OS 7/)?!0:!1}function k(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");return b>0?parseInt(a.substring(b+5,a.indexOf(".",b))):null}var l=window.meerkat,m=(l.modules.events,[]),n={LOW:"low",MEDIUM:"medium",HIGH:"high"};l.modules.register("performanceProfiling",{PERFORMANCE:n,startTest:a,endTest:b,isIos5:h,isIos6:i,isIos7:j,isIos:c,isAndroid:d,isChrome:e,isIE8:f,isIE9:g})}(jQuery),function(a){function b(){var b,c=a(this);c.data("fakeplaceholder")||c.is("[type=checkbox]")||c.is("[type=radio]")||c.is("[type=hidden]")||c.is("[type=file]")||(b=a("<div/>",{"class":"fakeplaceholder"}),b.height(c.height()-c.css("padding-bottom").replace("px","")).css({"margin-top":c.css("margin-top"),"margin-bottom":c.css("margin-bottom"),"margin-left":c.css("margin-left"),"margin-right":c.css("margin-right"),"padding-top":c.css("padding-top"),"padding-bottom":c.css("padding-bottom"),"padding-left":c.css("padding-left"),"padding-right":c.css("padding-right"),"font-size":c.css("font-size"),"line-height":c.css("line-height"),color:c.css("color")}).data("for",c),c.before(b.text(c.attr("placeholder"))).data("fakeplaceholder",b),c.val()&&b.hide())}function c(c){if(!h){var d=a(c||document).find("[placeholder]");d.each(b)}}function d(){h||(c(),a(document).on("focus.fakeplaceholder","input[placeholder]",function(){var b=a(this),c=b.data("fakeplaceholder");c.hide()}).on("blur.fakeplaceholder","input[placeholder]",function(){var b=a(this),c=b.data("fakeplaceholder");!b.val()&&c.show()}).on("click.fakeplaceholder",".fakeplaceholder",function(){a(this).data("for").focus()}),g("[Placeholder] Initialised"))}function e(a){placeholder=a.data("fakeplaceholder"),placeholder&&placeholder.length>0&&(a.val()?placeholder.hide():placeholder.show())}var f=window.meerkat,g=f.logging.info,h=Modernizr.input.placeholder;f.modules.register("placeholder",{init:d,initPlaceholders:c,invalidatePlaceholder:e})}(jQuery),function(a){function b(){if(navigator.userAgent.match(/IEMobile\/10\.0/)){var b=document.createElement("style");b.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.getElementsByTagName("head")[0].appendChild(b)}d&&a(document).on("click",'form button[type="submit"]',function(b){b.preventDefault(),a(this).closest("form").submit()}).on("keypress","form input",function(b){13===b.which&&a(this).closest("form").submit()}),a(function(){"undefined"!=typeof FastClick&&FastClick.attach(document.body)})}var c=window.meerkat,d="button"===document.createElement("button").type;c.modules.register("polyfills",{init:b})}(jQuery),function(a){function b(b){var c=a.extend({},e,b),f="",g=null;"url"==c.contentType?g=function(b,e){var g=d.modules.loadingAnimation.getTemplate();return d.modules.comms.get({url:c.contentValue,cache:!0,errorLevel:"silent",onSuccess:function(b){var c="";a(b).find("help").each(function(){""===f&&(f=a(this).attr("header")),c+=a(this).text()}),g=c,e.set("content.text",c),e.set("content.title",f),e.reposition()},onError:function(){e.set("content.text","Apologies. This information did not download successfully."),e.reposition()}}),g}:(g=c.contentValue,f=c.element.attr("data-title"));var h=null;h=c.element.attr("data-trigger")?c.element.attr("data-trigger"):c.showEvent;var i=null;switch(h){case"mouseenter":i="mouseleave";break;case"mouseenter click":case"click mouseenter":i="mouseleave unfocus click";break;default:i="unfocus click"}c.element.qtip({content:{text:g,title:f},position:c.position?c.position:{my:c.element.attr("data-my")?c.element.attr("data-my"):"left center",at:c.element.attr("data-at")?c.element.attr("data-at"):"right center",effect:!1,adjust:{method:"flipinvert none",x:c.element.attr("data-adjust-x")?parseInt(c.element.attr("data-adjust-x")):0,y:c.element.attr("data-adjust-y")?parseInt(c.element.attr("data-adjust-y")):0},viewport:a(window)},show:{event:h},hide:{event:i,fixed:!0,delay:150},style:c.style?c.style:{classes:c.element.attr("data-class")?"popover "+c.element.attr("data-class"):"popover",tip:{corner:!0,width:12,height:6}}})}function c(){d.messaging.subscribe("DYNAMIC_CONTENT_PARSED_POPOVER",function(a){a.element.attr("data-hasqtip")||(b(a),a.element.qtip("toggle",!0))})}var d=window.meerkat,e=(d.logging.info,{element:null,contentType:null,contentValue:null,showEvent:"click",onOpen:function(){},onClose:function(){},onLoad:function(){}});d.modules.register("popovers",{init:c,create:b})}(jQuery),function(a){function b(){a(document).on("change","[data-toggle^=radio] input",function(b){var c,d=a(b.target);c=d.parent().parent().find(".btn"),c.removeClass("active"),d.is(":checked")&&(c=d.parent(),c.addClass("active"))}),a(document).on("focusin","[data-toggle^=radio] input",function(b){var c=a(b.target).parent().parent().find(".btn");c.removeClass("focus"),c=a(b.target).parent(),c.addClass("focus")}),a(document).on("focusout","[data-toggle^=radio] input",function(b){var c=a(b.target).parent().parent().find(".btn");c.removeClass("focus")})}function c(a,b,c){if("undefined"!=typeof a&&0!==a.length){var d=a.find("label:eq("+b+")");return d.contents().filter(function(){return 3===this.nodeType}).each(function(){var a=/[a-z0-9]+/i;if(this.textContent){if(a.test(this.textContent)===!1)return;this.textContent=c}else if(this.innerText){if(a.test(this.innerText)===!1)return;this.innerText=c}}),d}}var d=window.meerkat;d.modules.register("radioGroup",{init:b,changeLabelText:c})}(jQuery),function(a){function b(){t=a(".resultsHeadersBg"),u=a(".resultsContainer"),v=a("#navbar-main").height()}function c(b){if(0===B||b){var c=0;a(".dynamicTopHeaderContent > *").each(function(){a(this).hasClass("simplesHidden")&&y.site.isCallCentreUser||(c+=a(this).height())}),B=c+a(".header-top .container").height()+t.position().top}}function d(){return a(window).scrollTop()>=B?!0:!1}function e(){return a(window).scrollTop()>=B+5?!0:!1}function f(){return u.hasClass("affixed")}function g(){return u.hasClass("affixed-compact")}function h(){return u.hasClass("affixed-absoluted")}function i(){c(),d()===!0?(f()===!1&&(t.addClass("affixed"),u.addClass("affixed affixed-settings")),e()===!0&&g()===!1?(t.addClass("affixed-compact"),u.addClass("affixed-compact"),u.find(".result .productSummary").addClass("compressed")):e()===!1&&g()===!0&&j()):d()===!1&&f()===!0&&k()}function j(){t.removeClass("affixed-compact"),u.removeClass("affixed-compact"),u.find(".result .productSummary").removeClass("compressed")}function k(){j(),t.removeClass("affixed"),u.removeClass("affixed affixed-settings")}function l(){if(f()&&C===!1){C=!0;var b=a(window).scrollTop()+v-u.offset().top;u.find(".result").css("top",b+"px"),u.removeClass("affixed"),u.addClass("affixed-absoluted")}}function m(){h()&&C===!0&&(C=!1,u.removeClass("affixed-absoluted"),u.addClass("affixed"),u.find(".result").css("top",""))}function n(){g()&&a(Results.settings.elements.productHeaders).refreshLayout()}function o(){"xs"!==y.modules.deviceMediaState.get()&&(_.defer(function(){i()}),a(window).on("scroll.resultsHeaderBar",_.throttle(i,25)),w=y.messaging.subscribe(z.device.STATE_ENTER_XS,function(){p()}))}function p(){y.messaging.unsubscribe(w),k(),a(window).off("scroll.resultsHeaderBar"),q()}function q(){x=y.messaging.subscribe(z.device.STATE_LEAVE_XS,function(){y.messaging.unsubscribe(x),r()})}function r(){"xs"===y.modules.deviceMediaState.get()?q():o(),a(Results.settings.elements.resultsContainer).off("pagination.instantScroll").on("pagination.instantScroll",n),a(Results.settings.elements.resultsContainer).off("pagination.scrolling.start").on("pagination.scrolling.start",l),a(Results.settings.elements.resultsContainer).off("pagination.scrolling.end").on("pagination.scrolling.end",m),a(Results.settings.elements.resultsContainer).off("results.view.animation.start").on("results.view.animation.start",l),a(Results.settings.elements.resultsContainer).off("results.view.animation.end").on("results.view.animation.end",m),t.prevAll(".simples-dialogue.toggle").off("click.updateHeaderBarOffset").on("click.updateHeaderBarOffset",function(){_.delay(function(){c(!0)},300)})}function s(){"undefined"!=typeof w&&y.messaging.unsubscribe(w),"undefined"!=typeof x&&y.messaging.unsubscribe(x),a(window).off("scroll.resultsHeaderBar"),a(Results.settings.elements.resultsContainer).off("pagination.instantScroll"),a(Results.settings.elements.resultsContainer).off("pagination.scrolling.start"),a(Results.settings.elements.resultsContainer).off("pagination.scrolling.end"),a(Results.settings.elements.resultsContainer).off("results.view.animation.start"),a(Results.settings.elements.resultsContainer).off("results.view.animation.end")}var t,u,v,w,x,y=window.meerkat,z=y.modules.events,A=(window.meerkat.logging.info,{resultsHeaderBar:{}}),B=(A.resultsHeaderBar,0),C=!1;y.modules.register("resultsHeaderBar",{init:b,registerEventListeners:r,removeEventListeners:s,enableAffixMode:o,disableAffixMode:p})}(jQuery),function(a){function b(){jQuery(document).ready(function(a){A=a("#email-quote-dropdown"),B=a("#email-quote-component"),L=a("#callmeback-save-quote-dropdown"),C=a(".saveQuoteInstructions"),D=a("#save_email"),E=a("#save_password"),F=a("#save_confirm"),G=a("#save_marketing"),H=a(M),I=a(".saveQuotePasswords"),J=a("#saveQuoteSuccess"),K=a(".saveQuoteFields"),D.on("keyup change",e),D.on("blur",function(){a(this).val(a.trim(a(this).val()))}),F.on("keyup change",f),B.on("click",".btn-save-quote",j),A.find(".activator").on("click",c),A.on("click",".btn-cancel",u),d(),i(),n(),v.messaging.subscribe(w.WEBAPP_LOCK,s),v.messaging.subscribe(w.WEBAPP_UNLOCK,r)}),x.subscribe(v.modules.events.contactDetails.email.FIELD_CHANGED,function(a){""===D.val()&&D.val(a.$field.val()).trigger("change")})}function c(){S?(L.hide(),J.hide(),B.show(),K.hide()):(L.hide(),""!==D.val()&&H.hasClass("disabled")&&!a(".saveQuotePasswords").is(":visible")&&D.trigger("change")),0!==L.length&&A.find(".callmeback-feedback").remove()}function d(){null!==B&&0!==B.length&&(setupDefaultValidationOnForm(B),E.length>0&&E.rules("add",{required:!0,minlength:6,messages:{required:"Please enter a password",minlength:jQuery.format("Password must be at least {0} characters")}}),F.length>0&&F.rules("add",{required:!0,equalTo:"#"+E.attr("id"),messages:{required:"Please confirm your password",equalTo:jQuery.format("Password and confirmation password must match")}}))}function e(a){13==a.keyCode||9==a.keyCode?g():N!=D.val()?(q(),clearInterval(O),O=setTimeout(g,800)):""!==E.val()&&""!==E.val()&&p()}function f(){E.valid()&&F.valid()?p():q()}function g(){var a=D.valid();a&&h()}function h(){var a=D.val();N=a,P&&"pending"===P.state()&&P&&P.abort(),q(),v.modules.loadingAnimation.showAfter(D);var b={data:{type:"email",value:a},onComplete:function(){p(),v.modules.loadingAnimation.hide(D)},onSuccess:function(a){Q=a.exists,a.optInMarketing?(n(),G.prop("checked",!0)):o(),v.site.isCallCentreUser||(a.exists?(i("clickSubmit"),m()):(i("createLogin"),l()))},onError:function(){Q=!1,v.site.isCallCentreUser||(i("createLogin"),l())}};P=v.modules.optIn.fetch(b)}function i(b){var c="";switch(b){case"clickSubmit":c="Enter your email address to retrieve your quote at any time.";break;case"createLogin":c="Create a login to retrieve your quote at any time.";break;case"saveAgain":c='Click \'Save Quote\' to update your saved quote <a href="javascript:;" class="btn btn-primary btn-save-quote">Email Quote</a>';break;default:c=v.site.isCallCentreUser?"Please enter the email you want the quote sent to.":"We will check if you have an existing login or help you set one up."}C.html(c),"saveAgain"===b&&(H=a(M),H.html("Save Quote"))}function j(){if(B.valid()){if(R&&"pending"===R.state())return;q();var b=a("#mainform");0===a("#saved_email").length&&v.modules.form.appendHiddenField(b,"saved_email",D.val()),0===a("#saved_marketing").length&&v.modules.form.appendHiddenField(b,"saved_marketing",G.val());var c,d=[];c=-1!=a.inArray(v.site.vertical,["car","ip","life"])?"no":"yes";var e=v.modules.form.getData(B),f=v.modules.journeyEngine.getFormData();d=e.concat(f),d.push({name:"quoteType",value:v.site.vertical}),d.push({name:"vertical",value:v.site.vertical}),d.push({name:"sendConfirm",value:c}),v.modules.loadingAnimation.showAfter(H),S?v.messaging.publish(w.tracking.TOUCH,{touchType:"S",touchComment:null,includeFormData:!0,callback:function(a){k(a.result.success,a.result.transactionId)}}):v.modules.comms.post({url:"ajax/json/save_email_quote_mysql.jsp",data:d,dataType:"json",cache:!1,errorLevel:"silent",onSuccess:function(a){k("OK"===a.result,a.transactionId)},onError:function(){(v.site.isCallCentreUser||""!==E.val()&&""!==F.val())&&p()},onComplete:function(){v.modules.loadingAnimation.hide(H)}})}}function k(b,c){p(),v.modules.loadingAnimation.hide(H),b&&(B.hide(),J.fadeIn(),0===L.length||S||v.modules.callMeBack.hasCallbackBeenRequested()||v.site.isCallCentreUser||(v.modules.callMeBack.prefillForm(L),L.fadeIn()),S||(S=!0,i("saveAgain"),A.find(".activator span:not([class])").html("Save Quote")),"undefined"!=typeof c&&v.modules.transactionId.set(c),"car"==v.site.vertical?Track.startSaveRetrieve(v.modules.transactionId.get(),"Save"):-1!==a.inArray(v.site.vertical,["ip","life","health"])&&v.messaging.publish(w.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Save",transactionID:c}}),v.messaging.publish(z.QUOTE_SAVED))}function l(){I.slideDown()}function m(){I.slideUp()}function n(){G.parents(".row").first().hide()}function o(){G.parents(".row").first().show()}function p(){H.removeClass("disabled")}function q(){H.addClass("disabled")}function r(){A.children(".activator").removeClass("inactive").removeClass("disabled")}function s(){u(),A.children(".activator").addClass("inactive").addClass("disabled")}function t(){return A.is(":visible")}function u(){A.hasClass("open")&&A.find(".activator").dropdown("toggle")}var v=window.meerkat,w=v.modules.events,x=(v.logging.info,v.messaging),y={saveQuote:{QUOTE_SAVED:"SAVE_QUOTE_SAVED"}},z=y.saveQuote,A=null,B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=null,J=null,K=null,L=null,M=".btn-save-quote",N=null,O=null,P=null,Q=null,R=null,S=!1;v.modules.register("saveQuote",{init:b,events:y,close:u,enable:r,disable:s,enableSubmitButton:p,disableSubmitButton:q,isAvailable:t})}(jQuery),function(){function a(){sessionExpiry.poke()}function b(){c.messaging.subscribe(d.journeyEngine.STEP_CHANGED,function(){a()})}var c=window.meerkat,d=c.modules.events;c.modules.register("session",{init:b,poke:a})}(jQuery),function(a){function b(){a(document).ready(c)}function c(){return"function"!=typeof a.fn.noUiSlider?void i("[sliders.js]","noUiSlider plugin is not available."):void a(".slider-control").each(function(){var b,c=a(this),h=c.find(".slider"),i=c.find("input"),j=c.find(".selection"),l=h.data("value"),m=h.data("range").split(","),n=h.data("markers"),o=h.data("legend").split(","),p=h.data("type"),q=!1;b=function(a){j.text(a)},"excess"===p&&(i=a("#health_excess"),i.length>0&&i.val().length>0&&(l=i.val()),b=function(a){j.text(a>0&&a<=o.length?o[a-1]:" ")}),"price"===p&&(i=a("#health_filter_priceMin"),i.length>0&&i.val().length>0&&(l=i.val()),b=function(a){j.text(a==m[0]?"All prices":"from $"+a)},q=function(a,b,c,d){var e=m,g=h.val();m=[b,c],f(h,m,!0);var i=b>g&&g>c,j=e!==m;if(i||j&&d)if(g==e[0])h.val(m[0]);else if(g==e[1])h.val(m[1]);else{var k=(g-e[0])/(e[1]-e[0]),l=m[0]+(m[1]-m[0])*k;h.val(l)}}),"function"==typeof q&&a(this).on(k.EVENT_UPDATE_RANGE,q),h.on(k.EVENT_SET_VALUE,function(a,b){g(h,b)}),h.noUiSlider({range:m,handles:1,step:1,start:l,serialization:{to:[[i,b]],resolution:1},behaviour:"extend-tap"}),d(c,n),e(c,o)})}function d(b,c){var d,e,f;if(c>1){for(c-=1,d=a("<div />"),f=0;c>f;f++)e=a("<div />"),e.addClass("slider-marker"),e.css("width",100/c+"%"),d.append(e);d.find(".slider-marker:first").addClass("first"),d.find(".slider-marker").appendTo(b.find(".noUi-base"))}}function e(b,c){var d,e,f;if(c.length>1){for(d=a("<div />"),f=0;f<c.length;f++)e=a("<div><span><b /></span></div>"),e.addClass("slider-legend"),e.css("width",100/(c.length-1)+"%"),e.find("b").text(c[f]),d.append(e);d.find(".slider-legend:first").addClass("first"),d.find(".slider-legend:last").addClass("last"),d.find(".slider-legend").appendTo(b.find(".slider-legends"))}}function f(a,b){a.noUiSlider({range:b},!0);var c=a.data("markers"),e=a.closest(".slider-control");"undefined"!=typeof c&&e.length>0&&d(e,c)}function g(a,b){a.val(b)}var h=window.meerkat,i=h.logging.info,j=(h.modules.events,{sliders:{EVENT_UPDATE_RANGE:"EVENT_UPDATE_RANGE",EVENT_SET_VALUE:"SET_VALUE"}}),k=j.sliders;h.modules.register("sliders",{init:b,events:j})}(jQuery),function(a){function b(a,b,c,d){var e=[];c&&(e=f.modules.journeyEngine.getFormData()),e.push({name:"quoteType",value:f.site.vertical}),e.push({name:"touchtype",value:a}),e.push({name:"comment",value:b}),f.modules.comms.post({url:"ajax/json/access_touch.jsp",data:e,errorLevel:"silent",onSuccess:function(a){"function"==typeof d&&d(a)}})}function c(a,b){var c;try{if(c="function"==typeof b?b():b,"undefined"==typeof superT)throw"Supertag is undefined";"undefined"==typeof c.brandCode&&(c.brandCode=f.site.tracking.brandCode),null!==c.email&&""!==c.email&&null===c.emailID?d(c.email,c.marketOptIn,c.okToCall,function(b){c.emailID=b,c.email=null,superT[a](c),f.logging.info("Supertag",a,c)}):(superT[a](c),f.logging.info("Supertag",a,c))}catch(e){f.logging.info("Supertag catch",a,c,e)}}function d(a,b,c,d){f.modules.comms.post({url:"ajax/json/get_email_id.jsp",data:{vertical:f.site.vertical,email:a,m:b,o:c},errorLevel:"silent",onSuccess:function(a){d(a.emailId)}})}function e(){a(document).on("click","a[data-tracking-type]",function(b){var c=a(b.currentTarget).attr("data-tracking-type"),d=a(b.currentTarget).attr("data-tracking-value");f.modules.tracking.recordTouch(c,d)}),a(document).on("click","a[data-supertag-method]",function(b){var c=a(b.currentTarget).attr("data-supertag-method"),d=a(b.currentTarget).attr("data-supertag-value");f.modules.tracking.recordSupertag(c,d)}),f.messaging.subscribe(h.TOUCH,function(a){if("undefined"!=typeof a){var c=!1;"undefined"!=typeof a.includeFormData&&a.includeFormData===!0&&(c=!0),b(a.touchType,a.touchComment,c,a.callback)}}),f.messaging.subscribe(h.EXTERNAL,function(a){"undefined"!=typeof a&&c(a.method,a.object)})}var f=window.meerkat,g={tracking:{TOUCH:"TRACKING_TOUCH",EXTERNAL:"TRACKING_EXTERNAL"}},h=g.tracking;f.modules.register("tracking",{init:e,events:g,recordTouch:b,recordSupertag:c})}(jQuery),function(){function a(){d(),jQuery(document).ready(function(a){j=a(".transactionId"),c(i),g()})}function b(){return"undefined"==typeof i&&d(),i}function c(a){i=a,h(),g()}function d(){null!==k.site.initialTransactionId&&"number"==typeof k.site.initialTransactionId&&(i=k.site.initialTransactionId,k.site.initialTransactionId=null)}function e(a,b,d,f){k.modules.comms.post({url:"ajax/json/get_transactionid.jsp",dataType:"json",async:a,errorLevel:"silent",data:{quoteType:k.site.vertical,id_handler:b},onSuccess:function(a){a.transaction_id!==i&&(c(a.transaction_id),k.messaging.publish(m.CHANGED,{transactionId:i})),"function"==typeof f&&f(i)},onError:function(b,c,g){d>0&&n?e(a,data,d-1,f):(k.modules.errorHandling.error({message:"An error occurred fetching a transaction ID. Please check your connection or try again later.",page:"core/transactionId.js module",description:"fetch() AJAX request(s) returned an error: "+c+" "+g+". Original transactionId: "+i,errorLevel:"fatal",data:i}),"function"==typeof f&&f(0))}})}function f(a,b){n=!0,e(!0,"increment_tranId",a,function(a){n=!1,"function"==typeof b&&b(a)})}function g(){try{k.site.isCallCentreUser&&parent.postMessage({eventType:"transactionId",transactionId:i},"*")}catch(a){}}function h(){"number"==typeof i&&i>0&&j.html(i)}var i,j,k=window.meerkat,l=(k.modules.events,k.logging.info,{transactionId:{CHANGED:"CHANGED"}}),m=l.transactionId,n=!1;k.modules.register("transactionId",{init:a,events:l,get:b,set:c,getNew:f})}(jQuery),function(a){function b(a){return a=a.replace(/[^\w\s-]/g,""),a=a.replace(/^\s+/,"").replace(/\s+$/,"").toLowerCase(),a=a.replace(/[-\s]+/g,"-")}function c(b,c,d,e){var f,g=a(b),h=250,i=0,j=!1;"undefined"!=typeof c&&(h=c),"undefined"!=typeof d&&(i=d),g.offset().top<a(window).scrollTop()?a("html, body").animate({scrollTop:g.offset().top+i},h,function(){f=!0,j||"function"!=typeof e||(j=!0,e(this,f))}):(f=!1,"function"==typeof e&&e(this,f))}function d(){var a=new Date;return Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),0,0,0)}{var e=window.meerkat;e.logging.info}jQuery.fn.animateAuto=function(a,b,c){var d,e,f;return this.each(function(g,h){h=jQuery(h),d=h.clone().css({height:"auto",width:"auto"}).appendTo("body"),e=d.css("height"),f=d.css("width"),d.remove(),"height"===a?h.animate({height:e},b,c):"width"===a?h.animate({width:f},b,c):"both"===a&&h.animate({width:f,height:e},b,c)})},e.modules.register("utilities",{slugify:b,scrollPageTo:c,getUTCToday:d})}(jQuery),jQuery.fn.extend({refreshLayout:function(){var a=$("<div>");$(this).append(a),_.defer(function(){$(this).remove(a)})}}),function(){function a(){jQuery(document).ready(function(a){e=a("#mainform")})}function b(a,b){return b?a.valid():e.validate().check(a)===!1?!1:!0}var c=window.meerkat,d=(c.modules.events,c.logging.info,c.messaging,{validation:{}}),e=(d.validation,null);c.modules.register("validation",{init:a,events:d,isValid:b})}(jQuery),jQuery.fn.extend({isValid:function(a){return meerkat.modules.validation.isValid($(this),a)}}),function(){function a(){}function b(a,b,d){var e=[];if(_.extend(e,c.modules.journeyEngine.getFormData()),e.push({name:"quoteType",value:c.site.vertical}),e.push({name:"stage",value:c.modules.journeyEngine.getCurrentStep().navigationId}),"object"==typeof a)for(var f in a)a.hasOwnProperty(f)&&e.push({name:f,value:a[f]});c.modules.comms.post({url:"ajax/write/write_quote.jsp",data:e,dataType:"json",cache:!1,errorLevel:b?"fatal":"silent",onSuccess:function(a){"function"==typeof d&&d(a)}})}{var c=window.meerkat,d=(c.modules.events,c.logging.info,c.messaging,{writeQuote:{}});d.writeQuote}c.modules.register("writeQuote",{init:a,events:d,write:b})}(jQuery);
//# sourceMappingURL=modules.yhoo.min.map