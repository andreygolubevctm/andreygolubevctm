/*!
 * CTM-Platform v0.8.3
 * Copyright 2015 Compare The Market Pty Ltd
 * http://www.comparethemarket.com.au/
 */


!function(a,b){function c(){a(document).ready(function(){d()})}function d(){a(".btn-unsubscribe").on("click",function(){var b=a(this);e.modules.loadingAnimation.showInside(b,!0),e.modules.comms.post({url:"ajax/json/unsubscribe.jsp",errorLevel:"warning",useDefaultErrorHandling:!1,dataType:"json",cache:!1}).done(function(){a(".postUnsubscribeTextContainer, .preUnsubscribeTextContainer").toggleClass("hidden"),a(".unsubscribeButtonContainer").addClass("hidden")}).fail(function(b,c,d){a(".unsubscribeButtonContainer").removeClass("hidden");var f=a.parseJSON(b.responseText);e.modules.errorHandling.error({message:"object"==typeof f&&null!==f?f.error:"An unknown error occurred, please try again.",page:"unsubscribe.js:unsubscribe()",errorLevel:"warning",description:"Unsubscribe Failed: "+d})}).always(function(){e.modules.loadingAnimation.hide(b)})})}var e=window.meerkat,f={};e.modules.register("unsubscribeComponent",{init:c,events:f})}(jQuery);
//# sourceMappingURL=unsubscribe.modules.ctm.min.map