/*!
 * CTM-Platform v0.8.3
 * Copyright 2014 Compare The Market Pty Ltd
 * http://www.comparethemarket.com.au/
 */


!function(a){function b(){a(document).ready(function(){return"home"!==j.site.vertical?!1:(d(),"confirmation"===j.site.pageAction?!1:(c(),("amend"===j.site.pageAction||"latest"===j.site.pageAction||"load"===j.site.pageAction||"start-again"===j.site.pageAction)&&j.modules.form.markInitialFieldsWithValue(a("#mainform")),$e=a("#calldirect-template"),void($e.length&&(templateCallDirect=_.template($e.html())))))})}function c(){}function d(){if("confirmation"===j.site.pageAction)j.modules.journeyEngine.configure(null);else{e(!1);var b=null;j.site.isFromBrochureSite===!0?b=m.startStep.navigationId:j.site.journeyStage.length&&"latest"===j.site.pageAction?b=m.resultsStep.navigationId:j.site.journeyStage.length&&"amend"===j.site.pageAction&&(b=m.startStep.navigationId),a(document).ready(function(){j.modules.journeyEngine.configure({startStepId:b,steps:_.toArray(m)});var a=j.modules.transactionId.get();j.site.isNewQuote===!1?j.messaging.publish(k.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Retrieve",transactionID:parseInt(a,10),vertical:"Home_Contents"}}):j.messaging.publish(k.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Start",transactionID:parseInt(a,10),vertical:"Home_Contents"}})})}}function e(a){f(),g(),a&&j.modules.journeyProgressBar.render(!0)}function f(){var b={method:"trackQuoteForms",object:j.modules.home.getTrackingFieldsObject},c={title:"Cover",navigationId:"start",slideIndex:0,externalTracking:b,onInitialise:function(){var b=a(".slide-feature-emailquote");a("#home_privacyoptin").is(":checked")&&b.addClass("privacyOptinChecked"),a("#home_privacyoptin").on("change",function(){a(this).is(":checked")?b.addClass("privacyOptinChecked"):b.removeClass("privacyOptinChecked")}),j.modules.currencyField.initCurrency()}},d={title:"Occupancy",navigationId:"occupancy",slideIndex:1,tracking:{touchType:"H",touchComment:"Occupancy",includeFormData:!0},externalTracking:b,onInitialise:function(){j.modules.homeOccupancy.initHomeOccupancy(),j.modules.homeBusiness.initHomeBusiness()},onAfterEnter:function(){j.modules.contentPopulation.render(".journeyEngineSlide:eq(1) .snapshot")}},e={title:"Property Details",navigationId:"property",slideIndex:2,tracking:{touchType:"H",touchComment:"Property",includeFormData:!0},externalTracking:b,onInitialise:function(){j.modules.homePropertyDetails.initHomePropertyDetails(),j.modules.homePropertyFeatures.initHomePropertyFeatures(),j.modules.homeCoverAmounts.initHomeCoverAmounts()},onBeforeEnter:function(){j.modules.homePropertyFeatures.toggleSecurityFeatures(),j.modules.homeCoverAmounts.toggleCoverAmountsFields()},onAfterEnter:function(){j.modules.contentPopulation.render(".journeyEngineSlide:eq(2) .snapshot")}},f={title:"You",navigationId:"you",slideIndex:3,tracking:{touchType:"H",touchComment:"You",includeFormData:!0},externalTracking:b,onInitialise:function(){j.modules.homePolicyHolder.initHomePolicyHolder()},onBeforeEnter:function(){j.modules.homePolicyHolder.togglePolicyHolderFields()},onAfterEnter:function(){j.modules.contentPopulation.render(".journeyEngineSlide:eq(3) .snapshot")}},g={title:"Cover History",navigationId:"history",slideIndex:4,tracking:{touchType:"H",touchComment:"History",includeFormData:!0},externalTracking:b,onInitialise:function(){j.modules.homeResults.initPage(),j.modules.homeHistory.initHomeHistory()},onAfterEnter:function(){j.modules.contentPopulation.render(".journeyEngineSlide:eq(4) .snapshot")}},h={title:"Results",navigationId:"results",slideIndex:5,externalTracking:b,onInitialise:function(){j.modules.homeMoreInfo.initMoreInfo(),j.modules.homeEditDetails.initEditDetails(),j.modules.homeFilters.initHomeFilters()},onBeforeEnter:function(){j.modules.journeyProgressBar.hide(),a("#resultsPage").addClass("hidden"),j.modules.homeFilters.updateFilters()},onAfterEnter:function(a){a.isForward===!0&&j.modules.homeResults.get(),j.modules.homeFilters.show()},onBeforeLeave:function(a){a.isBackward===!0&&j.modules.transactionId.getNew(3)},onAfterLeave:function(){j.modules.journeyProgressBar.show(),j.modules.homeFilters.hide(),j.modules.homeEditDetails.hide()}};m={startStep:c,occupancyStep:d,propertyStep:e,policyHoldersStep:f,historyStep:g,resultsStep:h}}function g(){j.modules.journeyProgressBar.configure([{label:"Cover Type",navigationId:m.startStep.navigationId},{label:"Occupancy",navigationId:m.occupancyStep.navigationId},{label:"Property Details",navigationId:m.propertyStep.navigationId},{label:"You",navigationId:m.policyHoldersStep.navigationId},{label:"Cover History",navigationId:m.historyStep.navigationId}])}function h(b){try{b=b||!1;var c=a("#home_property_address_postCode").val(),d=a("#home_property_address_state").val(),e=a("#home_coverType").val(),f=a("#home_startDate").val(),g=a("#home_policyHolder_dob").val();g.length>4&&(g=g.substring(g.length-4));var h=a("input[name=home_occupancy_ownProperty]:checked").val(),k=a("input[name=home_occupancy_principalResidence]:checked").val(),l=a("#home_coverAmounts_rebuildCost").val(),m=a("#home_coverAmounts_replaceContentsCost").val();switch(i()){case"H":m=null;break;case"C":l=null}var n=a("#home_policyHolder_email").val(),o=null,p=a("input[name=home_policyHolder_marketing]:checked").val(),q="MR"==a("#home_policyHolder_title").val()?"M":"F";""===a("#home_policyHolder_title").val()&&(q=null),_.isUndefined(p)||(o=p);var r=null,s=a("input[name=home_policyHolder_oktocall]:checked").val();_.isUndefined(s)||(r=s);var t=j.modules.transactionId.get(),u=j.modules.journeyEngine.getCurrentStepIndex(),v=j.modules.journeyEngine.getFurtherestStepIndex(),w="";switch(u){case 0:w="Cover";break;case 1:w="Occupancy";break;case 2:w="Property";break;case 3:w="You";break;case 4:w="History";break;case 5:w=b===!0?"MoreInfo":"Results"}var x={vertical:"Home_Contents",actionStep:w,transactionID:t,quoteReferenceNumber:t,yearOfBirth:null,postCode:null,state:null,email:null,emailID:null,marketOptIn:null,okToCall:null};return v>j.modules.journeyEngine.getStepIndex("start")&&_.extend(x,{commencementDate:f,postCode:c,state:d,verticalFilter:e}),v>j.modules.journeyEngine.getStepIndex("occupancy")&&_.extend(x,{ownProperty:h,principalResidence:k}),v>j.modules.journeyEngine.getStepIndex("property")&&_.extend(x,{replaceContentsCost:m,rebuildCost:l}),v>j.modules.journeyEngine.getStepIndex("you")&&_.extend(x,{yearOfBirth:g,email:n,marketOptIn:o,okToCall:r,gender:q}),x}catch(y){return!1}}function i(){var b=a("#home_coverType").val();switch(b){case"Home Cover Only":return"H";case"Contents Cover Only":return"C";case"Home & Contents Cover":return"HC"}return""}var j=window.meerkat,k=j.modules.events,l=(j.logging.info,{home:{},WEBAPP_LOCK:"WEBAPP_LOCK",WEBAPP_UNLOCK:"WEBAPP_UNLOCK"}),m=null;j.modules.register("home",{init:b,events:l,initProgressBar:e,getCoverType:i,getTrackingFieldsObject:h})}(jQuery),function(a){function b(b){var c=a("#"+k.name+"_businessType").find("option:selected").text().toLowerCase();"home office"==c||"surgery/consulting rooms"==c?(a(k.businessRooms+", "+k.employees).slideDown(b),a(k.dayCareChildren+", "+k.registeredDayCare).slideUp(b),d()):"day care"==c?(a(k.dayCareChildren+", "+k.registeredDayCare).slideDown(b),a(k.businessRooms+", "+k.employees+", "+k.employeeAmount).slideUp(b)):a(k.businessRooms+", "+k.employees+", "+k.employeeAmount+", "+k.dayCareChildren+", "+k.registeredDayCare).slideUp(b)}function c(c){"Y"==a("input[name="+k.name+"_conducted]:checked").val()?(a(k.businessType).slideDown(c),b(c)):e(c)}function d(b){"Y"==a("input[name="+k.name+"_employees]:checked").val()?a(k.employeeAmount).slideDown(b):a(k.employeeAmount).slideUp(b)}function e(b){a(k.businessType+", "+k.businessRooms+", "+k.employees+", "+k.employeeAmount+", "+k.dayCareChildren+", "+k.registeredDayCare).slideUp(b)}function f(){a(document).ready(function(){a("input[name="+k.name+"_conducted]").on("change",function(){c()}),a("#"+k.name+"_businessType").on("change",function(){b()}),a("input[name="+k.name+"_employees]").on("change",function(){d()})})}function g(){i("[HomeBusiness] Initialised"),f(),a(document).ready(function(){b(0),d(0),c(0)})}var h=window.meerkat,i=(h.modules.events,h.logging.info),j={},k={name:"home_businessActivity",businessRooms:".businessRooms",employees:".hasEmployees",dayCareChildren:".dayCareChildren",registeredDayCare:".registeredDayCare",businessType:".businessType",employeeAmount:".employeeAmount"};h.modules.register("homeBusiness",{initHomeBusiness:g,events:j})}(jQuery),function(a){function b(){e.on("change",function(){f.val(e.val()),null==f.val()&&f.val("")}),f.on("change",function(){e.val(f.val()).blur().keyup()})}function c(){a(document).ready(function(){return"home"!==d.site.vertical?!1:(""!==e.val()&&f.val(e.val()),void(null==f.val()&&f.val("")))}),e.attr("data-attach","true"),b()}var d=window.meerkat,e=a("#home_startDate"),f=a("#home_startDateDropdown_mobile");d.modules.register("homeCommencementDate",{init:c})}(jQuery),function(a){function b(b){"Y"==a("input[name="+m.abovePolicyLimitsElement+"]:checked").val()?a(m.abovePolicyLimitsAmount).slideDown(b):a(m.abovePolicyLimitsAmount).slideUp(b)}function c(b){a(m.rebuildCost+", "+m.replaceContentsCost).find('input[type="hidden"]').each(function(){var b=a(this);""!==b.val()&&b.attr("data-value",b.val()).val("")}),a(m.abovePolicyLimits+", "+m.rebuildCost+", "+m.replaceContentsCost+", "+m.abovePolicyLimitsAmount+", "+m.itemsAway+", "+m.unspecifiedCoverAmount+", "+m.specifiedItems+", "+m.specifyPersonalEffects).slideUp(b)}function d(b){c(b);var d=a(m.coverType).find("option:selected").val();switch(d){case"Home Cover Only":a(m.rebuildCost).slideDown(b),$hidden=a(m.rebuildCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value"));break;case"Contents Cover Only":a(m.replaceContentsCost+", "+m.abovePolicyLimits+", "+m.itemsAway+", "+m.specifyPersonalEffects).slideDown(b),$hidden=a(m.replaceContentsCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value"));break;case"Home & Contents Cover":a(m.rebuildCost+", "+m.replaceContentsCost+", "+m.abovePolicyLimits+", "+m.itemsAway+", "+m.specifyPersonalEffects).slideDown(b),$hidden=a(m.rebuildCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value")),$hidden=a(m.replaceContentsCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value"))}f()}function e(){var b=Number(a(m.bicycle).val()),c=Number(a(m.musical).val()),d=Number(a(m.clothing).val()),e=Number(a(m.jewellery).val()),f=Number(a(m.sporting).val()),g=Number(a(m.photo).val()),h=b+c+d+e+f+g;a(m.coverTotal).val(h).trigger("blur")}function f(b){var c=a(m.coverType).find("option:selected").val(),d=j.modules.homeOccupancy.isPrincipalResidence();"Y"==a("input[name="+m.itemsAwayElement+"]:checked").val()?(a(m.unspecifiedCoverAmount+", "+m.specifyPersonalEffects).slideDown(b),"Y"==a("input[name="+m.specifyPersonalEffectsElement+"]:checked").val()?a(m.specifiedItems).slideDown(b):a(m.specifiedItems).slideUp(b)):g(b),d&&-1!=a.inArray(c,["Home & Contents Cover","Contents Cover Only"])?a(m.itemsAway).slideDown(b):(a(m.itemsAway).slideUp(b),g(b))}function g(b){a(m.unspecifiedCoverAmount+", "+m.specifyPersonalEffects+", "+m.specifiedItems).slideUp(b)}function h(){a(document).ready(function(){a("input[name="+m.abovePolicyLimitsElement+"]").on("change",function(){b()}),a("input[name="+m.itemsAwayElement+"], input[name="+m.specifyPersonalEffectsElement+"]").on("change",function(){f()}),a(m.specifiedValues).on("blur",function(){e()})})}function i(){k("[HomeCoverAmounts] Initialised"),h(),a(document).ready(function(){b(0),f(0)})}var j=window.meerkat,k=(j.modules.events,j.logging.info),l={},m={abovePolicyLimitsElement:"home_coverAmounts_abovePolicyLimits",abovePolicyLimitsAmount:".abovePolicyLimitsAmount",itemsAwayElement:"home_coverAmounts_itemsAway",specifyPersonalEffectsElement:"home_coverAmounts_specifyPersonalEffects",bicycle:"#home_coverAmounts_specifiedPersonalEffects_bicycle",musical:"#home_coverAmounts_specifiedPersonalEffects_musical",clothing:"#home_coverAmounts_specifiedPersonalEffects_clothing",jewellery:"#home_coverAmounts_specifiedPersonalEffects_jewellery",sporting:"#home_coverAmounts_specifiedPersonalEffects_sporting",photo:"#home_coverAmounts_specifiedPersonalEffects_photo",coverTotal:"#home_coverAmounts_coverTotal",principalResidence:"home_occupancy_principalResidence",specifiedItems:"#specifiedItemsRows",abovePolicyLimits:"#abovePolicyLimitsRow",rebuildCost:"#rebuildCostRow",replaceContentsCost:"#replaceContentsCostRow",unspecifiedCoverAmount:"#unspecifiedCoverAmountRow",specifyPersonalEffects:"#specifyPersonalEffectsRow",itemsAway:"#itemsAwayRow",coverType:"#home_coverType",specifiedValues:".specifiedValues"};j.modules.register("homeCoverAmounts",{initHomeCoverAmounts:i,toggleCoverAmountsFields:d,events:l})}(jQuery),function(a){function b(){c(),e()}function c(){m.on("show.bs.dropdown",function(){var b=a("#edit-details-template");b.length>0&&(templateCallback=_.template(b.html()));var c={coverType:a("#home_coverType").val(),icon:j.modules.homeSnapshot.getIcon(),ownsHome:a("#home_occupancy_ownProperty_Y").is(":checked"),isPrincipalResidence:a("#home_occupancy_principalResidence_Y").is(":checked"),businessActivity:a("#home_businessActivity_conducted_Y").is(":checked"),isBodyCorp:a("#home_property_bodyCorp_Y").is(":checked"),hasInternalSiren:a("#home_property_securityFeatures_internalSiren").is(":checked"),hasExternalSiren:a("#home_property_securityFeatures_externalSiren").is(":checked"),hasExternalStrobe:a("#home_property_securityFeatures_strobeLight").is(":checked"),hasBackToBase:a("#home_property_securityFeatures_backToBase").is(":checked"),isSpecifyingPersonalEffects:a("#home_coverAmounts_itemsAway_Y").is(":checked"),specifiedPersonalEffects:a("#home_coverAmounts_specifyPersonalEffects_Y").is(":checked"),bicycles:d("#home_coverAmounts_specifiedPersonalEffects_bicycleentry"),musical:d("#home_coverAmounts_specifiedPersonalEffects_musicalentry"),clothing:d("#home_coverAmounts_specifiedPersonalEffects_clothingentry"),jewellery:d("#home_coverAmounts_specifiedPersonalEffects_jewelleryentry"),sporting:d("#home_coverAmounts_specifiedPersonalEffects_sportingentry"),photography:d("#home_coverAmounts_specifiedPersonalEffects_photoentry"),hasOlderResident:a("#home_policyHolder_anyoneOlder_Y").is(":checked"),hasRetiredOver55:a("#home_policyHolder_over55_Y").is(":checked"),previousCover:a("#home_disclosures_previousInsurance_Y").is(":checked"),previousClaims:a("#home_disclosures_claims_Y").is(":checked")};f(templateCallback(c))}).on("click",".dropdown-container",function(a){a.stopPropagation()})}function d(b){return $el=a(b),"$0"===$el.val()||""===$el.val()?!1:!0}function e(){j.messaging.subscribe(k.WEBAPP_LOCK,function(){g(),m.children(".activator").addClass("inactive").addClass("disabled")}),j.messaging.subscribe(k.WEBAPP_UNLOCK,function(){m.children(".activator").removeClass("inactive").removeClass("disabled")}),j.messaging.subscribe(k.device.STATE_ENTER_XS,function(){g()}),j.messaging.subscribe(k.device.STATE_LEAVE_XS,function(){g()})}function f(a){"xs"==j.modules.deviceMediaState.get()?n=h(a):i(a)}function g(){m.hasClass("open")&&m.find(".activator").dropdown("toggle").end().find(".edit-details-wrapper").empty(),null!==n&&a("#"+n).modal("hide")}function h(b){var c=j.modules.dialogs.show({htmlContent:'<div class="edit-details-wrapper"></div>',hashId:"edit-details",className:"edit-details-modal",closeOnHashChange:!0,onOpen:function(c){var d=a(".edit-details-wrapper",a("#"+c));d.html(b),j.modules.contentPopulation.render("#"+c+" .edit-details-wrapper"),a(".accordion-collapse").on("show.bs.collapse",function(){a(this).prev(".accordion-heading").addClass("active-panel")}).on("hide.bs.collapse",function(){a(this).prev(".accordion-heading").removeClass("active-panel")}),d.show()}});return c}function i(b){var c=a("#edit-details-dropdown .edit-details-wrapper");c.html(b),j.modules.contentPopulation.render("#edit-details-dropdown .edit-details-wrapper"),c.find(".accordion-collapse").addClass("in").end().show()}var j=window.meerkat,k=j.modules.events,l=(j.logging.info,{homeEditDetails:{}}),m=(l.homeEditDetails,a("#edit-details-dropdown")),n=null;j.modules.register("homeEditDetails",{initEditDetails:b,events:l,hide:g})}(jQuery),function(a){function b(){c(),v.removeClass("active"),w.removeClass("active");var b=C.modules.home.getCoverType();if("undefined"!=typeof Results.settings&&Results.settings.hasOwnProperty("displayMode")===!0)switch(Results.getDisplayMode()){case"price":v.addClass("active");break;case"features":w.addClass("active")}var d=a("#home_paymentType").val();x.find(".dropdown-toggle span").text("undefined"==typeof d?x.find(".dropdown-menu a:first").text():x.find('.dropdown-menu a[data-value="'+d+'"]').text()),("H"==b||"HC"==b)&&y.find(".dropdown-toggle span").text("undefined"==typeof J.homeExcess?y.find(".dropdown-menu a:first").text():y.find('.dropdown-menu a[data-value="'+J.homeExcess+'"]').text()),("C"==b||"HC"==b)&&z.find(".dropdown-toggle span").text("undefined"==typeof J.contentsExcess?z.find(".dropdown-menu a:first").text():z.find('.dropdown-menu a[data-value="'+J.contentsExcess+'"]').text())}function c(){var a=C.modules.home.getCoverType();switch(a){case"H":return y.add(A).show(),z.add(B).add(".excess-update").hide(),void y.find("li a").addClass("updateExcess");case"C":return y.add(A).add(".excess-update").hide(),z.add(B).show(),void z.find("li a").addClass("updateExcess");case"HC":return y.add(A).add(z).add(B).add(".excess-update").show(),void z.find("li a").removeClass("updateExcess")}}function d(){var b=C.modules.home.getCoverType(),c=a("#xsFilterBarHomeExcessRow"),d=a("#xsFilterBarContentsExcessRow");switch(b){case"H":return c.show(),void d.hide();case"C":return c.hide(),void d.show();case"HC":return void c.add(d).show()}}function e(c){c.preventDefault();var d=a(c.target);if(d.hasClass("updateExcess"))f(c),b();else{var e=d.parents(".dropdown"),g=d.attr("data-value");e.find(".dropdown-toggle span").text(d.text()),d.parent().siblings().removeClass("active"),d.parent().addClass("active"),e.hasClass("filter-frequency")&&g!==J.frequency&&(J.frequency=g,a("#home_paymentType").val(J.frequency),Results.setFrequency(g),C.messaging.publish(G.CHANGED))}}function f(b){var c=C.modules.home.getCoverType();b.preventDefault();var d,e,f=a(b.target);"update"===f.text()?(d=a(".homeExcess .dropdown-toggle span").text().replace("$",""),e=a(".contentsExcess .dropdown-toggle span").text().replace("$","")):(d=f.text().replace("$",""),e=f.text().replace("$","")),d===J.homeExcess||"H"!=c&&"HC"!=c||(J.homeExcess=d,a("#home_homeExcess").val(d)),e===J.contentsExcess||"C"!=c&&"HC"!=c||(J.contentsExcess=e,a("#home_contentsExcess").val(e)),"H"==c?C.messaging.publish(G.CHANGED,{homeExcess:d}):"C"==c?C.messaging.publish(G.CHANGED,{contentsExcess:e}):C.messaging.publish(G.CHANGED,{contentsExcess:e,homeExcess:d})}function g(){J={display:Results.getDisplayMode(),frequency:a("#home_paymentType").val(),homeExcess:a("#home_homeExcess").val()||J.homeExcess,contentsExcess:a("#home_contentsExcess").val()||J.contentsExcess}}function h(){J={homeExcess:a("#home_baseHomeExcess").val(),contentsExcess:a("#home_baseContentsExcess").val()}}function i(){x.find("li.active").removeClass("active"),x.find("a[data-value="+J.frequency+"]").each(function(){a(this).parent().addClass("active")}),y.find("li.active").removeClass("active"),z.find("li.active").removeClass("active"),_.isEmpty(J.homeExcess)||y.find("a[data-value="+J.homeExcess+"]").each(function(){a(this).parent().addClass("active")}),_.isEmpty(J.contentsExcess)||z.find("a[data-value="+J.contentsExcess+"]").each(function(){a(this).parent().addClass("active")})}function j(){u.slideUp(200,function(){u.addClass("hidden")})}function k(){u.removeClass("hidden").hide().slideDown(200),g(),i()}function l(){u.find("li.dropdown, .dropdown-toggle").addClass("disabled"),v.addClass("disabled").find("a").addClass("disabled"),w.addClass("disabled").find("a").addClass("disabled"),a(".slide-feature-filters").find("a").addClass("disabled").addClass("inactive"),a(".excess-update").find("a").addClass("disabled").addClass("inactive")}function m(){u.find("li.dropdown, .dropdown-toggle").removeClass("disabled"),v.removeClass("disabled").find("a").removeClass("disabled"),w.removeClass("disabled").find("a").removeClass("disabled"),a(".slide-feature-filters").find("a").removeClass("inactive").removeClass("disabled"),a(".excess-update").find("a").removeClass("inactive").removeClass("disabled")}function n(){a(document).on("resultsFetchStart pagination.scrolling.start",function(){l()}),a(document).on("resultsFetchFinish pagination.scrolling.end",function(){m()}),v.on("click",function(c){c.preventDefault(),a(this).hasClass("disabled")||(C.modules.homeResults.switchToPriceMode(!0),b(),C.modules.session.poke())}),w.on("click",function(c){c.preventDefault(),a(this).hasClass("disabled")||(C.modules.homeResults.switchToFeaturesMode(!0),b(),C.modules.session.poke())}),u.on("click",".dropdown-menu a, .excess-update a",e)}function o(){var b=_.template(a("#home-xsFilterBar-template").html()),c=a("#home_homeExcess").val(),d=a("#home_contentsExcess").val(),e=b({homeStartingValue:_.isEmpty(c)?0:c,contentsStartingValue:_.isEmpty(d)?0:d});return I=C.modules.dialogs.show({title:a(this).attr("title"),htmlContent:e,hashId:"xsFilterBar",rightBtn:{label:"Save Changes",className:"btn-sm btn-save",callback:q},closeOnHashChange:!0,onOpen:p}),!1}function p(){"undefined"!=typeof Results.settings&&Results.settings.hasOwnProperty("displayMode")===!0&&(a("#xsFilterBarSortRow input:checked").prop("checked",!1),a("#xsFilterBarSortRow #xsFilterBar_sort_"+Results.getDisplayMode()).prop("checked",!0).change()),a("#xsFilterBarFreqRow input:checked").prop("checked",!1),a("#xsFilterBarFreqRow #xsFilterBar_freq_"+a("#home_paymentType").val()).prop("checked",!0).change();try{C.modules.sliders.init()}catch(b){}d()}function q(){var c=a("#home_paymentType"),d=a("#home_homeExcess"),e=a("#home_contentsExcess"),f={display:a("#xsFilterBarSortRow input:checked").val(),freq:a("#xsFilterBarFreqRow input:checked").val(),homeExcess:a("#xsFilterBarHomeExcessRow  input:checked").val(),contentsExcess:a("#xsFilterBarContentsExcessRow  input:checked").val()};0===Number(f.homeExcess)&&(f.homeExcess=""),0===Number(f.contentsExcess)&&(f.contentsExcess=""),c.val(f.freq),d.val(f.homeExcess),e.val(f.contentsExcess),f.display!==J.display&&("features"===f.display?C.modules.homeResults.switchToFeaturesMode(!0):"price"===f.display&&C.modules.homeResults.switchToPriceMode(!0)),C.modules.dialogs.close(I),C.modules.navMenu.close(),b(),J.frequency!==f.freq&&(J.frequency=f.freq,Results.setFrequency(J.frequency),C.messaging.publish(G.CHANGED)),J.homeExcess!==f.homeExcess&&(J.homeExcess=f.homeExcess,C.messaging.publish(G.CHANGED,{homeExcess:f.homeExcess})),J.contentsExcess!==f.contentsExcess&&(J.contentsExcess=f.contentsExcess,C.messaging.publish(G.CHANGED,{contentsExcess:f.contentsExcess}))}function r(){var b=!a("#navbar-filter").hasClass("hidden");b&&H===!0&&(g(),o())}function s(a){H=_.isUndefined(a)?"xs"===C.modules.deviceMediaState.get():a.isXS===!0,H===!1&&C.modules.dialogs.isDialogOpen(I)&&C.modules.dialogs.close(I)}function t(){E("[HomeFilters] Initialised"),a(document).ready(function(){if(u=a("#navbar-filter"),u.length){v=u.find(".filter-pricemode"),w=u.find(".filter-featuresmode"),x=u.find(".filter-frequency"),y=u.find(".filter-excess.homeExcess"),z=u.find(".filter-excess.contentsExcess"),A=u.find(".filter-label.homeExcessLabel"),B=u.find(".filter-label.contentsExcessLabel"),h(),n();var b;b=y.find(".dropdown-menu"),a("#filter_homeExcessOptions option").each(function(){b.append('<li><a href="javascript:;" data-value="'+this.value+'">'+this.text+"</a></li>")}),b=z.find(".dropdown-menu"),a("#filter_contentsExcessOptions option").each(function(){b.append('<li><a href="javascript:;" data-value="'+this.value+'">'+this.text+"</a></li>")}),b=x.find(".dropdown-menu"),a("#filter_paymentType option").each(function(){b.append('<li><a href="javascript:;" data-value="'+this.value+'">'+this.text+"</a></li>")}),a("#navbar-main .slide-feature-filters a").on("click",function(b){b.preventDefault(),a(this).hasClass("disabled")||r()}),C.messaging.subscribe(D.device.STATE_ENTER_XS,_.bind(s,this,{isXS:!0})),C.messaging.subscribe(D.device.STATE_LEAVE_XS,_.bind(s,this,{isXS:!1})),s()}})}var u,v,w,x,y,z,A,B,C=window.meerkat,D=C.modules.events,E=C.logging.info,F={homeFilters:{CHANGED:"HOME_FILTERS_CHANGED"}},G=F.homeFilters,H=!1,I=!1,J={display:!1,frequency:!1,homeExcess:!1,contentsExcess:!1};C.modules.register("homeFilters",{initHomeFilters:t,events:F,updateFilters:b,hide:j,show:k,disable:l,enable:m,onRequestModal:r,toggleXSFilters:d})}(jQuery),function(a){function b(b){"Y"==a("input[name="+h.name+"_previousInsurance]:checked").val()?a(h.atCurrentAddress+", "+h.pastInsurer+", "+h.insuranceExpiry+", "+h.insuranceCoverLength).slideDown(b):a(h.atCurrentAddress+", "+h.pastInsurer+", "+h.insuranceExpiry+", "+h.insuranceCoverLength).slideUp(b)}function c(){a(document).ready(function(){a("input[name="+h.name+"_previousInsurance]").on("change",function(){b()})})}function d(){f("[HomeHistory] Initialised"),c(),a(document).ready(function(){b(0)})}var e=window.meerkat,f=(e.modules.events,e.logging.info),g={},h={name:"home_disclosures",atCurrentAddress:".atCurrentAddress",pastInsurer:".pastInsurer",insuranceExpiry:".insuranceExpiry",insuranceCoverLength:".insuranceCoverLength"};e.modules.register("homeHistory",{initHomeHistory:d,events:g})}(jQuery),function(a,b){function c(){var b={container:H,hideAction:"fadeOut",showAction:"fadeIn",modalOptions:{className:"modal-breakpoint-wide modal-tight bridgingContainer",openOnHashChange:!1,leftBtn:{label:"All Products",icon:'<span class="icon icon-arrow-left"></span>',callback:function(b){a(b.currentTarget).closest(".modal").modal("hide")}}},runDisplayMethod:n,onBeforeShowBridgingPage:k,onBeforeShowTemplate:z,onBeforeShowModal:z,onAfterShowModal:null,onAfterShowTemplate:l,onBeforeHideTemplate:null,onAfterHideTemplate:m,onClickApplyNow:q,onBeforeApply:null,onApplySuccess:A,retrieveExternalCopy:o,additionalTrackingData:{vertical:"Home_Contents",verticalFilter:a("#home_coverType").val()}};E.modules.moreInfo.initMoreInfo(b),j(),d()}function d(){a(document).on("click",".bridgingContainer .btn-call-actions",function(b){b.preventDefault(),b.stopPropagation();var c=a(this),d=a("#home-call-modal-template");d.length&&(templateCallback=_.template(d.html()));var h=E.modules.moreInfo.getOpenProduct();if("Y"===h.productAvailable){var i=templateCallback(h),j={htmlContent:i,hashId:"call",className:"call-modal",closeOnHashChange:!0,openOnHashChange:!1,onOpen:function(d){a("."+c.attr("data-callback-toggle")).show(),f(".paragraphedContent:visible",".sidebar-right",a("#"+d)),e(),c.hasClass("btn-calldirect")?g(b):t()}};"xs"==E.modules.deviceMediaState.get()&&(j.title="Reference no. "+h.leadNo),C=E.modules.dialogs.show(j)}}).on("click",".call-modal .btn-call-actions",function(b){"xs"!=E.modules.deviceMediaState.get()&&b.preventDefault(),b.stopPropagation();var c=a(this);switch(c.attr("data-callback-toggle")){case"calldirect":a(".callback").hide(),a(".calldirect").show(),g(b);break;case"callback":a(".calldirect").hide(),a(".callback").show(),t()}f(".paragraphedContent:visible",".sidebar-right",c.closest(".modal.in"))}).on("click",".btn-submit-callback",function(b){b.preventDefault();var c=a(this);if(c.closest("form").valid()){var d=E.site.tracking.brandCode.toUpperCase();h(b,{message:d+" - Home Vertical - Call me now",phonecallme:"GetaCall"}),u()}else _.delay(function(){f(".paragraphedContent:visible",".sidebar-right",c.closest(".modal.in"))},200);return!1})}function e(){setupDefaultValidationOnForm(a("#getcallback"));var c="";""!==a("#CrClientName").val()&&a("#CrClientName").val()!==b?c=a("#CrClientName").val():((a("#home_policyHolder_firstName").val()!==b||a("#home_policyHolder_lastName").val()!==b)&&""!==a("#home_policyHolder_firstName").val()||""!==a("#home_policyHolder_lastName").val())&&(c=a("#home_policyHolder_firstName").val()+" "+a("#home_policyHolder_lastName").val()),c.trim(),telNum=a("#home_CrClientTelinput"),telNum.length&&!telNum.val().length&&telNum.val(a("#home_policyHolder_phone").val()),telNum.attr("data-msg-required","Please enter your contact number")}function f(b,c,d){if("xs"!=E.modules.deviceMediaState.get()&&a(c,d).length){var e=a(b,d).outerHeight(),f=a(c,d).outerHeight();e>=f?(a(c,d).css("min-height",e+"px"),a(b,d).css("min-height",e+"px")):(a(c,d).css("min-height",f+"px"),a(b,d).css("min-height",f+"px"))}}function g(a){var b=E.modules.moreInfo.getOpenProduct();if("undefined"==typeof I[b.productId]){s();var c=E.site.tracking.brandCode.toUpperCase();return h(a,{message:c+" - Home Vertical - Call direct",phonecallme:"CallDirect"})}}function h(b,c){var d=E.modules.moreInfo.getOpenProduct();"undefined"!=typeof d&&null!==d&&"undefined"!=typeof d.vdn&&!_.isEmpty(d.vdn)&&d.vdn>0&&(c.vdn=d.vdn);var e=E.site.tracking.brandCode.toUpperCase(),f="",g="",h=a("#CrClientName").val(),i=a("#home_policyHolder_firstName").val(),j=a("#home_policyHolder_lastName").val(),k=a("#CrClientTel").val(),l=a("#home_policyHolder_phone").val();"undefined"!=typeof h?f=h:(""!==i||""!==j)&&(f=i+" "+j),""!==k?g=k:""!==l&&(g=l);var m={source:e+"HOME",leadNo:d.leadNo,client:f,clientTel:a("#home_CrClientTelinput").val()||"",state:a("#home_property_address_state").val(),brand:d.productId.split("-")[0],transactionId:E.modules.transactionId.get()},n=a.extend(m,c),o=a(b.target);return E.modules.loadingAnimation.showInside(o,!0),E.modules.comms.post({url:"ajax/write/lead_feed_save.jsp",data:n,dataType:"json",cache:!1,errorLevel:"GetaCall"===c.phonecallme?"warning":"silent",onSuccess:function(){if("GetaCall"==c.phonecallme){E.modules.dialogs.show({title:"Call back request recorded",htmlContent:"<p><strong>Thank you!</strong></p><p>Your Call request has been sent to the insurer's message centre who will be in touch as soon as possible.</p>",hashId:"call-back-success",openOnHashChange:!1,closeOnHashChange:!0,onClose:function(){a(".modal").modal("hide"),E.modules.moreInfo.isBridgingPageOpen()&&E.modules.moreInfo.close()}})}},onComplete:function(){"CallDirect"==c.phonecallme&&(I[d.productId]=!0),E.modules.loadingAnimation.hide(o)}})}function i(){var b=a(".quote-summary-table");b.find("tbody tr").remove();var c="",d=function(a,b){b=b.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");var d=["<tr>","<td>",a,"</td>",'<td class="cover-amount">',"$<span>",b,"</span>","</td>","</tr>"].join("");c+=d},e=E.modules.home.getCoverType();if("H"==e||"HC"==e){var f=parseInt(a("#home_coverAmounts_rebuildCost").val());d("Home Cover",f)}if("C"==e||"HC"==e){var g=parseInt(a("#home_coverAmounts_replaceContentsCost").val());if(d("Contents Cover",g),"Y"==a(".itemsAway :checked").val()){var h=parseInt(a("#home_coverAmounts_unspecifiedCoverAmount").val());"Y"==a(".specifyPersonalEffects :checked").val()&&a('.specifiedItems input[type="hidden"]').each(function(){var a=this.value||0;h+=parseInt(a)}),d("Personal Effects",h)}}b.append(c)}function j(){E.messaging.subscribe(F.ADDRESS_CHANGE,function(a){"xs"!=E.modules.deviceMediaState.get()&&-1==a.hash.indexOf("results/moreinfo")&&E.modules.moreInfo.hideTemplate(H)}),E.messaging.subscribe(F.device.STATE_ENTER_XS,function(){E.modules.moreInfo.isBridgingPageOpen()&&E.modules.moreInfo.close(),"undefined"!=typeof C&&a("#"+C).modal("hide")}),E.messaging.subscribe(F.device.STATE_LEAVE_XS,function(){E.modules.moreInfo.isModalOpen()&&E.modules.moreInfo.close(),"undefined"!=typeof C&&a("#"+C).modal("hide")}),E.messaging.subscribe(F.errorHandling.OK_CLICKED,function(){(E.modules.moreInfo.isBridgingPageOpen()||E.modules.moreInfo.isModalOpen())&&E.modules.moreInfo.close()})}function k(){"xs"!=E.modules.deviceMediaState.get()&&a(".resultsContainer, #navbar-compare, #navbar-filter").hide()}function l(){("lg"==E.modules.deviceMediaState.get()||"md"==E.modules.deviceMediaState.get())&&f(".paragraphedContent",".moreInfoRightColumn",H)}function m(){a(".resultsContainer, #navbar-filter").show()
}function n(){"xs"!=E.modules.deviceMediaState.get()?E.modules.moreInfo.showTemplate(H):E.modules.moreInfo.showModal(),E.modules.address.appendToHash("moreinfo")}function o(a){return y(),E.modules.comms.get({url:"ajax/json/get_scrapes.jsp",cache:!0,data:{type:"homeBrandScrapes",code:a.productId,group:"home"},errorLevel:"silent",onSuccess:function(a){E.modules.moreInfo.setDataResult(a)}})}function p(b){try{return"transferring.jsp?url="+escape(b.quoteUrl)+"&trackCode="+b.trackCode+"&brand="+escape(b.productDes)+"&msg="+a("#transferring_"+b.productId).text()+"&transactionId="+E.modules.transactionId.get()}catch(c){return E.modules.errorHandling.error({errorLevel:"warning",message:"An error occurred. Sorry about that!<br /><br /> To purchase this policy, please contact the provider "+(""!==b.telNo?" on "+b.telNo:"directly")+" quoting "+b.leadNo+", or select another policy.",page:"homeMoreInfo.js:getTransferUrl",description:"Unable to generate transferring URL",data:b}),""}}function q(b,c){if(K===!0&&J.length){var d=a("#special-conditions-template");d.length&&(templateCallback=_.template(d.html()));var e=E.modules.moreInfo.getOpenProduct();e.specialConditionsRule=J;{var f=templateCallback(e);E.modules.dialogs.show({htmlContent:f,hashId:"special-conditions",title:"Special Conditions Confirmation",closeOnHashChange:!0,openOnHashChange:!1,onOpen:function(d){a(".btn-proceed-to-insurer",a("#"+d)).off("click.proceed").on("click.proceed",function(){return r(b,d,c)}),a(".btn-back",a("#"+d)).off("click.goback").on("click.goback",function(){a(".modal").modal("hide"),E.modules.moreInfo.isBridgingPageOpen()&&E.modules.moreInfo.close()})},onClose:function(){E.modules.moreInfo.applyCallback(!1)}})}return!1}return r(b,!1,c)}function r(b,c,d){return c&&a("#"+c).modal("hide"),_.isEmpty(b.quoteUrl)?(E.modules.errorHandling.error({errorLevel:"warning",message:"An error occurred. Sorry about that!<br /><br /> To purchase this policy, please contact the provider "+(""!==b.telNo?" on "+b.telNo:"directly")+" quoting "+b.leadNo+", or select another policy.",page:"homeMoreInfo.js:proceedToInsurer",description:"Insurer did not provide quoteUrl in results object.",data:b}),!1):(w(b),d(!0),!0)}function s(){var a=0;for(var b in I)I.hasOwnProperty(b)&&a++;a>1||v("CrCallDir")}function t(){v("CrCallBac")}function u(){v("CrCallBacSub")}function v(b){var c=E.modules.moreInfo.getOpenProduct();E.messaging.publish(F.tracking.EXTERNAL,{method:"trackBridgingClick",object:{vertical:"Home_Contents",type:b,quoteReferenceNumber:c.leadNo,transactionID:E.modules.transactionId.get(),productID:c.productId,verticalFilter:a("#home_coverType").val()}}),E.modules.session.poke()}function w(b){var c=E.modules.transactionId.get();E.messaging.publish(F.tracking.EXTERNAL,{method:"trackHandover",object:{quoteReferenceNumber:b.leadNo,transactionID:c,productID:b.productId,productBrandCode:b.brandCode,vertical:"Home_Contents",verticalFilter:a("#home_coverType").val()}}),E.messaging.publish(F.tracking.EXTERNAL,{method:"trackHandoverType",object:{type:"ONLINE",quoteReferenceNumber:b.leadNo,transactionID:c,productID:b.productId,productBrandCode:b.brandCode,vertical:"Home_Contents",verticalFilter:a("#home_coverType").val()}}),E.messaging.publish(F.tracking.TOUCH,{touchType:"A"}),E.modules.session.poke()}function x(){E.messaging.publish(F.tracking.EXTERNAL,{method:"trackQuoteForms",object:_.bind(E.modules.home.getTrackingFieldsObject,this,!0)})}function y(){var a=E.modules.home.getCoverType();switch(a){case"H":return void(D="home");case"C":return void(D="contents");case"HC":return void(D="homeandcontents")}}function z(b){x(),i(),"undefined"!=typeof b&&"undefined"!=typeof b.scrapes&&b.scrapes.length&&a.each(b.scrapes,function(b,c){""!==c.html&&-1!=c.cssSelector.indexOf(D)&&a(c.cssSelector.replace("-"+D,"")).html(c.html)}),a(".contentRow li").each(function(){a(this).prepend('<span class="icon icon-angle-right"></span>')})}function A(){}function B(a,b){K=a,J=b}var C,D,E=window.meerkat,F=E.modules.events,G={homeMoreInfo:{}},H=(G.homeMoreInfo,a(".bridgingContainer")),I={},J="",K=!1;E.modules.register("homeMoreInfo",{initMoreInfo:c,events:G,setSpecialConditionDetail:B,runDisplayMethod:n,getTransferUrl:p})}(jQuery),function(a){function b(){return"Y"==a("input:radio[name="+n.principalResidence+"]:checked").val()?!0:!1}function c(c){{var e=a("input:radio[name="+n.ownProperty+"]:checked").val(),f=(a(n.howOccupied).find("option:selected").val(),b());a(n.howOccupied)}f||"undefined"!=typeof e&&"N"!=e?f?(a(n.howOccupiedRow).slideUp(c),a(n.whenMovedInYearRow).slideDown(c),d(c)):(a(n.howOccupiedRow).slideDown(c),a(n.whenMovedInYearRow+", "+n.whenMovedInMonthRow).slideUp(c)):(a(n.howOccupiedRow).slideUp(c),a(n.whenMovedInYearRow+", "+n.whenMovedInMonthRow).slideUp(c))}function d(b){var c=a('select[name="'+n.whenMovedInYear+'"]').val(),d=d,e=a("#"+n.whenMovedInMonth),f=a("#help_504"),g=12;if(e.empty().append(a("<option>",{value:""}).text("Please Select...")),c==l&&(g=m),c>=l-2){a(n.whenMovedInMonthRow).slideDown(b),f.slideDown(b);for(var h=1;g>=h;h++)e.append(a("<option>",{value:h}).text(k[h-1]));a('select[name="'+n.whenMovedInMonth+'"]').val(""!==d&&g>=d?d:"")}else a(n.whenMovedInMonthRow).slideUp(b),f.slideUp(b)}function e(){a(document).ready(function(){a("#"+n.whenMovedInYear).on("change",function(){d()}),a("input[name="+n.name+"_ownProperty], "+n.howOccupied).on("change",function(){c()}),a("input[name="+n.principalResidence+"]").on("change",function(){c()})})}function f(){h("[HomeOccupancy] Initialised"),e(),a(document).ready(function(){c(0)})}var g=window.meerkat,h=(g.modules.events,g.logging.info),i={},j=new Date,k=["January","February","March","April","May","June","July","August","September","October","November","December"],l=j.getFullYear(),m=j.getMonth()+1,n={name:"home_occupancy",ownProperty:"home_occupancy_ownProperty",principalResidence:"home_occupancy_principalResidence",whenMovedInYear:"home_occupancy_whenMovedIn_year",whenMovedInMonth:"home_occupancy_whenMovedIn_month",howOccupied:"#home_occupancy_howOccupied",whenMovedInYearRow:".whenMovedInYear",whenMovedInMonthRow:".whenMovedInMonth",howOccupiedRow:".howOccupied"};g.modules.register("homeOccupancy",{initHomeOccupancy:f,events:i,isPrincipalResidence:b})}(jQuery),function(a){function b(b){var c=h.modules.homeOccupancy.isPrincipalResidence();"Y"==a("input[name="+k.anyoneOlder+"]:checked").val()&&c?a(k.oldestDOBRow).slideDown(b):a(k.oldestDOBRow).slideUp(b),d(b)}function c(c){var e=h.modules.homeOccupancy.isPrincipalResidence();e?(a(k.anyoneOlderRow+", "+k.otherOccupantsRow).slideDown(c),b(c),d(c)):a(k.anyoneOlderRow+", "+k.over55+", "+k.oldestDOBRow+", "+k.otherOccupantsRow).slideUp(c)}function d(b){var c=h.modules.homeOccupancy.isPrincipalResidence(),d=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,f=a("#"+k.name+"_dob"),g=a("#"+k.name+"_jointDob"),i=a("#"+k.name+"_oldestPersonDob"),j=a("input[name="+k.anyoneOlder+"]:checked").val();c&&(f.val().match(d)&&e(f.val())>=55||g.val().match(d)&&e(g.val())>=55||"Y"===j&&i.val().match(d)&&e(i.val())>=55)?a(k.over55).slideDown(b):a(k.over55).slideUp(b)}function e(a){var b=new Date,c=a.split("/").reverse(),d=b.getFullYear()-parseInt(c[0],10),e=b.getMonth()+1-parseInt(c[1],10);return(0>e||0===e&&b.getDate()<parseInt(c[2],10))&&d--,d}function f(){a(document).ready(function(){a("input[name="+k.anyoneOlder+"]").on("change",function(){b()}),a("#"+k.name+"_dob, #"+k.name+"_jointDob, #"+k.name+"_oldestPersonDob").on("change",function(){b(),d()}),k.toggleJointPolicyHolder.on("click",function(){k.jointPolicyHolder.is(":visible")?(k.jointPolicyHolder.slideUp(),k.addPolicyHolderBtn.slideDown()):(k.jointPolicyHolder.slideDown(),k.addPolicyHolderBtn.slideUp()),d()})})}function g(){i("[HomePolicyHolder] Initialised"),f(),a(document).ready(function(){c(0),b(0),d(0),k.jointPolicyHolder.hide(),(""!==a("#home_policyHolder_jointFirstName").val()||""!==a("#home_policyHolder_jointLastName").val()||""!==a("#home_policyHolder_jointDob").val()||""!==a("#home_policyHolder_jointDob").val())&&k.toggleJointPolicyHolder.click()})}var h=window.meerkat,i=(h.modules.events,h.logging.info),j={},k={name:"home_policyHolder",anyoneOlder:"home_policyHolder_anyoneOlder",oldestDOBRow:"#oldest_person_DOB",anyoneOlderRow:"#anyoneOlder",principalResidence:"home_occupancy_principalResidence",over55:".over55",otherOccupantsRow:"#home_policyHolder_other_occupants",toggleJointPolicyHolder:a(".toggleJointPolicyHolder"),jointPolicyHolder:a("#jointPolicyHolder"),addPolicyHolderBtn:a(".addPolicyHolderBtn")};h.modules.register("homePolicyHolder",{initHomePolicyHolder:g,togglePolicyHolderFields:c,events:j})}(jQuery),function(a){function b(b){"other"==a("#"+i.propertyType).find("option:selected").text().toLowerCase()?a(i.bestDescribesHome).slideDown(b):a(i.bestDescribesHome).slideUp(b)}function c(b){parseInt(a("#"+i.yearBuilt).find("option:selected").val())<=1914?a(i.heritage).slideDown(b):a(i.heritage).slideUp(b)}function d(){a(document).ready(function(){a("#"+i.propertyType).on("change",function(){b()}),a("#"+i.yearBuilt).on("change",function(){c()})})}function e(){g("[HomeProperties] Initialised"),d(),a(document).ready(function(){b(0),c(0)})}var f=window.meerkat,g=(f.modules.events,f.logging.info),h={},i={name:"home_property",propertyType:"home_property_propertyType",yearBuilt:"home_property_yearBuilt",bestDescribesHome:".bestDescribesHome",heritage:".heritage"};f.modules.register("homePropertyDetails",{initHomePropertyDetails:e,events:h})}(jQuery),function(a){function b(){var b=a(g.coverType).find("option:selected").val();switch(b){case"Contents Cover Only":case"Home & Contents Cover":a(g.name).slideDown();break;default:a(g.name).slideUp()}}function c(){e("[HomePropertiesFeatures] Initialised"),a(document).ready(function(){b(0)})}var d=window.meerkat,e=(d.modules.events,d.logging.info),f={},g={name:"#home_property",coverType:"#home_coverType"};d.modules.register("homePropertyFeatures",{initHomePropertyFeatures:c,toggleSecurityFeatures:b,events:f})}(jQuery),function(a){function b(){v=a("#resultsPage"),d(),Features.init(),x.modules.compare.initCompare(),e(),g()}function c(){g(),w!==x.modules.deviceMediaState.get()&&(Results.view.calculateResultsContainerWidth(),Features.clearSetHeights(),Features.balanceVisibleRowsHeight()),Results.pagination.refresh()}function d(){try{var a="price";"undefined"!=typeof x.site&&"undefined"!=typeof x.site.resultOptions&&(a="features"==x.site.resultOptions.displayMode?"features":"price"),Results.init({url:"ajax/json/home/results.jsp",runShowResultsPage:!1,paths:{price:{annual:"price.annual.total",monthly:"price.monthly.total"},availability:{product:"productAvailable"},productId:"productId"},show:{savings:!1,featuresCategories:!1,nonAvailableProducts:!1,unavailableCombined:!0},availability:{product:["equals","Y"]},render:{templateEngine:"_",features:{mode:"populate",headers:!1,numberOfXSColumns:1},dockCompareBar:!1},displayMode:a,pagination:{mode:"page",touchEnabled:Modernizr.touch,emptyContainerFunction:l,afterPaginationRefreshFunction:m},sort:{sortBy:"price.annually"},frequency:"annual",animation:{results:{individual:{active:!1},delay:500,options:{easing:"swing",duration:1e3}},shuffle:{active:!0,options:{easing:"swing",duration:1e3}},filter:{reposition:{options:{easing:"swing"}}}},elements:{features:{values:".content",extras:".children"}},templates:{pagination:{pageText:"Product {{=currentPage}} of {{=totalPages}}"}},dictionary:{valueMap:[{key:"Y",value:"<span class='icon icon-tick'></span>"},{key:"N",value:"<span class='icon icon-cross'></span>"},{key:"R",value:"Restricted / Conditional"},{key:"AI",value:"Additional Information"},{key:"O",value:"Optional"},{key:"L",value:"Limited"},{key:"SCH",value:"As shown in schedule"},{key:"NA",value:"Non Applicable"},{key:"E",value:"Excluded"},{key:"NE",value:"No Exclusion"},{key:"NS",value:"No Sub Limit"},{key:"OTH",value:""}]},rankings:{paths:{rank_productId:"productId",rank_premium:"price.annual.total"},filterUnavailableProducts:!1},incrementTransactionId:!1})}catch(b){Results.onError("Sorry, an error occurred initialising page","results.tag","meerkat.modules.homeResults.init(); "+b.message,b)}}function e(){a(document.body).on("click","a.offerTerms",q),a(Results.settings.elements.resultsContainer).on("click",".result-row",t),x.messaging.subscribe(y.affix.AFFIXED,function(){a("#resultsPage").css("margin-top","35px")}),x.messaging.subscribe(y.affix.UNAFFIXED,function(){a("#resultsPage").css("margin-top","0")}),x.messaging.subscribe(y.homeFilters.CHANGED,function(a){a&&(a.hasOwnProperty("homeExcess")||a.hasOwnProperty("contentsExcess"))?(A="Load",Results.settings.incrementTransactionId=!0,k(),Results.settings.incrementTransactionId=!1):A="Refresh",x.modules.session.poke()}),x.messaging.subscribe(z.RESULTS_ERROR,function(){_.delay(function(){x.modules.journeyEngine.gotoPath("previous")},1e3)}),x.messaging.subscribe(Results.model.moduleEvents.RESULTS_MODEL_UPDATE_BEFORE_FILTERSHOW,function(){f()}),a(Results.settings.elements.resultsContainer).on("featuresDisplayMode",function(){Features.buildHtml()}),a(Results.settings.elements.resultsContainer).on("noFilteredResults",function(){Results.view.show()}),a(document).on("resultsLoaded",n),a(document).on("resultsReturned",function(){x.modules.utilities.scrollPageTo(a("header")),a(".featuresHeaders .expandable.expanded").removeClass("expanded").addClass("collapsed")}),a(document).on("resultsFetchStart",function(){x.modules.journeyEngine.loadingShow("getting your quotes"),a("#resultsPage, .loadingDisclaimerText").removeClass("hidden"),Results.pagination.hide()}),a(document).on("resultsFetchFinish",function(){a(Results.settings.elements.page).show(),x.modules.journeyEngine.loadingHide(),a(".loadingDisclaimerText").addClass("hidden"),"price"!==Results.getDisplayMode()?Results.pagination.show():a(document.body).removeClass("priceMode").addClass("priceMode");var b=0;a.each(Results.model.returnedProducts,function(){"Y"===this.productAvailable&&"CURR"!==this.productId&&b++}),0===b&&_.isArray(Results.model.returnedProducts)&&Results.model.returnedProducts.length>0&&o()}),a(document).on("populateFeaturesStart",function(){x.modules.performanceProfiling.startTest("results")}),a(Results.settings.elements.resultsContainer).on("populateFeaturesEnd",function(){var b,c=x.modules.performanceProfiling.endTest("results");b=800>c?x.modules.performanceProfiling.PERFORMANCE.HIGH:8e3>c&&x.modules.performanceProfiling.isIE8()===!1?x.modules.performanceProfiling.PERFORMANCE.MEDIUM:x.modules.performanceProfiling.PERFORMANCE.LOW,Results.setPerformanceMode(b);var d=x.modules.home.getCoverType();"H"===d?(a.each(a(".featuresList"),function(){a(this).children(".homeFeature").appendTo(a(this))}),a.each(a(".featuresList"),function(){a(this).children(".contentsFeature").appendTo(a(this))})):(a.each(a(".featuresList"),function(){a(this).children(".contentsFeature").appendTo(a(this))}),a.each(a(".featuresList"),function(){a(this).children(".homeFeature").appendTo(a(this))}))}),a(document).on("FeaturesRendered",function(){a(Features.target+" .expandable > "+Results.settings.elements.features.values).on("mouseenter",function(){var b=a(this).attr("data-featureId"),c=a(Features.target+' [data-featureId="'+b+'"]');c.addClass(Results.settings.elements.features.expandableHover.replace(/[#\.]/g,""))}).on("mouseleave",function(){var b=a(this).attr("data-featureId"),c=a(Features.target+' [data-featureId="'+b+'"]');c.removeClass(Results.settings.elements.features.expandableHover.replace(/[#\.]/g,""))})})}function f(a){a=a||Results.model.returnedProducts,_.each(a,function(a){_.isUndefined(a.price)||(_.isUndefined(a.price.annual)||_.isUndefined(a.price.annual.total)||(a.price.annual.totalFormatted=x.modules.currencyField.formatCurrency(a.price.annual.total,{roundToDecimalPlace:0})),_.isUndefined(a.price.monthly)||(_.isUndefined(a.price.monthly.total)||(a.price.monthly.totalFormatted=x.modules.currencyField.formatCurrency(a.price.monthly.total,{roundToDecimalPlace:2})),_.isUndefined(a.price.monthly.amount)||(a.price.monthly.amountFormatted=x.modules.currencyField.formatCurrency(a.price.monthly.amount,{roundToDecimalPlace:2})),_.isUndefined(a.price.monthly.firstPayment)||(a.price.monthly.firstPaymentFormatted=x.modules.currencyField.formatCurrency(a.price.monthly.firstPayment,{roundToDecimalPlace:2})))),_.isUndefined(a.HHB)||_.isUndefined(a.HHB.excess)||_.isUndefined(a.HHB.excess.amount)||(a.HHB.excess.amountFormatted=x.modules.currencyField.formatCurrency(a.HHB.excess.amount,{roundToDecimalPlace:0})),_.isUndefined(a.HHC)||_.isUndefined(a.HHC.excess)||_.isUndefined(a.HHC.excess.amount)||(a.HHC.excess.amountFormatted=x.modules.currencyField.formatCurrency(a.HHC.excess.amount,{roundToDecimalPlace:0}))})}function g(){h(),x.messaging.subscribe(y.device.STATE_ENTER_XS,function(){"results"===x.modules.journeyEngine.getCurrentStep().navigationId&&h()}),x.messaging.subscribe(y.device.STATE_LEAVE_XS,function(){i(),Results.pagination.setCurrentPageNumber(1),Results.pagination.resync()})}function h(){"xs"===x.modules.deviceMediaState.get()&&"features"===Results.getDisplayMode()&&(Results.view.startColumnWidthTracking(a(window),Results.settings.render.features.numberOfXSColumns,!1),Results.pagination.setCurrentPageNumber(1),Results.pagination.resync())}function i(){Results.view.stopColumnWidthTracking()}function j(){w=x.modules.deviceMediaState.get()}function k(){v.removeClass("coverTypeContents coverTypeHome");var a=x.modules.home.getCoverType();"H"===a?v.removeClass("coverTypeContents").addClass("coverTypeHome"):"C"===a&&v.addClass("coverTypeContents").removeClass("coverTypeHome"),Results.get()}function l(a){a.find(".btn-pagination").parent("li").remove(),a.find(".pagination-label").addClass("hidden")}function m(a){a.find(".btn-pagination").length>0&&a.find(".pagination-label").removeClass("hidden")}function n(){switch(h(),Results.getDisplayMode()){case"features":s(!1);break;default:B=!0,r(!1)}}function o(){x.modules.dialogs.show({htmlContent:a("#no-results-content")[0].outerHTML}),x.modules.hasOwnProperty("homeFilters")&&x.modules.homeFilters.disable()}function p(){var b;x.modules.compare.isCompareOpen()===!0?b="compare":(b=Results.getDisplayMode(),0===b.indexOf("f")&&(b=b.slice(0,-1)));var c={vertical:"Home_Contents",actionStep:"Results",display:b,paymentPlan:a("#navbar-filter .dropdown.filter-frequency span:first-child").text(),preferredExcess:null,homeExcess:null,contentsExcess:null,event:A,verticalFilter:a("#home_coverType").val()},d=x.modules.home.getCoverType();("H"==d||"HC"==d)&&(c.homeExcess=a("#home_homeExcess").val()||a("#home_baseHomeExcess").val()),("C"==d||"HC"==d)&&(c.contentsExcess=a("#home_contentsExcess").val()||a("#home_baseContentsExcess").val()),x.messaging.publish(y.tracking.EXTERNAL,{method:"trackQuoteList",object:c}),A="Load"}function q(b){b.preventDefault();var c=a(b.target),d=c.next(".offerTerms-content"),e=c.closest(".resultInsert, .more-info-content, .call-modal").find(".companyLogo"),f=c.closest(".resultInsert, .more-info-content, .call-modal").find(".productTitle, .productName");x.modules.dialogs.show({title:e.clone().wrap("<p>").addClass("hidden-xs").parent().html()+"<div class='hidden-xs heading'>"+f.html()+"</div><div class='heading'>Offer terms</div>",hashId:"offer-terms",openOnHashChange:!1,closeOnHashChange:!0,htmlContent:e.clone().wrap("<p>").removeClass("hidden-xs").addClass("hidden-sm hidden-md hidden-lg").parent().html()+"<h2 class='visible-xs heading'>"+f.html()+"</h2>"+d.html()})}function r(b){"undefined"==typeof b&&(b=!0),null!==Results.getDisplayMode()&&"price"!==Results.getDisplayMode()&&(Results.pagination.hide(),a("header .xs-results-pagination").addClass("hidden"),Results.setDisplayMode("price"),i(),a(document.body).addClass("priceMode"),a(window).scrollTop(0),b&&(A="Refresh",p()))}function s(b){if("undefined"==typeof b&&(b=!0),null!==Results.getDisplayMode()&&"features"!==Results.getDisplayMode()){var c=B===!0;Results.setDisplayMode("features",c),h(),_.defer(function(){Results.pagination.gotoPage(1),"xs"===x.modules.deviceMediaState.get()&&Results.view.setColumnWidth(a(window),Results.settings.render.features.numberOfXSColumns,!1),Results.pagination.setupNativeScroll()}),Results.pagination.show(!0),a("header .xs-results-pagination").removeClass("hidden"),B=!1,a(document.body).removeClass("priceMode"),a(window).scrollTop(0),b&&(A="Refresh",p())}}function t(b){if(a(Results.settings.elements.resultsContainer).hasClass("priceMode")!==!1&&"xs"===x.modules.deviceMediaState.get()){var c=a(b.target);c.hasClass("result-row")===!1&&(c=c.parents(".result-row")),"undefined"!=typeof c.attr("data-available")&&"Y"===c.attr("data-available")&&(x.modules.moreInfo.setProduct(Results.getResult("productId",c.attr("data-productId"))),x.modules.homeMoreInfo.runDisplayMethod())}}function u(){x.messaging.subscribe(y.RESULTS_RANKING_READY,p),x.messaging.subscribe(y.compare.AFTER_ENTER_COMPARE_MODE,function(){a(".filter-excess, .filter-excess a, .excess-update, .excess-update a").addClass("disabled")}),x.messaging.subscribe(y.compare.EXIT_COMPARE,function(){a(".filter-excess, .filter-excess a, .excess-update, .excess-update a").removeClass("disabled")})}var v,w,x=window.meerkat,y=x.modules.events,z=(x.logging.info,{RESULTS_ERROR:"RESULTS_ERROR"}),A="Load",B=!1;x.modules.register("homeResults",{init:u,initPage:b,onReturnToPage:c,get:k,stopColumnWidthTracking:i,recordPreviousBreakpoint:j,switchToPriceMode:r,switchToFeaturesMode:s,showNoResults:o,publishExtraSuperTagEvents:p})}(jQuery),function(){function a(a){var c=!1;switch(a){case"buttonLabel":c="Save Quote";break;case"saveAgain":c='Click \'Save Quote\' to update your saved quote <a href="javascript:;" class="btn btn-save saved-continue-link btn-save-quote">Save Quote</a>';break;case"saveSuccess":c='<div class="col-xs-12"><h4>Your quote has been saved.</h4><p>To retrieve your quote <a href="'+b.site.urls.base+'retrieve_quotes.jsp" class="btn-cancel saved-continue-link btn-link">click here</a>.</p><a href="javascript:;" class="btn btn-cancel">Close</a></div>'}return c}var b=window.meerkat,c=(b.modules.events,b.logging.info,b.messaging,{});b.modules.register("homeSaveQuote",{events:c,getCopy:a})}(jQuery),function(a){function b(){c(d()),g.on("change",function(){c(d())}),a("#home_property_address_streetSearch, #home_property_address_streetNum, #home_property_address_postCode, #home_property_address_suburb, #home_property_address_nonStdStreet").on("blur",function(){setTimeout(function(){c()},50)})}function c(a){""!==g.val()&&(h.removeClass("hidden"),"undefined"!=typeof a&&h.find(".icon:first").attr("class","icon").addClass(a)),e.modules.contentPopulation.render(".journeyEngineSlide:eq(0) .snapshot")}function d(){var a="icon-home-contents";switch(g.val()){case"Home Cover Only":a="icon-house";break;case"Contents Cover Only":a="icon-contents"}return a}var e=window.meerkat,f={homeSnapshot:{}},g=a("#home_coverType"),h=a(".quoteSnapshot");e.modules.register("homeSnapshot",{init:b,events:f,getIcon:d})}(jQuery);
//# sourceMappingURL=home.modules.ctm.min.map