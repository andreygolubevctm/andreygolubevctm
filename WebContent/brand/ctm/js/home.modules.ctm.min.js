/*!
 * CTM-Platform v0.8.3
 * Copyright 2015 Compare The Market Pty Ltd
 * http://www.comparethemarket.com.au/
 */


!function(a,b){function c(){a(document).ready(function(){return"home"!==m.site.vertical?!1:(e(),"confirmation"===m.site.pageAction?!1:(d(),("amend"===m.site.pageAction||"latest"===m.site.pageAction||"load"===m.site.pageAction||"start-again"===m.site.pageAction)&&m.modules.form.markInitialFieldsWithValue(a("#mainform")),$e=a("#calldirect-template"),void($e.length&&(templateCallDirect=_.template($e.html())))))})}function d(){}function e(){if("confirmation"===m.site.pageAction)m.modules.journeyEngine.configure(null);else{f(!1);var b=null;b=m.site.isFromBrochureSite===!0?p.startStep.navigationId:m.site.journeyStage.length&&"latest"===m.site.pageAction?p.resultsStep.navigationId:m.site.journeyStage.length&&"amend"===m.site.pageAction?p.startStep.navigationId:m.modules.emailLoadQuote.getStartStepOverride(b),a(document).ready(function(){m.modules.journeyEngine.configure({startStepId:b,steps:_.toArray(p)});var a=m.modules.transactionId.get();m.site.isNewQuote===!1?m.messaging.publish(n.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Retrieve",transactionID:parseInt(a,10)}}):m.messaging.publish(n.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Start",transactionID:parseInt(a,10)}})})}}function f(a){g(),h(),a&&m.modules.journeyProgressBar.render(!0)}function g(){var b={method:"trackQuoteForms",object:m.modules.home.getTrackingFieldsObject},c={title:"Cover Type",navigationId:"start",slideIndex:0,externalTracking:b,onInitialise:function(b){var c=a(".slide-feature-emailquote");a("#home_privacyoptin").is(":checked")&&c.addClass("privacyOptinChecked"),a("#home_privacyoptin").on("change",function(b){a(this).is(":checked")?c.addClass("privacyOptinChecked"):c.removeClass("privacyOptinChecked")}),m.modules.currencyField.initCurrency()}},d={title:"Occupancy",navigationId:"occupancy",slideIndex:1,tracking:{touchType:"H",touchComment:"Occupancy",includeFormData:!0},externalTracking:b,onInitialise:function(){m.modules.homeOccupancy.initHomeOccupancy(),m.modules.homeBusiness.initHomeBusiness()},onAfterEnter:function(a){m.modules.contentPopulation.render(".journeyEngineSlide:eq(1) .snapshot")}},e={title:"Property Details",navigationId:"property",slideIndex:2,tracking:{touchType:"H",touchComment:"Property",includeFormData:!0},externalTracking:b,onInitialise:function(){m.modules.homePropertyDetails.initHomePropertyDetails(),m.modules.homePropertyFeatures.initHomePropertyFeatures(),m.modules.homeCoverAmounts.initHomeCoverAmounts()},onBeforeEnter:function(a){m.modules.homePropertyFeatures.toggleSecurityFeatures(0),m.modules.homeCoverAmounts.toggleCoverAmountsFields(0),m.modules.homePropertyDetails.validateYearBuilt()},onAfterEnter:function(a){m.modules.contentPopulation.render(".journeyEngineSlide:eq(2) .snapshot")}},f={title:"Policy Holder",navigationId:"policyHolder",slideIndex:l()?4:3,tracking:{touchType:"H",touchComment:"PolicyHolder",includeFormData:!0},externalTracking:b,onInitialise:function(){l()&&m.modules.homeResults.initPage(),m.modules.homePolicyHolder.initHomePolicyHolder()},onBeforeEnter:function(a){m.modules.homePolicyHolder.togglePolicyHolderFields()},onAfterEnter:function(a){m.modules.contentPopulation.render(".journeyEngineSlide:eq("+(l()?"4":"3")+") .snapshot")}},g={title:"Cover",navigationId:"history",slideIndex:l()?3:4,tracking:{touchType:"H",touchComment:"History",includeFormData:!0},externalTracking:b,onInitialise:function(a){l()||m.modules.homeResults.initPage(),m.modules.homeHistory.initHomeHistory()},onAfterEnter:function(a){m.modules.contentPopulation.render(".journeyEngineSlide:eq("+(l()?"3":"4")+") .snapshot")}},h={title:"Results",navigationId:"results",slideIndex:5,externalTracking:b,onInitialise:function(a){m.modules.homeMoreInfo.initMoreInfo(),m.modules.homeEditDetails.initEditDetails(),m.modules.homeFilters.initHomeFilters()},onBeforeEnter:function(b){m.modules.journeyProgressBar.hide(),a("#resultsPage").addClass("hidden"),m.modules.homeFilters.updateFilters()},onAfterEnter:function(a){a.isForward===!0&&m.modules.homeResults.get(),m.modules.homeFilters.show()},onBeforeLeave:function(a){a.isBackward===!0&&m.modules.transactionId.getNew(3)},onAfterLeave:function(a){m.modules.journeyProgressBar.show(),m.modules.homeFilters.hide(),m.modules.homeEditDetails.hide()}};p={startStep:c,occupancyStep:d,propertyStep:e,policyHoldersStep:f,historyStep:g,resultsStep:h}}function h(){for(var a=_.keys(p),b=new Array(a.length-1),c=0;c<a.length-1;c++)b[p[a[c]].slideIndex]={label:p[a[c]].title,navigationId:p[a[c]].navigationId};m.modules.journeyProgressBar.configure(b)}function i(){return a("#home_coverType").val()||null}function j(b){try{b=b||!1;var c=a("#home_property_address_postCode").val(),d=a("#home_property_address_state").val(),e=a("#home_startDate").val(),f=a("#home_policyHolder_dob").val();f.length>4&&(f=f.substring(f.length-4));var g=a("input[name=home_occupancy_ownProperty]:checked").val(),h=a("input[name=home_occupancy_principalResidence]:checked").val(),i=a("#home_coverAmounts_rebuildCost").val(),j=a("#home_coverAmounts_replaceContentsCost").val();switch(k()){case"H":j=null;break;case"C":i=null}var n=a("#home_policyHolder_email").val(),o=null,p=a("input[name=home_policyHolder_marketing]:checked").val(),q="MR"==a("#home_policyHolder_title").val()?"Male":"Female";""===a("#home_policyHolder_title").val()&&(q=null),_.isUndefined(p)||(o=p);var r=null,s=a("input[name=home_policyHolder_oktocall]:checked").val();_.isUndefined(s)||(r=s);var t=m.modules.transactionId.get(),u=m.modules.journeyEngine.getCurrentStepIndex(),v=m.modules.journeyEngine.getFurtherestStepIndex(),w="";switch(u){case 0:w="Cover";break;case 1:w="Occupancy";break;case 2:w="Property";break;case 3:w=l()?"History":"PolicyHolder";break;case 4:w=l()?"PolicyHolder":"History";break;case 5:w=b===!0?"MoreInfo":"Results"}var x={vertical:"Home_Contents",actionStep:w,transactionID:t,quoteReferenceNumber:t,yearOfBirth:null,postCode:null,state:null,email:null,emailID:null,marketOptIn:null,okToCall:null,verticalFilter:null,ownProperty:null,principalResidence:null,replaceContentsCost:null,rebuildCost:null};return v>m.modules.journeyEngine.getStepIndex("start")&&_.extend(x,{commencementDate:e,postCode:c,state:d,verticalFilter:m.modules.home.getVerticalFilter()}),v>m.modules.journeyEngine.getStepIndex("occupancy")&&_.extend(x,{ownProperty:g,principalResidence:h}),v>m.modules.journeyEngine.getStepIndex("property")&&_.extend(x,{replaceContentsCost:j,rebuildCost:i}),v>m.modules.journeyEngine.getStepIndex("policyHolder")&&_.extend(x,{yearOfBirth:f,email:n,marketOptIn:o,okToCall:r,gender:q}),x}catch(y){return!1}}function k(){var b=a("#home_coverType").val();switch(b){case"Home Cover Only":return"H";case"Contents Cover Only":return"C";case"Home & Contents Cover":return"HC"}return""}function l(){return _.indexOf(["34","35"],m.modules.splitTest.get())>=0}var m=window.meerkat,n=m.modules.events,o=(m.logging.info,{home:{},WEBAPP_LOCK:"WEBAPP_LOCK",WEBAPP_UNLOCK:"WEBAPP_UNLOCK"}),p=null;m.modules.register("home",{init:c,events:o,initProgressBar:f,getCoverType:k,getTrackingFieldsObject:j,getVerticalFilter:i})}(jQuery),function(a,b){function c(b){var c=a("#"+l.name+"_businessType").find("option:selected").text().toLowerCase();"home office"==c||"surgery/consulting rooms"==c?(a(l.businessRooms+", "+l.employees).slideDown(b),a(l.dayCareChildren+", "+l.registeredDayCare).slideUp(b),e()):"day care"==c?(a(l.dayCareChildren+", "+l.registeredDayCare).slideDown(b),a(l.businessRooms+", "+l.employees+", "+l.employeeAmount).slideUp(b)):a(l.businessRooms+", "+l.employees+", "+l.employeeAmount+", "+l.dayCareChildren+", "+l.registeredDayCare).slideUp(b)}function d(b){"Y"==a("input[name="+l.name+"_conducted]:checked").val()?(a(l.businessType).slideDown(b),c(b)):f(b)}function e(b){"Y"==a("input[name="+l.name+"_employees]:checked").val()?a(l.employeeAmount).slideDown(b):a(l.employeeAmount).slideUp(b)}function f(b){a(l.businessType+", "+l.businessRooms+", "+l.employees+", "+l.employeeAmount+", "+l.dayCareChildren+", "+l.registeredDayCare).slideUp(b)}function g(){a(document).ready(function(){a("input[name="+l.name+"_conducted]").on("change",function(){d()}),a("#"+l.name+"_businessType").on("change",function(){c()}),a("input[name="+l.name+"_employees]").on("change",function(){e()})})}function h(){j("[HomeBusiness] Initialised"),g(),a(document).ready(function(){c(0),e(0),d(0)})}var i=window.meerkat,j=(i.modules.events,i.logging.info),k={},l={name:"home_businessActivity",businessRooms:".businessRooms",employees:".hasEmployees",dayCareChildren:".dayCareChildren",registeredDayCare:".registeredDayCare",businessType:".businessType",employeeAmount:".employeeAmount"};i.modules.register("homeBusiness",{initHomeBusiness:h,events:k})}(jQuery),function(a,b){function c(){a(document).ready(function(){d.modules.commencementDate.initCommencementDate({dateField:"#home_startDate",getResults:d.modules.homeResults.get,updateData:function(a){_.extend(a,d.modules.homeEditDetails.getFormData())}})})}var d=window.meerkat;d.modules.register("homeCommencementDate",{init:c})}(jQuery),function(a,b){function c(b){"Y"==a("input[name="+m.abovePolicyLimitsElement+"]:checked").val()?a(m.abovePolicyLimitsAmount).slideDown(b):a(m.abovePolicyLimitsAmount).slideUp(b)}function d(b){a(m.rebuildCost+", "+m.replaceContentsCost).find('input[type="hidden"]').each(function(){var b=a(this);""!==b.val()&&b.attr("data-value",b.val()).val("")});var c=a(m.coverType).find("option:selected").val();switch(c){case"Home Cover Only":a(m.abovePolicyLimits+", "+m.replaceContentsCost+", "+m.abovePolicyLimitsAmount+", "+m.itemsAway+", "+m.unspecifiedCoverAmount+", "+m.specifiedItems+", "+m.specifyPersonalEffects).slideUp(b),a(m.rebuildCost).slideDown(b),$hidden=a(m.rebuildCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value"));break;case"Contents Cover Only":a(m.rebuildCost).slideUp(b),a(m.replaceContentsCost+", "+m.abovePolicyLimits+", "+m.itemsAway+", "+m.specifyPersonalEffects).slideDown(b),$hidden=a(m.replaceContentsCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value"));break;case"Home & Contents Cover":a(m.rebuildCost+", "+m.replaceContentsCost+", "+m.abovePolicyLimits+", "+m.itemsAway+", "+m.specifyPersonalEffects).slideDown(b),$hidden=a(m.rebuildCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value")),$hidden=a(m.replaceContentsCost+' input[type="hidden"]'),$hidden.val($hidden.attr("data-value"))}f(b)}function e(){var b=Number(a(m.bicycle).val()),c=Number(a(m.musical).val()),d=Number(a(m.clothing).val()),e=Number(a(m.jewellery).val()),f=Number(a(m.sporting).val()),g=Number(a(m.photo).val()),h=b+c+d+e+f+g;a(m.coverTotal).val(h).trigger("blur")}function f(b){var c=a(m.coverType).find("option:selected").val(),d=j.modules.homeOccupancy.isPrincipalResidence();"Y"==a("input[name="+m.itemsAwayElement+"]:checked").val()?(a(m.unspecifiedCoverAmount+", "+m.specifyPersonalEffects).slideDown(b),"Y"==a("input[name="+m.specifyPersonalEffectsElement+"]:checked").val()?a(m.specifiedItems).slideDown(b):a(m.specifiedItems).slideUp(b)):g(b),d&&-1!=a.inArray(c,["Home & Contents Cover","Contents Cover Only"])?a(m.itemsAway).slideDown(b):(a(m.itemsAway).slideUp(b),g(b))}function g(b){a(m.unspecifiedCoverAmount+", "+m.specifyPersonalEffects+", "+m.specifiedItems).slideUp(b)}function h(){a(document).ready(function(){a("input[name="+m.abovePolicyLimitsElement+"]").on("change",function(){c()}),a("input[name="+m.itemsAwayElement+"], input[name="+m.specifyPersonalEffectsElement+"]").on("change",function(){f()}),a(m.specifiedValues+", "+m.contentsCost).on("blur",function(){e()})})}function i(){k("[HomeCoverAmounts] Initialised"),h(),a(document).ready(function(){c(0),f(0)})}var j=window.meerkat,k=(j.modules.events,j.logging.info),l={},m={abovePolicyLimitsElement:"home_coverAmounts_abovePolicyLimits",abovePolicyLimitsAmount:".abovePolicyLimitsAmount",itemsAwayElement:"home_coverAmounts_itemsAway",specifyPersonalEffectsElement:"home_coverAmounts_specifyPersonalEffects",bicycle:"#home_coverAmounts_specifiedPersonalEffects_bicycle",bicycleentry:"#home_coverAmounts_specifiedPersonalEffects_bicycleentry",musical:"#home_coverAmounts_specifiedPersonalEffects_musical",clothing:"#home_coverAmounts_specifiedPersonalEffects_clothing",jewellery:"#home_coverAmounts_specifiedPersonalEffects_jewellery",sporting:"#home_coverAmounts_specifiedPersonalEffects_sporting",photo:"#home_coverAmounts_specifiedPersonalEffects_photo",coverTotal:"#home_coverAmounts_coverTotal",principalResidence:"home_occupancy_principalResidence",specifiedItems:"#specifiedItemsRows",abovePolicyLimits:"#abovePolicyLimitsRow",rebuildCost:"#rebuildCostRow",replaceContentsCost:"#replaceContentsCostRow",unspecifiedCoverAmount:"#unspecifiedCoverAmountRow",specifyPersonalEffects:"#specifyPersonalEffectsRow",itemsAway:"#itemsAwayRow",coverType:"#home_coverType",specifiedValues:".specifiedValues",contentsCost:"#home_coverAmounts_replaceContentsCostentry"};j.modules.register("homeCoverAmounts",{initHomeCoverAmounts:i,toggleCoverAmountsFields:d,events:l})}(jQuery),function(a,b){function c(){e(),g()}function d(){return{coverType:a("#home_coverType").val(),icon:l.modules.homeSnapshot.getIcon(),ownsHome:a("#home_occupancy_ownProperty_Y").is(":checked"),isPrincipalResidence:a("#home_occupancy_principalResidence_Y").is(":checked"),businessActivity:a("#home_businessActivity_conducted_Y").is(":checked"),isBodyCorp:a("#home_property_bodyCorp_Y").is(":checked"),hasInternalSiren:a("#home_property_securityFeatures_internalSiren").is(":checked"),hasExternalSiren:a("#home_property_securityFeatures_externalSiren").is(":checked"),hasExternalStrobe:a("#home_property_securityFeatures_strobeLight").is(":checked"),hasBackToBase:a("#home_property_securityFeatures_backToBase").is(":checked"),isSpecifyingPersonalEffects:a("#home_coverAmounts_itemsAway_Y").is(":checked"),specifiedPersonalEffects:a("#home_coverAmounts_specifyPersonalEffects_Y").is(":checked"),bicycles:f("#home_coverAmounts_specifiedPersonalEffects_bicycleentry"),musical:f("#home_coverAmounts_specifiedPersonalEffects_musicalentry"),clothing:f("#home_coverAmounts_specifiedPersonalEffects_clothingentry"),jewellery:f("#home_coverAmounts_specifiedPersonalEffects_jewelleryentry"),sporting:f("#home_coverAmounts_specifiedPersonalEffects_sportingentry"),photography:f("#home_coverAmounts_specifiedPersonalEffects_photoentry"),hasOlderResident:a("#home_policyHolder_anyoneOlder_Y").is(":checked"),hasRetiredOver55:a("#home_policyHolder_over55_Y").is(":checked"),previousCover:a("#home_disclosures_previousInsurance_Y").is(":checked"),previousClaims:a("#home_disclosures_claims_Y").is(":checked")}}function e(){o.on("show.bs.dropdown",function(){var b=a("#edit-details-template");b.length>0&&(templateCallback=_.template(b.html()));var c=d();h(templateCallback(c))}).on("click",".dropdown-container",function(a){a.stopPropagation()})}function f(b){return $el=a(b),"$0"===$el.val()||""===$el.val()?!1:!0}function g(){l.messaging.subscribe(m.WEBAPP_LOCK,function(a){i(),o.children(".activator").addClass("inactive").addClass("disabled")}),l.messaging.subscribe(m.WEBAPP_UNLOCK,function(a){o.children(".activator").removeClass("inactive").removeClass("disabled")}),l.messaging.subscribe(m.device.STATE_ENTER_XS,function(){i()}),l.messaging.subscribe(m.device.STATE_LEAVE_XS,function(){i()})}function h(a){"xs"==l.modules.deviceMediaState.get()?p=j(a):k(a)}function i(){o.hasClass("open")&&o.find(".activator").dropdown("toggle").end().find(".edit-details-wrapper").empty(),null!==p&&a("#"+p).modal("hide")}function j(b){var c=l.modules.dialogs.show({htmlContent:'<div class="edit-details-wrapper"></div>',hashId:"edit-details",className:"edit-details-modal",closeOnHashChange:!0,onOpen:function(c){var d=a(".edit-details-wrapper",a("#"+c));d.html(b),l.modules.contentPopulation.render("#"+c+" .edit-details-wrapper"),a(".accordion-collapse").on("show.bs.collapse",function(){a(this).prev(".accordion-heading").addClass("active-panel")}).on("hide.bs.collapse",function(){a(this).prev(".accordion-heading").removeClass("active-panel")}),d.show()}});return c}function k(b){var c=a("#edit-details-dropdown .edit-details-wrapper");c.html(b),l.modules.contentPopulation.render("#edit-details-dropdown .edit-details-wrapper"),c.find(".accordion-collapse").addClass("in").end().show()}var l=window.meerkat,m=l.modules.events,n=(l.logging.info,{homeEditDetails:{}}),o=(n.homeEditDetails,a("#edit-details-dropdown")),p=null;l.modules.register("homeEditDetails",{initEditDetails:c,events:n,hide:i,getFormData:d})}(jQuery),function(a,b){function c(){d(),w.removeClass("active"),x.removeClass("active");var b=D.modules.home.getCoverType();if("undefined"!=typeof Results.settings&&Results.settings.hasOwnProperty("displayMode")===!0)switch(Results.getDisplayMode()){case"price":w.addClass("active");break;case"features":x.addClass("active")}var c=a("#home_paymentType").val();"undefined"==typeof c?y.find(".dropdown-toggle span").text(y.find(".dropdown-menu a:first").text()):y.find(".dropdown-toggle span").text(y.find('.dropdown-menu a[data-value="'+c+'"]').text()),("H"==b||"HC"==b)&&("undefined"==typeof L.homeExcess?z.find(".dropdown-toggle span").text(z.find(".dropdown-menu a:first").text()):z.find(".dropdown-toggle span").text(z.find('.dropdown-menu a[data-value="'+L.homeExcess+'"]').text())),("C"==b||"HC"==b)&&("undefined"==typeof L.contentsExcess?A.find(".dropdown-toggle span").text(A.find(".dropdown-menu a:first").text()):A.find(".dropdown-toggle span").text(A.find('.dropdown-menu a[data-value="'+L.contentsExcess+'"]').text()))}function d(){var a=D.modules.home.getCoverType();switch(a){case"H":return z.add(B).show(),A.add(C).add(".excess-update").hide(),void z.find("li a").addClass("updateExcess");case"C":return z.add(B).add(".excess-update").hide(),A.add(C).show(),void A.find("li a").addClass("updateExcess");case"HC":return z.add(B).add(A).add(C).add(".excess-update").show(),void A.find("li a").removeClass("updateExcess")}}function e(){var b=D.modules.home.getCoverType(),c=a("#xsFilterBarHomeExcessRow"),d=a("#xsFilterBarContentsExcessRow");switch(b){case"H":return c.show(),void d.hide();case"C":return c.hide(),void d.show();case"HC":return void c.add(d).show()}}function f(b){b.preventDefault();var d=a(b.target);if(d.hasClass("updateExcess"))g(b),c();else{var e=d.parents(".dropdown"),f=d.attr("data-value");e.find(".dropdown-toggle span").text(d.text()),d.parent().siblings().removeClass("active"),d.parent().addClass("active"),e.hasClass("filter-frequency")&&f!==L.frequency&&(L.frequency=f,a("#home_paymentType").val(L.frequency),Results.setFrequency(f),D.messaging.publish(H.CHANGED))}}function g(b){var c=D.modules.home.getCoverType();b.preventDefault();var d,e,f=a(b.target);"update"===f.text()?(d=a(".homeExcess .dropdown-toggle span").text().replace("$",""),e=a(".contentsExcess .dropdown-toggle span").text().replace("$","")):(d=f.text().replace("$",""),e=f.text().replace("$","")),d===L.homeExcess||"H"!=c&&"HC"!=c||(L.homeExcess=d,a("#home_homeExcess").val(d)),e===L.contentsExcess||"C"!=c&&"HC"!=c||(L.contentsExcess=e,a("#home_contentsExcess").val(e)),"H"==c?D.messaging.publish(H.CHANGED,{homeExcess:d}):"C"==c?D.messaging.publish(H.CHANGED,{contentsExcess:e}):D.messaging.publish(H.CHANGED,{contentsExcess:e,homeExcess:d})}function h(){L={display:Results.getDisplayMode(),frequency:a("#home_paymentType").val(),homeExcess:a("#home_homeExcess").val()||L.homeExcess,contentsExcess:a("#home_contentsExcess").val()||L.contentsExcess}}function i(){L={homeExcess:a("#home_baseHomeExcess").val(),contentsExcess:a("#home_baseContentsExcess").val()}}function j(){y.find("li.active").removeClass("active"),y.find("a[data-value="+L.frequency+"]").each(function(){a(this).parent().addClass("active")}),z.find("li.active").removeClass("active"),A.find("li.active").removeClass("active"),_.isEmpty(L.homeExcess)||z.find("a[data-value="+L.homeExcess+"]").each(function(){a(this).parent().addClass("active")}),_.isEmpty(L.contentsExcess)||A.find("a[data-value="+L.contentsExcess+"]").each(function(){a(this).parent().addClass("active")})}function k(){v.slideUp(200,function(){v.addClass("hidden")})}function l(){v.removeClass("hidden").hide().slideDown(200),h(),j()}function m(){v.find("li.dropdown, .dropdown-toggle").addClass("disabled"),w.addClass("disabled").find("a").addClass("disabled"),x.addClass("disabled").find("a").addClass("disabled"),a(".slide-feature-filters").find("a").addClass("disabled").addClass("inactive"),a(".excess-update").find("a").addClass("disabled").addClass("inactive")}function n(){D.modules.compare.isCompareOpen()===!1&&(v.find("li.dropdown.filter-excess, .filter-excess .dropdown-toggle").removeClass("disabled"),w.removeClass("disabled").find("a").removeClass("disabled"),x.removeClass("disabled").find("a").removeClass("disabled"),a(".slide-feature-filters").find("a").removeClass("inactive").removeClass("disabled"),a(".excess-update").find("a").removeClass("inactive").removeClass("disabled")),v.find("li.dropdown.filter-frequency, .filter-frequency .dropdown-toggle").removeClass("disabled")}function o(){a(document.body).on("mousewheel DOMMouseScroll onmousewheel",function(a){K&&(a.preventDefault(),a.stopPropagation())}),a(document).on("resultsFetchStart pagination.scrolling.start",function(){K=!0,m()}),a(document).on("resultsFetchFinish pagination.scrolling.end",function(){K=!1,n()}),D.messaging.subscribe(E.compare.EXIT_COMPARE,n),w.on("click",function(b){b.preventDefault(),a(this).hasClass("disabled")||(D.modules.homeResults.switchToPriceMode(!0),c(),D.modules.session.poke())}),x.on("click",function(b){b.preventDefault(),a(this).hasClass("disabled")||(D.modules.homeResults.switchToFeaturesMode(!0),c(),D.modules.session.poke())}),v.on("click",".dropdown-menu a, .excess-update a",f)}function p(){var b=_.template(a("#home-xsFilterBar-template").html()),c=a("#home_homeExcess").val(),d=a("#home_contentsExcess").val(),e=b({homeStartingValue:_.isEmpty(c)?a("#home_baseHomeExcess").val():c,contentsStartingValue:_.isEmpty(d)?a("#home_baseContentsExcess").val():d});return J=D.modules.dialogs.show({title:a(this).attr("title"),htmlContent:e,hashId:"xsFilterBar",rightBtn:{label:"Save Changes",className:"btn-sm btn-save",callback:r},closeOnHashChange:!0,onOpen:q}),!1}function q(b){"undefined"!=typeof Results.settings&&Results.settings.hasOwnProperty("displayMode")===!0&&(a("#xsFilterBarSortRow input:checked").prop("checked",!1),a("#xsFilterBarSortRow #xsFilterBar_sort_"+Results.getDisplayMode()).prop("checked",!0).change()),a("#xsFilterBarFreqRow input:checked").prop("checked",!1),a("#xsFilterBarFreqRow #xsFilterBar_freq_"+a("#home_paymentType").val()).prop("checked",!0).change(),a("input[name=xsFilterBar_homeExcess], input[name=xsFilterBar_contentsexcess]",a("#"+b)).prop("checked",!1),a("#xsFilterBar_homeExcess_"+L.homeExcess,a("#"+b)).prop("checked",!0).change(),a("#xsFilterBar_contentsexcess_"+L.contentsExcess,a("#"+b)).prop("checked",!0).change(),e()}function r(){var b=a("#home_paymentType"),d=a("#home_homeExcess"),e=a("#home_contentsExcess"),f={display:a("#xsFilterBarSortRow input:checked").val(),freq:a("#xsFilterBarFreqRow input:checked").val(),homeExcess:a("#xsFilterBarHomeExcessRow input:checked").val(),contentsExcess:a("#xsFilterBarContentsExcessRow input:checked").val()};0===Number(f.homeExcess)&&(f.homeExcess=""),0===Number(f.contentsExcess)&&(f.contentsExcess=""),b.val(f.freq),d.val(f.homeExcess),e.val(f.contentsExcess),f.display!==L.display&&("features"===f.display?D.modules.homeResults.switchToFeaturesMode(!0):"price"===f.display&&D.modules.homeResults.switchToPriceMode(!0)),D.modules.dialogs.close(J),D.modules.navMenu.close(),L.frequency!==f.freq&&(L.frequency=f.freq,Results.setFrequency(L.frequency),D.messaging.publish(H.CHANGED)),L.homeExcess!==f.homeExcess&&(L.homeExcess=f.homeExcess,D.messaging.publish(H.CHANGED,{homeExcess:f.homeExcess})),L.contentsExcess!==f.contentsExcess&&(L.contentsExcess=f.contentsExcess,D.messaging.publish(H.CHANGED,{contentsExcess:f.contentsExcess})),c()}function s(){var b=!a("#navbar-filter").hasClass("hidden");b&&I===!0&&(h(),p())}function t(a){I=_.isUndefined(a)?"xs"===D.modules.deviceMediaState.get():a.isXS===!0,I===!1&&D.modules.dialogs.isDialogOpen(J)&&D.modules.dialogs.close(J)}function u(){F("[HomeFilters] Initialised"),a(document).ready(function(){if(v=a("#navbar-filter"),v.length){w=v.find(".filter-pricemode"),x=v.find(".filter-featuresmode"),y=v.find(".filter-frequency"),z=v.find(".filter-excess.homeExcess"),A=v.find(".filter-excess.contentsExcess"),B=v.find(".filter-label.homeExcessLabel"),C=v.find(".filter-label.contentsExcessLabel"),i(),o();var b;b=z.find(".dropdown-menu"),a("#filter_homeExcessOptions option").each(function(){b.append('<li><a href="javascript:;" data-value="'+this.value+'">'+this.text+"</a></li>")}),b=A.find(".dropdown-menu"),a("#filter_contentsExcessOptions option").each(function(){b.append('<li><a href="javascript:;" data-value="'+this.value+'">'+this.text+"</a></li>")}),b=y.find(".dropdown-menu"),a("#filter_paymentType option").each(function(){b.append('<li><a href="javascript:;" data-value="'+this.value+'">'+this.text+"</a></li>")}),a("#navbar-main .slide-feature-filters a").on("click",function(b){b.preventDefault(),a(this).hasClass("disabled")||s()}),D.messaging.subscribe(E.device.STATE_ENTER_XS,_.bind(t,this,{isXS:!0})),D.messaging.subscribe(E.device.STATE_LEAVE_XS,_.bind(t,this,{isXS:!1})),t()}})}var v,w,x,y,z,A,B,C,D=window.meerkat,E=D.modules.events,F=D.logging.info,G={homeFilters:{CHANGED:"HOME_FILTERS_CHANGED"}},H=G.homeFilters,I=!1,J=!1,K=!1,L={display:!1,frequency:!1,homeExcess:!1,contentsExcess:!1};D.modules.register("homeFilters",{initHomeFilters:u,events:G,updateFilters:c,hide:k,show:l,disable:m,enable:n,onRequestModal:s,toggleXSFilters:e})}(jQuery),function(a,b){function c(b){"Y"==a("input[name="+h.name+"_previousInsurance]:checked").val()?a(h.atCurrentAddress+", "+h.pastInsurer+", "+h.insuranceExpiry+", "+h.insuranceCoverLength).slideDown(b):a(h.atCurrentAddress+", "+h.pastInsurer+", "+h.insuranceExpiry+", "+h.insuranceCoverLength).slideUp(b)}function d(){a("input[name="+h.name+"_previousInsurance]").on("change",function(){c()})}function e(){g("[HomeHistory] Initialised"),a(document).ready(function(){d(),c(0)})}var f=window.meerkat,g=f.logging.info,h={name:"home_disclosures",atCurrentAddress:".atCurrentAddress",pastInsurer:".pastInsurer",insuranceExpiry:".insuranceExpiry",insuranceCoverLength:".insuranceCoverLength"};f.modules.register("homeHistory",{initHomeHistory:e})}(jQuery),function(a,b){function c(){var b={container:I,hideAction:"fadeOut",showAction:"fadeIn",modalOptions:{className:"modal-breakpoint-wide modal-tight bridgingContainer",openOnHashChange:!1,leftBtn:{label:"All Products",icon:'<span class="icon icon-arrow-left"></span>',callback:function(b){a(b.currentTarget).closest(".modal").modal("hide")}}},runDisplayMethod:o,onBeforeShowBridgingPage:l,onBeforeShowTemplate:z,onBeforeShowModal:z,onAfterShowModal:y,onAfterShowTemplate:m,onBeforeHideTemplate:null,onAfterHideTemplate:n,onClickApplyNow:q,onBeforeApply:null,onApplySuccess:A,retrieveExternalCopy:p,additionalTrackingData:{verticalFilter:null,productName:null}};F.modules.moreInfo.initMoreInfo(b),j(),d()}function d(){a(document).on("click",".bridgingContainer .btn-call-actions",function(b){b.preventDefault(),b.stopPropagation();var c=a(this),d=a("#home-call-modal-template");d.length&&(templateCallback=_.template(d.html()));var h=F.modules.moreInfo.getOpenProduct();if("Y"===h.productAvailable){var i=templateCallback(h),j={htmlContent:i,hashId:"call",className:"call-modal "+h.brandCode,closeOnHashChange:!0,openOnHashChange:!1,onOpen:function(d){a("."+c.attr("data-callback-toggle")).show(),f(".paragraphedContent:visible",".sidebar-right",a("#"+d)),e(),c.hasClass("btn-calldirect")?g(b):t()}};"xs"==F.modules.deviceMediaState.get()&&(j.title="Reference no. "+h.leadNo),C=F.modules.dialogs.show(j)}}).on("click",".call-modal .btn-call-actions",function(b){"xs"!=F.modules.deviceMediaState.get()&&b.preventDefault(),b.stopPropagation();var c=a(this);switch(c.attr("data-callback-toggle")){case"calldirect":a(".callback").hide(),a(".calldirect").show(),g(b);break;case"callback":a(".calldirect").hide(),a(".callback").show(),t()}f(".paragraphedContent:visible",".sidebar-right",c.closest(".modal.in"))}).on("click",".btn-submit-callback",function(b){b.preventDefault();var c=a(this);if(c.closest("form").valid()){var d=F.site.tracking.brandCode.toUpperCase();h(b,{message:d+" - Home Vertical - Call me now",phonecallme:"GetaCall"}),u()}else _.delay(function(){f(".paragraphedContent:visible",".sidebar-right",c.closest(".modal.in"))},200);return!1})}function e(){setupDefaultValidationOnForm(a("#getcallback"));var b=a("#home_CrClientName"),c=a("#home_policyHolder_firstName"),d=a("#home_policyHolder_lastName");c.length,d.length;(c.length&&""!==c.val()||d.length&&""!==d.val())&&b.val(a.trim(c.val()+" "+d.val()));var e=a("#home_CrClientTelinput");e.length&&!e.val().length&&e.val(a("#home_policyHolder_phone").val()),e.attr("data-msg-required","Please enter your contact number")}function f(b,c,d){if("xs"!=F.modules.deviceMediaState.get()&&a(c,d).length){var e=a(b,d).outerHeight(),f=a(c,d).outerHeight();e>=f?(a(c,d).css("min-height",e+"px"),a(b,d).css("min-height",e+"px")):(a(c,d).css("min-height",f+"px"),a(b,d).css("min-height",f+"px"))}}function g(a){s();var b=F.modules.moreInfo.getOpenProduct();if("undefined"==typeof J[b.productId]){var c=F.site.tracking.brandCode.toUpperCase();return h(a,{message:c+" - Home Vertical - Call direct",phonecallme:"CallDirect"})}}function h(b,c){var d=F.modules.moreInfo.getOpenProduct();"undefined"!=typeof d&&null!==d&&"undefined"!=typeof d.vdn&&!_.isEmpty(d.vdn)&&d.vdn>0&&(c.vdn=d.vdn);var e=a("#home_property_address_state").val(),f=(F.site.tracking.brandCode.toUpperCase(),""),g="",h=a("#home_CrClientName"),i=h.length?h.val():"",j=a("#home_policyHolder_firstName").val(),k=a("#home_policyHolder_lastName").val(),l=a("#home_CrClientTelinput"),m=l.length?l.val():"",n=a("#home_policyHolder_phone").val();""!==i?f=i:(""!==j||""!==k)&&(f=a.trim(j+" "+k)),""!==m?g=m:""!==n&&(g=n);var o={state:e,brand:d.productId.split("-")[0],productId:d.productId,clientNumber:d.leadNo,clientName:f,phoneNumber:g,partnerReference:F.modules.transactionId.get()},p=a.extend(o,c),q=a(b.target);return F.modules.loadingAnimation.showInside(q,!0),F.modules.comms.post({url:"leadfeed/homecontents/getacall.json",data:p,dataType:"json",cache:!1,errorLevel:"GetaCall"===c.phonecallme?"warning":"silent",onSuccess:function(b){if("GetaCall"==c.phonecallme){F.modules.dialogs.show({title:"Call back request recorded",htmlContent:"<p><strong>Thank you!</strong></p><p>Your Call request has been sent to the insurer's message centre who will be in touch as soon as possible.</p>",hashId:"call-back-success",openOnHashChange:!1,closeOnHashChange:!0,onClose:function(b){a(".modal").modal("hide"),F.modules.moreInfo.isBridgingPageOpen()&&F.modules.moreInfo.close()}})}},onComplete:function(){"CallDirect"==c.phonecallme&&(J[d.productId]=!0),F.modules.loadingAnimation.hide(q)}})}function i(){var b=a(".quote-summary-table");b.find("tbody tr").remove();var c="",d=function(a,b){b=b.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");var d=["<tr>","<td>",a,"</td>",'<td class="cover-amount">',"$<span>",b,"</span>","</td>","</tr>"].join("");c+=d},e=F.modules.home.getCoverType();if("H"==e||"HC"==e){var f=parseInt(a("#home_coverAmounts_rebuildCost").val());d("Home Cover",f)}if("C"==e||"HC"==e){var g=parseInt(a("#home_coverAmounts_replaceContentsCost").val());if(d("Contents Cover",g),"Y"==a(".itemsAway :checked").val()){var h=parseInt(a("#home_coverAmounts_unspecifiedCoverAmount").val());"Y"==a(".specifyPersonalEffects :checked").val()&&a('.specifiedItems input[type="hidden"]').each(function(){var a=this.value||0;h+=parseInt(a)}),d("Personal Effects",h)}}b.append(c)}function j(){F.messaging.subscribe(G.ADDRESS_CHANGE,function(a){
"xs"!=F.modules.deviceMediaState.get()&&-1==a.hash.indexOf("results/moreinfo")&&F.modules.moreInfo.hideTemplate(I)}),F.messaging.subscribe(G.device.STATE_ENTER_XS,function(){F.modules.moreInfo.isBridgingPageOpen()&&F.modules.moreInfo.close(),"undefined"!=typeof C&&a("#"+C).modal("hide")}),F.messaging.subscribe(G.device.STATE_LEAVE_XS,function(){F.modules.moreInfo.isModalOpen()&&F.modules.moreInfo.close(),"undefined"!=typeof C&&a("#"+C).modal("hide")}),F.messaging.subscribe(G.errorHandling.OK_CLICKED,function(){(F.modules.moreInfo.isBridgingPageOpen()||F.modules.moreInfo.isModalOpen())&&F.modules.moreInfo.close()}),F.messaging.subscribe(G.transactionId.CHANGED,function(){M=!0})}function k(){E=a(window).scrollTop()}function l(){k(),"xs"!=F.modules.deviceMediaState.get()&&a(".resultsContainer, #navbar-compare, #navbar-filter").hide()}function m(){y(),("lg"==F.modules.deviceMediaState.get()||"md"==F.modules.deviceMediaState.get())&&f(".paragraphedContent",".moreInfoRightColumn",I)}function n(){a(".resultsContainer, #navbar-filter, #navbar-compare").show(),a(window).scrollTop(E)}function o(a){"xs"!=F.modules.deviceMediaState.get()?F.modules.moreInfo.showTemplate(I):F.modules.moreInfo.showModal(),F.modules.address.appendToHash("moreinfo")}function p(a){return x(),F.modules.comms.get({url:"ajax/json/get_scrapes.jsp",cache:!0,data:{type:"homeBrandScrapes",code:a.productId,group:"home"},errorLevel:"silent",onSuccess:function(a){F.modules.moreInfo.setDataResult(a)}})}function q(b,c){if(L===!0&&K.length){var d=a("#special-conditions-template");d.length&&(templateCallback=_.template(d.html()));var e=F.modules.moreInfo.getOpenProduct();e.specialConditionsRule=K;var f=templateCallback(e);F.modules.dialogs.show({htmlContent:f,hashId:"special-conditions",title:"Special Conditions Confirmation",closeOnHashChange:!0,openOnHashChange:!1,onOpen:function(d){a(".btn-proceed-to-insurer",a("#"+d)).off("click.proceed").on("click.proceed",function(a){return a.preventDefault(),r(b,d,c)}),a(".btn-back",a("#"+d)).off("click.goback").on("click.goback",function(b){a(".modal").modal("hide"),F.modules.moreInfo.isBridgingPageOpen()&&F.modules.moreInfo.close()})},onClose:function(a){F.modules.moreInfo.applyCallback(!1)}});return!1}return r(b,!1,c)}function r(b,c,d){if(c&&a("#"+c).modal("hide"),C&&a("#"+C).modal("hide"),_.isEmpty(b.quoteUrl))return F.modules.errorHandling.error({errorLevel:"warning",message:"An error occurred. Sorry about that!<br /><br /> To purchase this policy, please contact the provider "+(""!==b.telNo?" on "+b.telNo:"directly")+" quoting "+b.leadNo+", or select another policy.",page:"homeMoreInfo.js:proceedToInsurer",description:"Insurer did not provide quoteUrl in results object.",data:b}),!1;var e=b.leadfeedinfo.split("||"),f=!1;return _.isEmpty(e[0])||(f={data:{vertical:"homecontents",phonecallme:"NoSaleCall",productId:b.productId,clientName:e[0],phoneNumber:e[1],clientNumber:b.leadNo,partnerReference:F.modules.transactionId.get(),brand:b.productId.split("-")[0],state:a("#home_property_address_state").val()},settings:{errorLevel:"silent"}}),F.modules.partnerTransfer.transferToPartner({encodeTransferURL:!0,product:b,applyNowCallback:d,productName:b.headline.name,productBrandCode:b.brandCode,brand:b.productDes,verticalFilter:F.modules.home.getVerticalFilter(),productID:b.trackingProductId,noSaleLead:f}),!0}function s(){M===!0&&(M=!1,v("CrCallDir"))}function t(){v("CrCallBac")}function u(){v("CrCallBacSub")}function v(a){var b=F.modules.moreInfo.getOpenProduct();F.modules.partnerTransfer.trackHandoverEvent({product:b,type:a,quoteReferenceNumber:b.leadNo,transactionID:F.modules.transactionId.get(),productID:b.productId,productName:b.headline.name,verticalFilter:F.modules.home.getVerticalFilter(),productBrandCode:b.brandCode},!1)}function w(){F.messaging.publish(G.tracking.EXTERNAL,{method:"trackQuoteForms",object:_.bind(F.modules.home.getTrackingFieldsObject,this,!0)})}function x(){var a=F.modules.home.getCoverType();switch(a){case"H":return void(D="home");case"C":return void(D="contents");case"HC":return void(D="homeandcontents")}}function y(){var a=F.modules.moreInfo.getOpenProduct(),b={additionalTrackingData:{verticalFilter:F.modules.home.getVerticalFilter(),productName:a.headline.name,productID:a.trackingProductId}};F.modules.moreInfo.updateSettings(b),w()}function z(b){i(),"undefined"!=typeof b&&"undefined"!=typeof b.scrapes&&b.scrapes.length&&a.each(b.scrapes,function(b,c){""!==c.html&&-1!=c.cssSelector.indexOf(D)&&a(c.cssSelector.replace("-"+D,"")).html(c.html)}),a(".contentRow li").each(function(){a(this).prepend('<span class="icon icon-angle-right"></span>')})}function A(a){}function B(a,b){L=a,K=b}var C,D,E,F=window.meerkat,G=F.modules.events,H={homeMoreInfo:{}},I=(H.homeMoreInfo,a(".bridgingContainer")),J={},K="",L=!1,M=!0;F.modules.register("homeMoreInfo",{initMoreInfo:c,events:H,setSpecialConditionDetail:B,runDisplayMethod:o,setScrollPosition:k})}(jQuery),function(a,b){function c(){return"Y"==a("input:radio[name="+n.principalResidence+"]:checked").val()?!0:"N"==a("input:radio[name="+n.principalResidence+"]:checked").val()?!1:null}function d(b){var d=a("input:radio[name="+n.ownProperty+"]:checked").val(),f=(a(n.howOccupied).find("option:selected").val(),c());a(n.howOccupied);null!==f&&(f||"undefined"!=typeof d&&"N"!=d)?f?(a(n.howOccupiedRow).slideUp(b),a(n.whenMovedInYearRow).slideDown(b),e(b)):(a(n.howOccupiedRow).slideDown(b),a(n.whenMovedInYearRow+", "+n.whenMovedInMonthRow).slideUp(b)):(a(n.howOccupiedRow).slideUp(b),a(n.whenMovedInYearRow+", "+n.whenMovedInMonthRow).slideUp(b))}function e(b){var c=a('select[name="'+n.whenMovedInYear+'"]').val(),d=a("#"+n.whenMovedInMonth),e=12;if(c==l&&(e=m),c>=l-2){a(n.whenMovedInMonthRow).slideDown(b),d.find("option").show();for(var f=12;f>e;f--)d.find("[value="+f+"]").hide()}else a(n.whenMovedInMonthRow).slideUp(b)}function f(){a(document).ready(function(){a("#"+n.whenMovedInYear).on("change",function(){e()}),a("input[name="+n.name+"_ownProperty], "+n.howOccupied).on("change",function(){d()}),a("input[name="+n.principalResidence+"]").on("change",function(){d()})})}function g(){i("[HomeOccupancy] Initialised"),f(),a(document).ready(function(){d(0)})}var h=window.meerkat,i=(h.modules.events,h.logging.info),j={},k=new Date,l=k.getFullYear(),m=k.getMonth()+1,n={name:"home_occupancy",ownProperty:"home_occupancy_ownProperty",principalResidence:"home_occupancy_principalResidence",whenMovedInYear:"home_occupancy_whenMovedIn_year",whenMovedInMonth:"home_occupancy_whenMovedIn_month",howOccupied:"#home_occupancy_howOccupied",whenMovedInYearRow:".whenMovedInYear",whenMovedInMonthRow:".whenMovedInMonth",howOccupiedRow:".howOccupied"};h.modules.register("homeOccupancy",{initHomeOccupancy:g,events:j,isPrincipalResidence:c})}(jQuery),function(a,b){function c(b){var c=j.modules.homeOccupancy.isPrincipalResidence();"Y"==a("input[name="+m.anyoneOlder+"]:checked").val()&&c?a(m.oldestDOBRow).slideDown(b):a(m.oldestDOBRow).slideUp(b),e(b)}function d(b){var d=j.modules.homeOccupancy.isPrincipalResidence();d?(a(m.anyoneOlderRow+", "+m.otherOccupantsRow).slideDown(b),c(b),e(b)):a(m.anyoneOlderRow+", "+m.over55+", "+m.oldestDOBRow+", "+m.otherOccupantsRow).slideUp(b)}function e(b){var c=j.modules.homeOccupancy.isPrincipalResidence(),d=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,e=a("#"+m.name+"_dob"),h=a("#"+m.name+"_jointDob"),i=a("input[name="+m.anyoneOlder+"]:checked").val();c&&(e.val().match(d)&&f(e.val())>=55||h.val().match(d)&&f(h.val())>=55||"Y"===i&&m.oldestPersonDob.val().match(d)&&f(m.oldestPersonDob.val())>=55)?a(m.over55).slideDown(b,function(){g()}):a(m.over55).slideUp(b,function(){g()})}function f(a){var b=new Date,c=a.split("/").reverse(),d=b.getFullYear()-parseInt(c[0],10),e=b.getMonth()+1-parseInt(c[1],10);return(0>e||0===e&&b.getDate()<parseInt(c[2],10))&&d--,d}function g(){m.oldestPersonDob.trigger("blur")}function h(){a(document).ready(function(){a("input[name="+m.anyoneOlder+"]").on("change",function(){c()}),a("#"+m.name+"_dob, #"+m.name+"_jointDob").add(m.oldestPersonDob).on("change",function(){c(),e()}),m.toggleJointPolicyHolder.on("click",function(){m.jointPolicyHolder.is(":visible")?(m.jointPolicyHolder.slideUp(400,function(){g()}),m.addPolicyHolderBtn.slideDown()):(m.jointPolicyHolder.slideDown(400,function(){g()}),m.addPolicyHolderBtn.slideUp()),e()})})}function i(){k("[HomePolicyHolder] Initialised"),h(),a(document).ready(function(){d(0),c(0),e(0),m.jointPolicyHolder.hide(),(""!==a("#home_policyHolder_jointFirstName").val()||""!==a("#home_policyHolder_jointLastName").val()||""!==a("#home_policyHolder_jointDob").val()||""!==a("#home_policyHolder_jointDob").val())&&m.toggleJointPolicyHolder.click()})}var j=window.meerkat,k=(j.modules.events,j.logging.info),l={},m={name:"home_policyHolder",anyoneOlder:"home_policyHolder_anyoneOlder",oldestDOBRow:"#oldest_person_DOB",anyoneOlderRow:"#anyoneOlder",principalResidence:"home_occupancy_principalResidence",over55:".over55",otherOccupantsRow:"#home_policyHolder_other_occupants",toggleJointPolicyHolder:a(".toggleJointPolicyHolder"),jointPolicyHolder:a("#jointPolicyHolder"),addPolicyHolderBtn:a(".addPolicyHolderBtn"),oldestPersonDob:a("#home_policyHolder_oldestPersonDob")};j.modules.register("homePolicyHolder",{initHomePolicyHolder:i,togglePolicyHolderFields:d,events:l})}(jQuery),function(a,b){function c(){a("#"+k.yearBuilt).blur()}function d(b){"other"==a("#"+k.propertyType).find("option:selected").text().toLowerCase()?a(k.bestDescribesHome).slideDown(b):a(k.bestDescribesHome).slideUp(b)}function e(b){parseInt(a("#"+k.yearBuilt).find("option:selected").val())<=1914?a(k.heritage).slideDown(b):a(k.heritage).slideUp(b)}function f(){a(document).ready(function(){a("#"+k.propertyType).on("change",function(){d()}),a("#"+k.yearBuilt).on("change",function(){e()})})}function g(){i("[HomeProperties] Initialised"),f(),a(document).ready(function(){d(0),e(0)})}var h=window.meerkat,i=(h.modules.events,h.logging.info),j={},k={name:"home_property",propertyType:"home_property_propertyType",yearBuilt:"home_property_yearBuilt",bestDescribesHome:".bestDescribesHome",heritage:".heritage"};h.modules.register("homePropertyDetails",{initHomePropertyDetails:g,events:j,validateYearBuilt:c})}(jQuery),function(a,b){function c(b){var c=a(h.coverType).find("option:selected").val();switch(c){case"Contents Cover Only":case"Home & Contents Cover":a(h.name).slideDown(b);break;default:a(h.name).slideUp(b)}}function d(){f("[HomePropertiesFeatures] Initialised"),a(document).ready(function(){c(0)})}var e=window.meerkat,f=(e.modules.events,e.logging.info),g={},h={name:"#home_property",coverType:"#home_coverType"};e.modules.register("homePropertyFeatures",{initHomePropertyFeatures:d,toggleSecurityFeatures:c,events:g})}(jQuery),function(a){function b(){v=a("#resultsPage"),d(),Features.init(),x.modules.compare.initCompare(),e(),g()}function c(){g(),w!==x.modules.deviceMediaState.get()&&(Results.view.calculateResultsContainerWidth(),Features.clearSetHeights(),Features.balanceVisibleRowsHeight()),Results.pagination.refresh()}function d(){try{var a="price";"undefined"!=typeof x.site&&"undefined"!=typeof x.site.resultOptions&&(a="features"==x.site.resultOptions.displayMode?"features":"price"),Results.init({url:"ajax/json/home/results.jsp",runShowResultsPage:!1,paths:{price:{annual:"price.annual.total",monthly:"price.monthly.total"},availability:{product:"productAvailable"},productId:"productId",productBrandCode:"brandCode",productName:"headline.name"},show:{savings:!1,featuresCategories:!1,nonAvailableProducts:!1,unavailableCombined:!0},availability:{product:["equals","Y"]},render:{templateEngine:"_",features:{mode:"populate",headers:!1,numberOfXSColumns:1},dockCompareBar:!1},displayMode:a,pagination:{mode:"page",touchEnabled:Modernizr.touch,emptyContainerFunction:l,afterPaginationRefreshFunction:m},sort:{sortBy:"price.annually"},frequency:"annual",animation:{results:{individual:{active:!1},delay:500,options:{easing:"swing",duration:1e3}},shuffle:{active:!0,options:{easing:"swing",duration:1e3}},filter:{reposition:{options:{easing:"swing"}}}},elements:{features:{values:".content",extras:".children"}},templates:{pagination:{pageText:"Product {{=currentPage}} of {{=totalPages}}"}},dictionary:{valueMap:[{key:"Y",value:"<span class='icon icon-tick'></span>"},{key:"N",value:"<span class='icon icon-cross'></span>"},{key:"R",value:"Restricted / Conditional"},{key:"AI",value:"Additional Information"},{key:"O",value:"Optional"},{key:"L",value:"Limited"},{key:"SCH",value:"As shown in schedule"},{key:"NA",value:"Non Applicable"},{key:"E",value:"Excluded"},{key:"NE",value:"No Exclusion"},{key:"NS",value:"No Sub Limit"},{key:"OTH",value:""}]},rankings:{paths:{rank_productId:"productId",rank_premium:"price.annual.total"},filterUnavailableProducts:!1},incrementTransactionId:!1})}catch(b){Results.onError("Sorry, an error occurred initialising page","results.tag","meerkat.modules.homeResults.initResults(); "+b.message,b)}}function e(){a(document.body).on("click","a.offerTerms",q),a(Results.settings.elements.resultsContainer).on("click",".result-row",t),x.messaging.subscribe(y.affix.AFFIXED,function(){a("#resultsPage").css("margin-top","35px")}),x.messaging.subscribe(y.affix.UNAFFIXED,function(){a("#resultsPage").css("margin-top","0")}),x.messaging.subscribe(y.homeFilters.CHANGED,function(a){a&&(a.hasOwnProperty("homeExcess")||a.hasOwnProperty("contentsExcess"))?(x.modules.resultsTracking.setResultsEventMode("Load"),Results.settings.incrementTransactionId=!0,k(),Results.settings.incrementTransactionId=!1):x.modules.resultsTracking.setResultsEventMode("Refresh"),x.modules.session.poke()}),x.messaging.subscribe(z.RESULTS_ERROR,function(){_.delay(function(){x.modules.journeyEngine.gotoPath("previous")},1e3)}),x.messaging.subscribe(Results.model.moduleEvents.RESULTS_MODEL_UPDATE_BEFORE_FILTERSHOW,function(){f()}),a(Results.settings.elements.resultsContainer).on("featuresDisplayMode",function(){Features.buildHtml()}),a(Results.settings.elements.resultsContainer).on("noFilteredResults",function(){Results.view.show()}),a(document).on("resultsLoaded",n),a(document).on("resultsReturned",function(){x.modules.utils.scrollPageTo(a("header")),a(".featuresHeaders .expandable.expanded").removeClass("expanded").addClass("collapsed")}),a(document).on("resultsFetchStart",function(){x.modules.journeyEngine.loadingShow("getting your quotes"),a("#resultsPage, .loadingDisclaimerText").removeClass("hidden"),Results.pagination.hide()}),a(document).on("resultsFetchFinish",function(){a(Results.settings.elements.page).show(),x.modules.journeyEngine.loadingHide(),a(".loadingDisclaimerText").addClass("hidden"),"price"!==Results.getDisplayMode()?Results.pagination.show():a(document.body).removeClass("priceMode").addClass("priceMode");var b=0;a.each(Results.model.returnedProducts,function(){"Y"===this.productAvailable&&"CURR"!==this.productId&&b++}),0===b&&_.isArray(Results.model.returnedProducts)&&Results.model.returnedProducts.length>0&&o(),x.messaging.publish(y.commencementDate.RESULTS_RENDER_COMPLETED)}),a(document).on("populateFeaturesStart",function(){x.modules.performanceProfiling.startTest("results")}),a(Results.settings.elements.resultsContainer).on("populateFeaturesEnd",function(){var b,c=x.modules.performanceProfiling.endTest("results");b=800>c?x.modules.performanceProfiling.PERFORMANCE.HIGH:8e3>c&&x.modules.performanceProfiling.isIE8()===!1?x.modules.performanceProfiling.PERFORMANCE.MEDIUM:x.modules.performanceProfiling.PERFORMANCE.LOW,Results.setPerformanceMode(b);var d=x.modules.home.getCoverType();"H"===d?(a.each(a(".featuresList"),function(){a(this).children(".homeFeature").appendTo(a(this))}),a.each(a(".featuresList"),function(){a(this).children(".contentsFeature").appendTo(a(this))})):(a.each(a(".featuresList"),function(){a(this).children(".contentsFeature").appendTo(a(this))}),a.each(a(".featuresList"),function(){a(this).children(".homeFeature").appendTo(a(this))}))}),a(document).on("FeaturesRendered",function(){a(Features.target+" .expandable > "+Results.settings.elements.features.values).on("mouseenter",function(){var b=a(this).attr("data-featureId"),c=a(Features.target+' [data-featureId="'+b+'"]');c.addClass(Results.settings.elements.features.expandableHover.replace(/[#\.]/g,""))}).on("mouseleave",function(){var b=a(this).attr("data-featureId"),c=a(Features.target+' [data-featureId="'+b+'"]');c.removeClass(Results.settings.elements.features.expandableHover.replace(/[#\.]/g,""))})})}function f(a){a=a||Results.model.returnedProducts,_.each(a,function(a,b){_.isUndefined(a.price)||(_.isUndefined(a.price.annual)||_.isUndefined(a.price.annual.total)||(a.price.annual.totalFormatted=x.modules.currencyField.formatCurrency(a.price.annual.total,{roundToDecimalPlace:0})),_.isUndefined(a.price.monthly)||(_.isUndefined(a.price.monthly.total)||(a.price.monthly.totalFormatted=x.modules.currencyField.formatCurrency(a.price.monthly.total,{roundToDecimalPlace:2})),_.isUndefined(a.price.monthly.amount)||(a.price.monthly.amountFormatted=x.modules.currencyField.formatCurrency(a.price.monthly.amount,{roundToDecimalPlace:2})),_.isUndefined(a.price.monthly.firstPayment)||(a.price.monthly.firstPaymentFormatted=x.modules.currencyField.formatCurrency(a.price.monthly.firstPayment,{roundToDecimalPlace:2})))),_.isUndefined(a.HHB)||_.isUndefined(a.HHB.excess)||_.isUndefined(a.HHB.excess.amount)||(a.HHB.excess.amountFormatted=x.modules.currencyField.formatCurrency(a.HHB.excess.amount,{roundToDecimalPlace:0})),_.isUndefined(a.HHC)||_.isUndefined(a.HHC.excess)||_.isUndefined(a.HHC.excess.amount)||(a.HHC.excess.amountFormatted=x.modules.currencyField.formatCurrency(a.HHC.excess.amount,{roundToDecimalPlace:0}))})}function g(){h(),x.messaging.subscribe(y.device.STATE_ENTER_XS,function(){"results"===x.modules.journeyEngine.getCurrentStep().navigationId&&h()}),x.messaging.subscribe(y.device.STATE_LEAVE_XS,function(){i(),Results.pagination.setCurrentPageNumber(1),Results.pagination.resync()})}function h(){"xs"===x.modules.deviceMediaState.get()&&"features"===Results.getDisplayMode()&&(Results.view.startColumnWidthTracking(a(window),Results.settings.render.features.numberOfXSColumns,!1),Results.pagination.setCurrentPageNumber(1),Results.pagination.resync())}function i(){Results.view.stopColumnWidthTracking()}function j(){w=x.modules.deviceMediaState.get()}function k(){v.removeClass("coverTypeContents coverTypeHome");var a=x.modules.home.getCoverType();"H"===a?v.removeClass("coverTypeContents").addClass("coverTypeHome"):"C"===a&&v.addClass("coverTypeContents").removeClass("coverTypeHome"),Results.get()}function l(a){a.find(".btn-pagination").parent("li").remove(),a.find(".pagination-label").addClass("hidden")}function m(a){a.find(".btn-pagination").length>0&&a.find(".pagination-label").removeClass("hidden")}function n(){switch(h(),Results.getDisplayMode()){case"features":s(!1);break;default:A=!0,r(!1)}}function o(){"ctm"==x.site.tracking.brandCode&&x.modules.dialogs.show({htmlContent:a("#no-results-content")[0].outerHTML}),x.modules.hasOwnProperty("homeFilters")&&x.modules.homeFilters.disable()}function p(){var b=x.modules.home.getCoverType(),c=null,d=null;("H"==b||"HC"==b)&&(c=a("#home_homeExcess").val()||a("#home_baseHomeExcess").val()),("C"==b||"HC"==b)&&(d=a("#home_contentsExcess").val()||a("#home_baseContentsExcess").val()),x.messaging.publish(y.resultsTracking.TRACK_QUOTE_RESULTS_LIST,{additionalData:{paymentPlan:a("#navbar-filter .dropdown.filter-frequency span:first-child").text(),homeExcess:c,contentsExcess:d},onAfterEventMode:"Load"})}function q(b){x.modules.homeMoreInfo.setScrollPosition(),b.preventDefault();var c=a(b.target),d=c.next(".offerTerms-content"),e=c.closest(".resultInsert, .more-info-content, .call-modal").find(".companyLogo"),f=c.closest(".resultInsert, .more-info-content, .call-modal").find(".productTitle, .productName");x.modules.dialogs.show({title:e.clone().wrap("<p>").addClass("hidden-xs").parent().html()+"<div class='hidden-xs heading'>"+f.html()+"</div><div class='heading'>Offer terms</div>",hashId:"offer-terms",openOnHashChange:!1,closeOnHashChange:!0,htmlContent:e.clone().wrap("<p>").removeClass("hidden-xs").addClass("hidden-sm hidden-md hidden-lg").parent().html()+"<h2 class='visible-xs heading'>"+f.html()+"</h2>"+d.html()})}function r(b){"undefined"==typeof b&&(b=!0),null!==Results.getDisplayMode()&&"price"!==Results.getDisplayMode()&&(Results.pagination.hide(),a("header .xs-results-pagination").addClass("hidden"),Results.setDisplayMode("price"),i(),a(document.body).addClass("priceMode"),a(window).scrollTop(0),b&&(x.modules.resultsTracking.setResultsEventMode("Refresh"),p()))}function s(b){if("undefined"==typeof b&&(b=!0),null!==Results.getDisplayMode()&&"features"!==Results.getDisplayMode()){var c=A===!0;Results.setDisplayMode("features",c),h(),_.defer(function(){Results.pagination.gotoPage(1),"xs"===x.modules.deviceMediaState.get()&&Results.view.setColumnWidth(a(window),Results.settings.render.features.numberOfXSColumns,!1),Results.pagination.setupNativeScroll()}),Results.pagination.show(!0),a("header .xs-results-pagination").removeClass("hidden"),A=!1,a(document.body).removeClass("priceMode"),a(window).scrollTop(0),b&&(x.modules.resultsTracking.setResultsEventMode("Refresh"),p())}}function t(b){if(a(Results.settings.elements.resultsContainer).hasClass("priceMode")!==!1&&"xs"===x.modules.deviceMediaState.get()){var c=a(b.target);c.hasClass("result-row")===!1&&(c=c.parents(".result-row")),"undefined"!=typeof c.attr("data-available")&&"Y"===c.attr("data-available")&&(x.modules.moreInfo.setProduct(Results.getResult("productId",c.attr("data-productId"))),x.modules.homeMoreInfo.runDisplayMethod())}}function u(){x.messaging.subscribe(y.RESULTS_RANKING_READY,p),x.messaging.subscribe(y.compare.AFTER_ENTER_COMPARE_MODE,function(){a(".filter-excess, .filter-excess a, .excess-update, .excess-update a").addClass("disabled"),a(".filter-featuresmode, .filter-pricemode").addClass("hidden")}),x.messaging.subscribe(y.compare.EXIT_COMPARE,function(){a(".filter-excess, .filter-excess a, .excess-update, .excess-update a").removeClass("disabled"),a(".filter-featuresmode, .filter-pricemode").removeClass("hidden")})}var v,w,x=window.meerkat,y=x.modules.events,z=(x.logging.info,{RESULTS_ERROR:"RESULTS_ERROR"}),A=!1;x.modules.register("homeResults",{init:u,initPage:b,onReturnToPage:c,get:k,stopColumnWidthTracking:i,recordPreviousBreakpoint:j,switchToPriceMode:r,switchToFeaturesMode:s,showNoResults:o,publishExtraSuperTagEvents:p})}(jQuery),function(a,b){function c(a){var b=!1;switch(a){case"buttonLabel":b="Save Quote";break;case"saveAgain":b='Click \'Save Quote\' to update your saved quote <a href="javascript:;" class="btn btn-save saved-continue-link btn-save-quote">Save Quote</a>';break;case"saveSuccess":b='<div class="col-xs-12"><h4>Your quote has been saved.</h4><p>To retrieve your quote <a href="'+d.site.urls.base+'retrieve_quotes.jsp" class="btn-cancel saved-continue-link btn-link">click here</a>.</p><a href="javascript:;" class="btn btn-cancel">Close</a></div>'}return b}var d=window.meerkat,e=(d.modules.events,d.logging.info,d.messaging,{});d.modules.register("homeSaveQuote",{events:e,getCopy:c})}(jQuery),function(a,b){function c(){d(e()),h.on("change",function(){d(e())}),a("#home_property_address_streetSearch, #home_property_address_streetNum, #home_property_address_postCode, #home_property_address_suburb, #home_property_address_nonStdStreet").on("blur",function(){setTimeout(function(){d()},50)})}function d(a){""!==h.val()&&(i.removeClass("hidden"),"undefined"!=typeof a&&i.find(".icon:first").attr("class","icon").addClass(a)),f.modules.contentPopulation.render(".journeyEngineSlide:eq(0) .snapshot")}function e(){var a="icon-home-contents";switch(h.val()){case"Home Cover Only":a="icon-house";break;case"Contents Cover Only":a="icon-contents"}return a}var f=window.meerkat,g={homeSnapshot:{}},h=a("#home_coverType"),i=a(".quoteSnapshot");f.modules.register("homeSnapshot",{init:c,events:g,getIcon:e})}(jQuery);
//# sourceMappingURL=home.modules.ctm.min.map