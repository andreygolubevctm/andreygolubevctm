/*!
 * CTM-Platform v0.8.1
 * Copyright 2014 Compare The Market Pty Ltd
 * http://www.comparethemarket.com.au/
 */


function ISODateString(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"}function printStackTrace(a){a=a||{guess:!0};var b=a.e||null;a=!!a.guess;var c=new printStackTrace.implementation,b=c.run(b);return a?c.guessAnonymousFunctions(b):b}!function(a){var b,c;b=window.meerkat=window.meerkat||{},c={},b.messaging={},b.messaging.channels={},b.messaging.subscribe=function(a,c,d){return handler={callback:c,context:d||window},b.messaging.channels[a]||(b.messaging.channels[a]=[]),b.messaging.channels[a].push(handler),handler},b.messaging.unsubscribe=function(a,c){var d=b.messaging.channels[a];if(b.messaging.channels[a]){var e=d.indexOf(c);if(e>-1)return d.splice(e,1),!0}return!1},b.messaging.publish=function(a){var c;if(!b.messaging.channels[a])return!1;c=Array.prototype.slice.call(arguments,1);for(var d=0;d<b.messaging.channels[a].length;d++){var e=b.messaging.channels[a][d];e.callback.apply(e.context,c)}return this},b.site={},b.site.init=function(a){_.extend(b,{site:a})},b.getModule=function(b,c,d){var e=a(b).closest("[data-module]"),f=function(){var a=!0;return e.length&&e.data("module")?(c&&(a=a&&e.data("module").type===c),d&&(a=a&&e.data("module").subtype===d),a):!1};for(f(e);!f(e)&&e.length;)e=e.parent().closest("[data-module]");return f(e)&&e},b.init=function(a,d){_.extend(c,d||{}),b.site.init(a),b.logging.init(),b.modules.init()}}(jQuery),meerkat.logging={};var Driftwood=new function(){this.logger=function(){function a(a){var b=document.createElement("script");b.src=a,document.body.appendChild(b)}function b(){}function c(a){var b=i.serverPath+encodeURIComponent(JSON.stringify(a));return b}function d(a){var b={application_name:i.applicationName,message:a||"",url:window.location.toString(),language:"javascript",custom_data:{hostname:window.location.hostname,user_agent:navigator.userAgent||"",referrer:document.referrer||"",cookies:document.cookie||""},backtrace:e(a),exception_class:"Javascript#Unknown"};return b}function e(a){var b=["no backtrace"];return b="object"==typeof a?printStackTrace({e:a}):printStackTrace()}function f(e,f){var g=null;"object"==typeof e&&(g=e,e=g.message);var h=d(e,f),j=c(h);i.cors===!0?a(j):b(j)}function g(a,b,c){var d=j(b),e=new Date,g=a[0];if(d>=i.consoleLevelId&&(a[0]=b+":["+ISODateString(e)+"] "+a[0]),d>=i.exceptionLevelId&&f(a[0]),d>=4){var h="Sorry, we have encounted an error. Please try again.";"development"==i.mode&&(h+="["+g+"]"),meerkat.modules.errorHandling.error({fatal:!1,silent:!0,page:"meerkat.logging.js",message:h,description:g})}"Microsoft Internet Explorer"!=navigator.appName&&c.apply(console,Array.prototype.slice.call(a))}var h=["NONE","DEBUG","INFO","ERROR","EXCEPTION","NONE"],i={consoleLevel:"DEBUG",consoleLevelId:0,exceptionLevel:"NONE",exceptionLevelId:99,mode:"development",serverPath:"/exceptions/notify?payload=",applicationName:"js_client",cors:!0},j=function(a){return h.indexOf(a.toUpperCase())};return{setServerPath:function(a){i.serverPath=a},env:function(a){"development"==a.toLowerCase()?(i.consoleLevel="DEBUG",i.exceptionLevel="none",i.consoleLevelId=0,i.exceptionLevelId=4):"production"==a.toLowerCase()?(i.consoleLevel="ERROR",i.exceptionLevel="none",i.consoleLevelId=2,i.exceptionLevelId=3):console.log("Unknown environment level")},applicationName:function(a){i.applicationName=a},logLevel:function(a){var b=j(a);b>-1?(i.consoleLevel=a.toUpperCase(),i.consoleLevelId=b):console.log("Setting an invalid log level: "+a)},exceptionLevel:function(a){var b=j(a);b>-1?(i.exceptionLevel=a.toUpperCase(),i.exceptionLevelId=b):console.log("Setting an invalid log level: "+a)},debug:function(){g(arguments,"DEBUG",console.debug)},info:function(){g(arguments,"INFO",console.info)},error:function(){g(arguments,"ERROR",console.error)},exception:function(a){g(a,"EXCEPTION",console.error)}}},defaultLogger=new this.logger,this.exception=function(){defaultLogger.exception(arguments)},this.applicationName=function(a){defaultLogger.applicationName(a)},this.debug=defaultLogger.debug,this.info=defaultLogger.info,this.error=defaultLogger.error,this.env=function(a){defaultLogger.env(a)},this.setServerPath=function(a){defaultLogger.setServerPath(a)},this.exceptionLevel=function(a){"NONE"!=a?defaultLogger.exceptionLevel(a):(this.debug=_.bind(console.debug,console),this.info=_.bind(console.info,console),this.error=_.bind(console.error,console),this.log=_.bind(console.log,console))},this.logLevel=function(a){defaultLogger.logLevel(a)}};window.onerror=function(a,b,c){Driftwood.exception(a,{url:b,line:c})},Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1});var JSON;if(JSON||(JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,!b||"function"==typeof b||"object"==typeof b&&"number"==typeof b.length)return str("",{"":a});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),printStackTrace.implementation=function(){},printStackTrace.implementation.prototype={run:function(a,b){return a=a||this.createException(),b=b||this.mode(a),"other"===b?this.other(arguments.callee):this[b](a)},createException:function(){try{this.undef()}catch(a){return a}},mode:function(a){return a.arguments&&a.stack?"chrome":a.stack&&a.sourceURL?"safari":a.stack&&a.number?"ie":a.stack&&a.fileName?"firefox":a.message&&a["opera#sourceloc"]?!a.stacktrace||-1<a.message.indexOf("\n")&&a.message.split("\n").length>a.stacktrace.split("\n").length?"opera9":"opera10a":a.message&&a.stack&&a.stacktrace?0>a.stacktrace.indexOf("called from line")?"opera10b":"opera11":a.stack&&!a.fileName?"chrome":"other"},instrumentFunction:function(a,b,c){a=a||window;var d=a[b];a[b]=function(){return c.call(this,printStackTrace().slice(4)),a[b]._instrumented.apply(this,arguments)},a[b]._instrumented=d},deinstrumentFunction:function(a,b){a[b].constructor===Function&&a[b]._instrumented&&a[b]._instrumented.constructor===Function&&(a[b]=a[b]._instrumented)},chrome:function(a){return(a.stack+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},safari:function(a){return a.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(a){return a.stack.replace(/^\s*at\s+(.*)$/gm,"$1").replace(/^Anonymous function\s+/gm,"{anonymous}() ").replace(/^(.+)\s+\((.+)\)$/gm,"$1@$2").split("\n").slice(1)},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},opera11:function(a){var b=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/;a=a.stacktrace.split("\n");for(var c=[],d=0,e=a.length;e>d;d+=2){var f=b.exec(a[d]);if(f){var g=f[4]+":"+f[1]+":"+f[2],f=f[3]||"global code",f=f.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,"{anonymous}");c.push(f+"@"+g+" -- "+a[d+1].replace(/^\s+/,""))}}return c},opera10b:function(a){var b=/^(.*)@(.+):(\d+)$/;a=a.stacktrace.split("\n");for(var c=[],d=0,e=a.length;e>d;d++){var f=b.exec(a[d]);f&&c.push((f[1]?f[1]+"()":"global code")+"@"+f[2]+":"+f[3])}return c},opera10a:function(a){var b=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;a=a.stacktrace.split("\n");for(var c=[],d=0,e=a.length;e>d;d+=2){var f=b.exec(a[d]);f&&c.push((f[3]||"{anonymous}")+"()@"+f[2]+":"+f[1]+" -- "+a[d+1].replace(/^\s+/,""))}return c},opera9:function(a){var b=/Line (\d+).*script (?:in )?(\S+)/i;a=a.message.split("\n");for(var c=[],d=2,e=a.length;e>d;d+=2){var f=b.exec(a[d]);f&&c.push("{anonymous}()@"+f[2]+":"+f[1]+" -- "+a[d+1].replace(/^\s+/,""))}return c},other:function(a){for(var b,c,d=/function\s*([\w\-$]+)?\s*\(/i,e=[],f=Array.prototype.slice;a&&a.arguments&&10>e.length;){b=d.test(a.toString())?RegExp.$1||"{anonymous}":"{anonymous}",c=f.call(a.arguments||[]),e[e.length]=b+"("+this.stringifyArguments(c)+")";try{a=a.caller}catch(g){e[e.length]=""+g;break}}return e},stringifyArguments:function(a){for(var b=[],c=Array.prototype.slice,d=0;d<a.length;++d){var e=a[d];void 0===e?b[d]="undefined":null===e?b[d]="null":e.constructor&&(b[d]=e.constructor===Array?3>e.length?"["+this.stringifyArguments(e)+"]":"["+this.stringifyArguments(c.call(e,0,1))+"..."+this.stringifyArguments(c.call(e,-1))+"]":e.constructor===Object?"#object":e.constructor===Function?"#function":e.constructor===String?'"'+e+'"':e.constructor===Number?e:"?")}return b.join(",")},sourceCache:{},ajax:function(a){var b=this.createXMLHTTPObject();if(b)try{return b.open("GET",a,!1),b.send(null),b.responseText}catch(c){}return""},createXMLHTTPObject:function(){for(var a,b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0;c<b.length;c++)try{return a=b[c](),this.createXMLHTTPObject=b[c],a}catch(d){}},isSameDomain:function(a){return"undefined"!=typeof location&&-1!==a.indexOf(location.hostname)},getSource:function(a){return a in this.sourceCache||(this.sourceCache[a]=this.ajax(a).split("\n")),this.sourceCache[a]},guessAnonymousFunctions:function(a){for(var b=0;b<a.length;++b){var c=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,d=a[b],e=/\{anonymous\}\(.*\)@(.*)/.exec(d);if(e){var f=c.exec(e[1]);f&&(c=f[1],e=f[2],f=f[3]||0,c&&this.isSameDomain(c)&&e&&(c=this.guessAnonymousFunction(c,e,f),a[b]=d.replace("{anonymous}",c)))}}return a},guessAnonymousFunction:function(a,b){var c;try{c=this.findFunctionName(this.getSource(a),b)}catch(d){c="getSource failed with url: "+a+", exception: "+d.toString()}return c},findFunctionName:function(a,b){for(var c,d,e=/function\s+([^(]*?)\s*\(([^)]*)\)/,f=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,g=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,h="",i=Math.min(b,20),j=0;i>j;++j)if(c=a[b-j-1],d=c.indexOf("//"),d>=0&&(c=c.substr(0,d)),c&&(h=c+h,(c=f.exec(h))&&c[1]||(c=e.exec(h))&&c[1]||(c=g.exec(h))&&c[1]))return c[1];return"(?)"}},"undefined"==typeof console)var console={log:function(){}};Function.prototype.bind&&console&&"object"==typeof console.log&&["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(a){console[a]=this.bind(console[a],console)},Function.prototype.call),"undefined"==typeof console.debug&&(console.debug=console.log),meerkat.logging.logger=Driftwood,meerkat.logging.debug=meerkat.logging.logger.debug,meerkat.logging.info=meerkat.logging.logger.info,meerkat.logging.error=meerkat.logging.logger.error,meerkat.logging.exception=meerkat.logging.logger.exception,meerkat.logging.init=function(){var a="";a=""!==meerkat.site.vertical?"["+meerkat.site.brand+"] ["+meerkat.site.vertical+"]":"["+meerkat.site.brand+"]",meerkat.logging.logger.applicationName(a),meerkat.logging.logger.setServerPath(meerkat.site.logpath);var b=meerkat.site.isDev?"development":"production";meerkat.logging.logger.env(b),meerkat.logging.info("[logging]","Sergei sees you runnings on "+meerkat.site.environment+" ("+b+"s mode).")},function(){function a(a,b){if(d[a])throw"A module is already defined with the key: "+a;d[a]=b,d[a].moduleName=a,"function"==typeof b.init&&f.push(a),"function"==typeof b.events?_.extend(e,d[a].events()):"object"==typeof d.events&&_.extend(e,d[a].events)}function b(){for(f=f.reverse();f.length;){var a=f.pop();d[a].init()}}var c=window.meerkat,d=(c.logging.info,{}),e={},f=[];d=c.modules={register:a,init:b},c.modules.events=e}(jQuery),function(a){function b(a){window.location.hash=a}function c(a){l.defaultHash=a}function d(a){-1==_.indexOf(g(),a)&&(window.location.hash=i()+"/"+a)}function e(a){for(var b=j.modules.address.getWindowHashAsArray(),c=b.length-1;c>=0;c--)b[c]==a&&b.splice(c,1);window.location.hash=b.join("/")}function f(){a(window).on("hashchange",function(){j.messaging.publish(k.ADDRESS_CHANGE,{hash:j.modules.address.getWindowHash(),hashArray:j.modules.address.getWindowHashAsArray()})})}function g(){return i().split("/")}function h(a){var b=g();return a>=b.length?"":b[a]}function i(){var a=window.location.hash;return null!=a?a.replace("#",""):""}var j=window.meerkat,k=(j.logging.info,{ADDRESS_CHANGE:"ADDRESS_CHANGE"}),l={defaultHash:""};j.modules.register("address",{init:f,events:k,getWindowHashAsArray:g,getWindowHash:i,setHash:b,appendToHash:d,removeFromHash:e,setStartHash:c,getWindowHashAt:h})}(jQuery),function(a){function b(b){b.each(function(b,c){$item=a(c),$item.affix({offset:{top:function(){var a=$item.offset().top;return this.top=a}}})})}function c(){d.messaging.subscribe(e.journeyProgressBar.INIT,function(){d.modules.performanceProfiling.isIE8()===!1&&b(a(".navbar-affix"))})}{var d=window.meerkat,e=d.modules.events;window.meerkat.logging.info}d.modules.register("affix",{init:c})}(jQuery),function(a){function b(){var b=a("input.typeahead");b.each(function(){var b=a(this),f={name:b.attr("name"),remote:{beforeSend:function(){c(b)},filter:function(a){return d(b),a},url:b.attr("data-source-url")+"%QUERY"},limit:150};f=e(b,f),b.typeahead(f),b.hasClass("input-lg")&&b.prev(".tt-hint").addClass("hint-lg"),b.hasClass("input-sm")&&b.prev(".tt-hint").addClass("hint-sm"),b.hasClass("blur-on-select")&&b.bind("typeahead:selected",function(a,b){b.hasOwnProperty("value")&&"Type your address..."===b.value||a&&a.target&&a.target.blur&&a.target.blur()})})}function c(a){a.hasClass("show-loading")&&g.modules.loadingAnimation.showInside(a.parent(".twitter-typeahead"))}function d(a){a.hasClass("show-loading")&&g.modules.loadingAnimation.hide(a.parent(".twitter-typeahead"))}function e(a,b){return a&&a.hasClass("typeahead-address")&&(b.remote.url=a.attr("id"),b.remote.replace=f,b.valueKey="value",b.template=_.template("<p><%= highlight %></p>"),a.hasClass("typeahead-streetSearch")&&(b.remote.filter=function(b){return d(a),0===b.length&&b.push({value:"Type your address...",highlight:"Can't find your address? <u>Click here.</u>"}),b},a.bind("typeahead:selected",function(a,b){if(b.hasOwnProperty("value")&&"Type your address..."===b.value){var c="";a.target&&a.target.id&&(c=a.target.id.replace("_streetSearch","")),g.messaging.publish(h.CANT_FIND_ADDRESS,{fieldgroup:c})}}))),b}function f(b){var c=a("#"+b);return b="",c.trigger("getSearchURL"),c.data("source-url")&&(b=c.data("source-url")),b}var g=window.meerkat,h={CANT_FIND_ADDRESS:"EVENT_CANT_FIND_ADDRESS"};g.modules.register("autocomplete",{init:b,events:h})}(jQuery),function(a){function b(){jQuery(document).ready(function(){c()}),r.subscribe(q.modules.events.contactDetails.name.FIELD_CHANGED,function(b){H="undefined"!=typeof b.$otherField?a.trim(1===b.fieldIndex?b.$field.val()+" "+b.$otherField.val():b.$otherField.val()+" "+b.$field.val()):b.$field.val()}),r.subscribe(q.modules.events.contactDetails.mobile.FIELD_CHANGED,function(a){I=a.$field.val()}),r.subscribe(q.modules.events.contactDetails.otherPhone.FIELD_CHANGED,function(a){J=a.$field.val()}),r.subscribe(t.VALID,o),r.subscribe(t.INVALID,p)}function c(){u=a(v),w=a(x),y=a(z),A=a(B),u.off("keyup").on("keyup",e),w.off("keyup").on("keyup",e),w.off("focusout").on("focusout",function(){a(this).siblings("[type=hidden]").val(a(this).val().replace(/[^0-9]+/g,""))}),y.off("change").on("change",e),C=a(".call-me-back-submit"),E=a(".call-me-back-form"),C.off("click").on("click",function(){f(a(this).parents("form").first())}),n()}function d(a){null!==H&&a.find(v).val(H),null!==I?a.find(x).val(I):null!==J&&a.find(x).val(J)}function e(){m(a(this).parents("form").first());var b=""!==D.find(u).val(),c=""!==D.find(w).val(),d=""!==D.find(y).val();r.publish(b&&c&&d&&D.valid()?t.VALID:t.INVALID)}function f(b){if(m(b),(!F||"pending"!==F.state())&&D.valid()&&!G){D.find(B).val("Y");var c=[];c.push(q.modules.form.getSerializedData(D)),c.push(q.modules.journeyEngine.getSerializedFormData()),c.push("quoteType="+q.site.vertical),c=c.join("&"),r.publish(t.INVALID),q.modules.loadingAnimation.showAfter(C),F=q.modules.comms.post({url:"ajax/write/request_callback.jsp",data:c,dataType:"json",cache:!1,isFatalError:!1,onSuccess:function(b){G=!0,q.messaging.publish(t.REQUESTED,{phone:D.find(w).val(),name:D.find(u).val()}),h(),i();var c=a("#mainform");D.find(":input").each(function(){$this=a(this),q.modules.form.appendHiddenField(c,$this.attr("name"),$this.val())}),q.modules.form.appendHiddenField(c,q.site.vertical+"_callmeback_time",b.time),q.modules.form.appendHiddenField(c,q.site.vertical+"_callmeback_date",b.date),0===a("#requested_callmeback_time").length&&q.modules.form.appendHiddenField(c,"requested_callmeback_time",b.time),0===a("#requested_callmeback_date").length&&q.modules.form.appendHiddenField(c,"requested_callmeback_date",b.date)},onError:function(){h(),j(),r.publish(t.VALID)},onComplete:function(){q.modules.loadingAnimation.hide(C)}})}}function g(){return G}function h(){E.each(function(){a(this).hide()})}function i(){E.each(function(){a(this).after(k())})}function j(){E.each(function(){a(this).after('<form class="callmeback-feedback"><h5>Call back service offline</h5><p>Sadly our call back service is offline - Please try again later.</p></form>')})}function k(){return'<form class="callmeback-feedback"><h5>Someone will call you</h5><p>Thank you, a member of our staff will call you in the '+l(D.find(y).val())+"</p></form>"}function l(a){switch(a){case"M":time="morning";break;case"A":time="afternoon";break;default:time="evening (excludes WA)"}return time}function m(a){D=a}function n(){E.each(function(){setupDefaultValidationOnForm(a(this))}),u.length>0&&u.add("rules",{required:!0,messages:{required:"Please enter your name"}}),w.length>0&&w.add("rules",{validateTelNo:!0,messages:{validateTelNo:"Please enter the contact number in the format (area code)(local number) for landline or 04xxxxxxxx for mobile"}}),y.length>0&&y.add("rules",{required:!0,messages:{required:"Please select when you want us to call you back"}})}function o(){null!==D&&D.find(C).removeClass("disabled")}function p(){null!==D&&D.find(C).addClass("disabled")}var q=window.meerkat,r=(q.modules.events,q.logging.info,q.messaging),s={callMeBack:{REQUESTED:"CALL_ME_BACK_REQUESTED",VALID:"CALL_ME_BACK_VALID",INVALID:"CALL_ME_BACK_INVALID"}},t=s.callMeBack,u=null,v=".callmeback_name",w=null,x=".callmeback_phone",y=null,z=".callmeback_timeOfDay",A=null,B=".callmeback_optin",C=null,D=null,E=null,F=null,G=!1,H=null,I=null,J=null;q.modules.register("callMeBack",{init:b,events:s,hasCallbackBeenRequested:g,prefillForm:d,updateSelectedElements:c,submitCallMeBack:f})}(jQuery),function(a){function b(){jQuery(document).ready(function(a){$modalContent=a("#callMeBackModalContent"),$openButton=a("#callMeBackTabButton"),$openButton.on("click",c)}),j.subscribe(i.callMeBack.VALID,e),j.subscribe(i.callMeBack.INVALID,f),j.subscribe(i.callMeBack.REQUESTED,g)}function c(){var b=h.modules.dialogs.show({title:"Get a call back",htmlContent:$modalContent.html(),buttons:[{label:isRequested?"Close":"Cancel",className:"btn-default modal-call-me-back-close",closeWindow:!0},{label:"Call me",className:"btn-primary disabled modal-call-me-back-submit"+(isRequested?" displayNone":""),action:d}],onClose:function(){$openButton.fadeIn()}});$currentCallMeBackModal=a("#"+b),h.modules.callMeBack.updateSelectedElements(),h.modules.callMeBack.prefillForm($currentCallMeBackModal.find("form")),$currentCallMeBackModal.find("h5").hide(),$currentCallMeBackModal.find(".call-me-back-submit").hide(),$openButton.fadeOut();var c=$currentCallMeBackModal.find(".callmeback_name"),e=$currentCallMeBackModal.find(".callmeback_phone");""===c.val()?c.focus():""===e.val()?e.focus():$currentCallMeBackModal.find(".callmeback_timeOfDay").focus()}function d(){h.modules.callMeBack.submitCallMeBack($currentCallMeBackModal.find("form"))}function e(){null!==$currentCallMeBackModal&&$currentCallMeBackModal.find(".modal-call-me-back-submit").removeClass("disabled")}function f(){null!==$currentCallMeBackModal&&$currentCallMeBackModal.find(".modal-call-me-back-submit").addClass("disabled")}function g(){isRequested=!0,null!==$currentCallMeBackModal&&($currentCallMeBackModal.find(".modal-call-me-back-submit").hide(),$currentCallMeBackModal.find(".modal-call-me-back-close").html("Close"))}{var h=window.meerkat,i=h.modules.events,j=h.messaging,k=(h.logging.info,{callMeBackTab:{}});k.callMeBackTab}$currentCallMeBackModal=null,isRequested=!1,h.modules.register("callMeBackTab",{init:b})}(jQuery),function(a){function b(b){var c=a.extend({},l,b),e=g(c);return e===!0?!0:d(c,{url:c.url,data:c.data,dataType:c.dataType,type:"POST",timeout:c.timeout})}function c(b){var c=a.extend({},l,b),e=g(c);return e===!0?!0:d(c,{url:c.url,type:"GET"})}function d(b,c){return a.ajax(c).then(function(a,c,d){var f="undefined"!=typeof b.data?b.data:null;h(a)===!0?i(d,"Server generated error",f.error,b,f):(b.cache===!0&&e(b.url,f,a),null!=b.onSuccess&&b.onSuccess(a),null!=b.onComplete&&b.onComplete(d,c))},function(a,c,d){var e="undefined"!=typeof b.data?b.data:null;i(a,c,d,b,e),null!=b.onComplete&&b.onComplete(a,c)})}function e(a,b,c){k.push({url:a,postData:b,result:c})}function f(a){for(var b=0;b<k.length;b++){var c=k[b];if(a.url===c.url){if(null===a.data&&null===c.postData)return c;if(null!==a.data&&null!==c.postData&&_.isEqual(a.data,c.postData))return c}}return null}function g(a){if(a.cache===!0){var b=f(a);if(null!==b)return j.logging.info("Retrieved from cache",b),null!=a.onSuccess&&a.onSuccess(b.result),null!=a.onComplete&&a.onComplete(),!0}return!1}function h(a){return"undefined"!=typeof a.error?!0:!1}function i(a,b,c,d,e){"undefined"==typeof d&&(d={}),d.useDefaultErrorHandling&&d.onErrorDefaultHandling(a,b,c,d,e),null!=d.onError&&d.onError(a,b,c,d,e)}var j=window.meerkat,k=[],l={url:"not-set",data:null,dataType:!1,numberOfAttempts:1,timeout:6e4,cache:!1,isFatalError:!1,useDefaultErrorHandling:!0,onSuccess:function(){},onError:function(){},onComplete:function(){},onErrorDefaultHandling:function(a,b,c,d,e){var f={400:"There was a problem with the last request to the server [400]. Please try again.",401:"There was a problem accessing the data for the last request [401].",403:"There was a problem accessing the data for the last request [403].",404:"The requested page could not be found [404]. Please try again.",500:"There was a problem with your last request to the server [500]. Please try again.",503:"There was a problem with your last request to the server [503]. Please try again."},g="";a.status&&200!=a.status?g=f[a.status]:"parsererror"==b?g+="There was a problem handling the response from the server [parsererror]. Please try again.":"timeout"==b?g+="There was a problem connecting to the server. Please check your internet connection and try again. [Request Time out].":"abort"==b&&(g+="There was a problem handling the response from the server [abort]. Please try again."),g&&""!==g||(g="Unknow Error"),j.modules.errorHandling.error({fatal:d.isFatalError,message:g,page:"comms.js",description:"Error loading url: "+d.url+" : "+b+" "+c,data:e})}};j.modules.register("comms",{post:b,get:c})}(jQuery),function(a){function b(){}function c(a){F=_.extend(F,a),_.each(F,function(a,b){_.each(a,function(a,c){var e=_.extend(a,{index:c,type:b,fieldIndex:1});d(e),h(e),"undefined"!=typeof e.$otherField&&(e=_.extend({},e,{alternateOtherField:!0,fieldIndex:2}),d(e))})}),prefillLaterFields=!0}function d(b){var c=w(b);"undefined"!=typeof b.alternateOtherField&&b.alternateOtherField&&(c=b.$otherField),c.on("change.contactDetails",function(){$this=a(this),_.defer(function(){e($this,b)})}),e(c,b,!1)}function e(a,b,c){if("undefined"==typeof c&&(c=!0),a.isValid())if(f(b))g(b,c);else{var d=i(b);c&&j(d),l(d)}}function f(b){var c=["email"];return"undefined"!=b.$optInField&&-1!==a.inArray(b.type,c)?!0:!1}function g(a,b){C.modules.loadingAnimation.showAfter(a.$field);var c={data:{type:a.type,value:a.$field.val()},onComplete:function(){C.modules.loadingAnimation.hide(a.$field)},onSuccess:function(c){var d={optins:{email:c.optInMarketing}},e=_.extend(i(a),d);b&&j(e),l(e)},onError:function(){t(a.$optInField)}};C.modules.optIn.fetch(c)}function h(a){"undefined"!=typeof a.$optInField&&a.$optInField.on("change.contactDetails",function(){var b=i(a);k(b),v(b)})}function i(a){var b={index:a.index,type:a.type,$field:w(a),$otherField:a.$otherField,fieldIndex:a.fieldIndex,$savedField:a.$field,$optInField:a.$optInField};return"undefined"!=typeof a.alternateOtherField&&a.alternateOtherField&&(b.$otherField=b.$field,b.$field=a.$otherField),b}function j(a){D.publish(a.type.toUpperCase()+"_FIELD_CHANGED",a)}function k(a){D.publish(a.type.toUpperCase()+"_OPTIN_FIELD_CHANGED",a)}function l(a){"undefined"!=typeof a.$optInField&&m(a)&&s(a.$optInField,a.optins[a.type]),prefillLaterFields&&a.index!==F[a.type].length&&x(a)}function m(a){return n(a)&&!o(a)}function n(a){return"undefined"!=typeof a.optins&&"undefined"!=typeof a.optins[a.type]?!0:!1}function o(a){return q(a).length>1}function p(a){var b=q(a),c=!0;return _.each(b,function(a){a.$field.isValid()||(c=!1)}),c}function q(a){var b=[];return _.each(r(),function(c){"undefined"!=typeof c.$optInField&&c.$optInField.is(a.$optInField)&&b.push(c)}),b}function r(){var a=[];return _.each(F,function(b,c){_.each(b,function(b){a.push(_.extend(b,{type:c}))})}),a}function s(a,b){b?u(a):t(a)}function t(a){A(a,!1),a.parents(".fieldrow").first().slideDown()}function u(a){a.parents(".fieldrow").first().slideUp(),a.attr("data-visible","true"),A(a,!0)}function v(a){prefillLaterFields&&a.index!==F[a.type].length&&y(a)}function w(a){var b=null;return b="undefined"!=typeof a.$fieldInput?a.$fieldInput:a.$field}function x(a){var b=a.$field,c="undefined"==typeof b.attr("data-previous-value")?"":b.attr("data-previous-value"),d=b.val();b.attr("data-previous-value",d);var e;e="undefined"==typeof a.$optInField?null:n(a)?a.optins[a.type]||z(a.$optInField):z(a.$optInField);for(var f=a.index+1;f<F[a.type].length;f++){var g=_.extend(F[a.type][f],{type:a.type}),h=w(g);if(!(""!==h.val()&&c!==h.val()||"undefined"!=typeof g.$otherField&&""!==g.$otherField.val())){if("name"==a.type&&"undefined"!=typeof g.$otherField){var i=d.split(" ");h.val(i[0]),g.$otherField.val(i.slice(1).join(" "))}else h.val(d).attr("data-previous-value",d);(C.modules.performanceProfiling.isIE8()||C.modules.performanceProfiling.isIE9())&&C.modules.placeholder.invalidatePlaceholder("undefined"!=typeof g.$fieldInput?g.$fieldInput:h),"undefined"!=typeof g.$fieldInput&&h.trigger("change").trigger("blur").trigger("focusout"),"undefined"==typeof g.$optInField||o(g)||s(g.$optInField,e)}}}function y(a){var b=z(a.$optInField),c=null;if(n(a)&&(c=a.optins[a.type]),"undefined"!=typeof b)for(var d=a.index+1;d<F[a.type].length;d++){var e=_.extend(F[a.type][d],{type:a.type});"undefined"!=typeof e.$optInField&&(b&&!o(e)?s(e.$optInField,b):(t(e.$optInField),A(e.$optInField,b)))}}function z(b){var c=b.attr("type"),d=null;if("checkbox"==c)d=b.is(":checked");else{if("radio"!=c)return!1;b.each(function(){return a(this).is(":checked")?(d="Y"==b.val(),!1):void 0})}return d}function A(b,c){var d=b.attr("type");if("checkbox"==d)b.prop("checked",c);else if("radio"==d){var e=null;e=c?"Y":"N",b.each(function(){return a(this).val()==e?(a(this).prop("checked",!0).trigger("change"),!1):void 0})}}function B(){return F}var C=window.meerkat,D=(C.modules.events,C.logging.info,C.messaging),E={contactDetails:{name:{FIELD_CHANGED:"NAME_FIELD_CHANGED",OPTIN_FIELD_CHANGED:"NAME_OPTIN_FIELD_CHANGED"},email:{FIELD_CHANGED:"EMAIL_FIELD_CHANGED",OPTIN_FIELD_CHANGED:"EMAIL_OPTIN_FIELD_CHANGED"},phone:{FIELD_CHANGED:"PHONE_FIELD_CHANGED",OPTIN_FIELD_CHANGED:"PHONE_OPTIN_FIELD_CHANGED"},mobile:{FIELD_CHANGED:"MOBILE_FIELD_CHANGED",OPTIN_FIELD_CHANGED:"MOBILE_OPTIN_FIELD_CHANGED"},otherPhone:{FIELD_CHANGED:"OTHERPHONE_FIELD_CHANGED",OPTIN_FIELD_CHANGED:"OTHERPHONE_OPTIN_FIELD_CHANGED"}}},F=(E.contactDetails,{});prefillLaterFields=!0,C.modules.register("contactDetails",{init:b,events:E,configure:c,getFields:B,getFieldsFromOptInGroup:q,isOptInGroupValid:p,isPartOfOptInGroup:o})}(jQuery),function(a){function b(){a(document).ready(function(){a.fn.datepicker.defaults.format="dd/mm/yyyy",a.fn.datepicker.defaults.autoclose=!0,a.fn.datepicker.defaults.forceParse=!1,a.fn.datepicker.defaults.weekStart=1,a.fn.datepicker.defaults.todayHightlight=!0,a.fn.datepicker.defaults.clearBtn=!0,a("[data-provide=datepicker]").each(function(){var b=a(this);b.siblings(".input-group-addon").on("click",function(){b.datepicker("show")})})}),a(document).on("hide",'[data-provide="datepicker"]',function(b){b.target&&(a(b.target).is(":focus")||a(b.target).blur())})}{var c=window.meerkat;c.logging.info}c.modules.register("datepicker",{init:b})}(jQuery),function(){function a(){function a(a){var b,c=a.target,d=c.tagName.toLowerCase();if(a.shiftKey&&83===a.which&&"input"!==d&&"textarea"!==d&&"select"!==d){b=document.getElementsByTagName("link");
for(var e=0;e<b.length;e++){var f=b[e];if(f.rel.toLowerCase().indexOf("stylesheet")>=0){var g=f.getAttribute("href");g=g.replace(/(&|\?)forceReload=\d+/,""),g=g+(g.indexOf("?")>=0?"&":"?")+"forceReload="+(new Date).getTime(),f.setAttribute("href",g)}}}}window.addEventListener&&window.addEventListener("keypress",a)}function b(){c.site.isDev===!0&&a()}var c=window.meerkat;c.modules.register("development",{init:b})}(jQuery),function(a){function b(){return a("html").css("font-family").replace(/'/g,"").replace(/\"/g,"")}function c(){a(window).resize(_.debounce(function(){var a=b();d.messaging.publish(f.RESIZE_DEBOUNCED,{previousState:g,state:a}),a!==g&&(d.messaging.publish(f.STATE_CHANGE,{previousState:g,state:a}),d.messaging.publish(f["STATE_ENTER_"+a.toUpperCase()]),g&&d.messaging.publish(f["STATE_LEAVE_"+g.toUpperCase()]),g=a)}))}var d=window.meerkat,e=(d.modules.events,d.logging.info,{device:{RESIZE_DEBOUNCED:"DEVICE_RESIZE_DEBOUNCED",STATE_CHANGE:"DEVICE_MEDIA_STATE_CHANGE",STATE_ENTER_XS:"DEVICE_STATE_ENTER_XS",STATE_ENTER_SM:"DEVICE_STATE_ENTER_SM",STATE_ENTER_MD:"DEVICE_STATE_ENTER_MD",STATE_ENTER_LG:"DEVICE_STATE_ENTER_LG",STATE_LEAVE_XS:"DEVICE_STATE_LEAVE_XS",STATE_LEAVE_SM:"DEVICE_STATE_LEAVE_SM",STATE_LEAVE_MD:"DEVICE_STATE_LEAVE_MD",STATE_LEAVE_LG:"DEVICE_STATE_LEAVE_LG"}}),f=e.device,g=!1;d.modules.register("deviceMediaState",{init:c,events:e,get:b})}(jQuery),function(a){function b(b){var d=a.extend({},q,b);m="xs"===k.modules.deviceMediaState.get()?!0:!1,d.id="mkDialog_"+n,n++,null!=d.hashId&&k.modules.address.appendToHash(d.hashId);var g=_.template(d.templates.dialogWindow);null!=d.url&&(d.htmlContent=k.modules.loadingAnimation.getTemplate());var h=g(d);return a("#dynamic_dom").append(h),a("#"+d.id).modal({show:!0,backdrop:d.buttons&&d.buttons.length>0?"static":!0,keyboard:!1}),a("#"+d.id+" button").on("click",function(b){var e=d.buttons[a(b.currentTarget).attr("data-index")];e.closeWindow===!0&&c(a(b.currentTarget).closest(".modal").attr("id")),"function"==typeof e.action&&e.action(b)}),null!=d.url&&k.modules.comms.get({url:d.url,cache:d.cacheUrl,onSuccess:function(a){e(d.id,a),"function"==typeof d.onLoad&&d.onLoad(d.id)}}),window.setTimeout(function(){f(d.id)},0),"function"==typeof d.onOpen&&d.onOpen(d.id),p.push(d),d.id}function c(a){var b=h(a);g(a),"function"==typeof b.onClose&&b.onClose(a)}function d(){a("#dynamic_dom .modal").each(function(b,c){f(a(c).attr("id"))})}function e(b,c){a("#"+b+" .modal-body").html(c),d()}function f(b){m="xs"===k.modules.deviceMediaState.get()?!0:!1;var c=a("#"+b);if(0===c.find(".modal-header").outerHeight(!0))window.setTimeout(function(){f(b)},20);else{var d,e,g,h=c.find(".modal-content"),i=c.find(".modal-dialog");d=a(window).height(),m||(d-=60),e=d,e-=c.find(".modal-header").outerHeight(!0),e-=c.find(".modal-footer").outerHeight(!0),e-=c.find(".modal-closebar").outerHeight(!0),m?(h.css("height",d),c.find(".modal-body").css("height",e),g=0,i.css("top",g)):(h.css("max-height",d),c.find(".modal-body").css("max-height",e),g=d/2-i.height()/2,h.height()<d&&(g/=2),i.css("top",g))}}function g(b){if(b&&0!==b.length){var c=a("#"+b);c.on("hidden.bs.modal",function(){c.find("button").unbind(),c.remove()}),c.modal("hide");var d=h(b);if(null!=d){if(null!=d.hashId){k.modules.address.removeFromHash(d.hashId);var e=_.findWhere(o,{hashId:d.hashId});null==e&&o.push(d)}p.splice(d.index,1)}}}function h(a){var b=i(a);return null!==b?(p[b].index=b,p[b]):null}function i(a){for(var b=0;b<p.length;b++)if(p[b].id==a)return b;return null}function j(){a(document).ready(function(){a(document).on("click",".btn-close-dialog",function(){c(a(this).closest(".modal").attr("id"))}),Modernizr.touch&&(a(document).on("touchmove",".modal",function(a){a.preventDefault()}),a(document).on("touchmove",".modal .modal-body",function(a){a.stopPropagation()}))});var e=this;k.messaging.subscribe(l.dynamicContentLoading.PARSED_DIALOG,function(c){var d,e=c.element.attr("data-dialog-hash-id"),f=null;""!==e&&(f=e),d="url"===c.contentType?{title:c.element.attr("data-title"),url:c.contentValue,cacheUrl:c.element.attr("data-cache")?!0:!1}:{title:a(c.contentValue).attr("data-title"),htmlContent:c.contentValue};var g=a.extend({hashId:f,closeOnHashChange:!0},d);b(g)});var f=_.debounce(d,300);a(window).resize(f),k.messaging.subscribe(l.ADDRESS_CHANGE,function(a){for(var b=p.length-1;b>=0;b--){var c=p[b];c.closeOnHashChange===!0&&-1==_.indexOf(a.hashArray,c.hashId)&&e.destroyDialog(c.id)}for(var d=0;d<a.hashArray.length;d++){var f=_.findWhere(p,{hashId:a.hashArray[d]});if(null==f){var g=_.findWhere(o,{hashId:a.hashArray[d]});null!=g&&k.modules.dialogs.show(g)}}},window)}var k=window.meerkat,l=k.modules.events,m=(k.logging.info,"xs"===k.modules.deviceMediaState.get()?!0:!1),n=0,o=[],p=[],q={title:"",htmlContent:null,url:null,cacheUrl:!1,buttons:[],className:"",hashId:null,closeOnHashChange:!1,templates:{dialogWindow:'<div id="{{= id }}" class="modal" tabindex="-1" role="dialog" aria-labelledby="{{= id }}_title" aria-hidden="true">\n						<div class="modal-dialog {{= className }}">\n							<div class="modal-content">\n								<div class="modal-closebar">\n									<a href="javascript:;" class="btn btn-close-dialog"><span class="icon icon-cross"></span></a>\n								</div>\n								{{ if(title != "" ){ }}\n								<div class="modal-header"><h4 class="modal-title" id="{{= id }}_title">{{= title }}</h4></div>\n								{{ } }}\n								<div class="modal-body">\n									{{= htmlContent }}\n								</div>\n								{{ if(typeof buttons !== "undefined" && buttons.length > 0 ){ }}\n									<div class="modal-footer {{ if(buttons.length > 1 ){ }} mustShow {{ } }}">\n										{{ _.each(buttons, function(button, iterator) { }}\n											<button data-index="{{= iterator }}" type="button" class="btn {{= button.className }} ">{{= button.label }}</button>\n										{{ }); }}\n									</div>\n								{{ } }}\n							</div>\n						</div>\n					</div>'},onOpen:function(){},onClose:function(){},onLoad:function(){}};k.modules.register("dialogs",{init:j,show:b,calculateLayout:d,changeContent:e,destroyDialog:g,resizeDialog:f})}(jQuery),function(a){function b(){a(document).ready(function(){Modernizr.touch&&(a(document).on("touchmove",".dropdown-backdrop, .dropdown-interactive form",function(a){a.preventDefault(),a.stopPropagation()}),a(document).on("touchmove",".dropdown-interactive .scrollable",function(a){a.stopPropagation()}))}),a(document).on("show.bs.dropdown",function(b){c(a(b.target))}),a(document).on("shown.bs.dropdown",function(b){if(b.target){var c=!0;"xs"===g.modules.deviceMediaState.get()&&(c=!1),_.defer(function(){d(a(b.target),c)&&a(document.body).addClass("dropdown-fitviewport")}),a(document.body).addClass("dropdown-open")}}),a(document).on("hidden.bs.dropdown",function(){a(document.body).removeClass("dropdown-open").removeClass("dropdown-fitviewport")}),g.messaging.subscribe(h.device.RESIZE_DEBOUNCED,function(){a(".dropdown-interactive").each(function(){var b=a(this);b.removeAttr("data-maxheight"),e(b),b.hasClass("open")&&(d(b,!1)&&a(document.body).addClass("dropdown-fitviewport"),a(document.body).addClass("dropdown-open"))})})}function c(a){var b=a.closest(".dropdown-interactive-base"),c=a.closest(".dropdown-interactive");return b.length&&c.length?i.prependTo(b).on("click",f):c.length?i.prependTo(c).on("click",f):void 0}function d(b,c){if(b&&0!==b.length){var d=0,f=0,h=0;return c===!0&&b.attr("data-maxheight")?f=b.attr("data-maxheight"):(d=a(window).height(),"xs"===g.modules.deviceMediaState.get()?(h+=a("header .navbar-header").outerHeight(),h+=b.find(".activator").outerHeight(),b.prevAll("li:visible").each(function(){h+=a(this).outerHeight()})):(h+=20,b.closest(".navbar-affix").each(function(){h+=a(this).outerHeight()})),h+=b.find("form").outerHeight()-b.find(".scrollable").outerHeight(),f=d-h,b.attr("data-maxheight",f)),f>0?(b.find(".dropdown-container .scrollable").css("max-height",f).css("overflow-y","auto"),!0):(e(b),!1)}}function e(a){a.find(".dropdown-container .scrollable").css("max-height","")}function f(){a('[data-toggle="dropdown"]').parent(".open").children('[data-toggle="dropdown"]').dropdown("toggle")}var g=window.meerkat,h=g.modules.events,i=(g.logging.info,a('<div class="dropdown-backdrop" />'));g.modules.register("dropdownInteractive",{init:b,fitIntoViewport:d,addBackdrop:c})}(jQuery),function(a){function b(){c()}function c(){a(document.body).on("click","a[data-content]",function(a){a.preventDefault(),a.stopPropagation(),d(a)}),a(document.body).on("mouseenter",'[data-trigger=mouseenter], [data-trigger="mouseenter click"]',function(a){d(a)})}function d(b){var c=null,d=null,f=a(b.currentTarget),h=f.attr("data-content"),i=f.attr("data-toggle");if("undefined"!=typeof i&&""!==i){var j=h.split(".");"#"===h[0]||"."===h[0]?(c="selector",d=a(h).html()):"jsp"==j[j.length-1]||"html"==j[j.length-1]?(c="url",d=h):"helpid:"==h.substr(0,7)?(c="url",d="ajax/xml/help.jsp?id="+h.substr(7,h.length)):(c="content",d=h),e.messaging.publish(g["PARSED_"+i.toUpperCase()],{element:f,contentType:c,contentValue:d})}}var e=window.meerkat,f=(e.modules.events,e.logging.info,{dynamicContentLoading:{PARSED_POPOVER:"DYNAMIC_CONTENT_PARSED_POPOVER",PARSED_DIALOG:"DYNAMIC_CONTENT_PARSED_DIALOG"}}),g=f.dynamicContentLoading;e.modules.register("dynamicContentLoading",{init:b,events:f})}(jQuery),function(a){function b(b){var f=a.extend({},e,b);if(f.silent===!1&&c(f.fatal,f.message),f.fatal)try{d.modules.writeQuote.write({triggeredsave:"fatalerror",triggeredsavereason:f.description},!1)}catch(g){}d.modules.comms.post({url:"ajax/write/register_fatal_error.jsp",data:f,useDefaultErrorHandling:!1,onError:function(){}})}function c(a,b){var c;a?(c=[{label:"Refresh page",className:"btn-primary",action:function(){location.reload()},closeWindow:!1}],d.site.isDev===!0&&c.push({label:"Attempt to continue [dev only]",className:"btn-default",action:null,closeWindow:!0})):c=[{label:"OK",className:"btn-primary",closeWindow:!0}],d.modules.dialogs.show({title:"Error",htmlContent:b,buttons:c})}var d=window.meerkat,e=(d.logging.info,{fatal:!1,silent:!1,page:"unknown",message:"Sorry, an error has occured",description:"unknown",data:null,property:d.site.brand});d.modules.register("errorHandling",{error:b})}(jQuery),function(a){function b(){}function c(a){return e(a).serializeArray()}function d(a){return e(a).serialize()}function e(b){return b.find(":input:visible, input[type=hidden], :input[data-visible=true], :input[data-initValue=true]").filter(function(){return""!==a(this).val()&&"Please choose..."!==a(this).val()})}function f(a){a.find(":input[data-initValue]").removeAttr("data-initValue"),a.find(":input[data-visible]").removeAttr("data-visible"),a.find(":input:visible").attr("data-visible","true")}function g(b){$elements=b.find(":input").filter(function(){return""!==a(this).val()&&"Please choose..."!==a(this).val()}),$elements.attr("data-initValue","true")}function h(a,b,c){a.append('<input type="hidden" id="'+b+'" name="'+b+'" data-visible="true" value="'+c+'" />')}{var i=window.meerkat,j=(i.modules.events,i.logging.info,i.messaging,{form:{}});j.form}i.modules.register("form",{init:b,events:j,getData:c,getSerializedData:d,appendHiddenField:h,markFieldsAsVisible:f,markInitialFieldsWithValue:g})}(jQuery),function(a){function b(){var b=f.modules.performanceProfiling.isIos(),g=f.modules.performanceProfiling.isAndroid(),h=f.modules.performanceProfiling.isChrome();a(document).ready(function(){var f=!1;Modernizr.inputtypes.date&&(b||g&&h)&&(f=!0),a("[data-provide=dateinput]").each(function(){var b=a(this);f?(b.attr("data-dateinput-type","native"),b.find(".dateinput-tripleField").addClass("hidden"),b.find(".dateinput-nativePicker").removeClass("hidden").find("input").on("change",e)):b.find("input.dateinput-day, input.dateinput-month, input.dateinput-year").on("input",d).on("change",e);var g=b.find(".serialise");c(b,g.val()),g.on("change",function(){c(b,this.value)})})})}function c(a,b){var c=b.split("/"),d="";1!=a.attr("data-locked")&&(a.attr("data-locked",1),0===b.length||3!==c.length?c=["","",""]:(1===c[0].length&&(c[0]="0"+c[0]),1===c[1].length&&(c[1]="0"+c[1]),4===c[2].length&&2===c[1].length&&2===c[0].length&&(d=c[2]+"-"+c[1]+"-"+c[0])),a.find("input.dateinput-day").val(c[0]),a.find("input.dateinput-month").val(c[1]),a.find("input.dateinput-year").val(c[2]),a.find(".dateinput-nativePicker input").val(d),(f.modules.performanceProfiling.isIE8()||f.modules.performanceProfiling.isIE9())&&(f.modules.placeholder.invalidatePlaceholder(a.find("input.dateinput-day")),f.modules.placeholder.invalidatePlaceholder(a.find("input.dateinput-month")),f.modules.placeholder.invalidatePlaceholder(a.find("input.dateinput-year"))),a.removeAttr("data-locked"))}function d(){var b=a(this);if(b.attr("maxlength")&&!b.hasClass("year")&&b.val().length==b.attr("maxlength")){var c=b.hasClass("dateinput-day")?"input.dateinput-month":"input.dateinput-year";b.closest('[data-provide="dateinput"]').find(c).focus().select()}}function e(){var b=a(this).parents('[data-provide="dateinput"]'),c=b.find(".serialise"),d="",e="",f="";if(1!=b.attr("data-locked")){if(b.attr("data-locked",1),"native"==b.attr("data-dateinput-type")){var g=this.value.length>0?this.value.split("-"):["","",""];f=g[0],e=g[1],d=g[2]}else d=b.find("input.dateinput-day").val(),e=b.find("input.dateinput-month").val(),f=b.find("input.dateinput-year").val();1===d.length&&(d="0"+d),1===e.length&&(e="0"+e),d.length>0&&Number(d)>0&&e.length>0&&Number(e)>0&&f.length>0&&Number(f)>0?(c.val(d+"/"+e+"/"+f),c.valid()):c.val(""),c.change(),b.removeAttr("data-locked")}}var f=window.meerkat;f.modules.register("formDateInput",{init:b})}(jQuery),function(a){function b(){Modernizr.input.placeholder&&c()}function c(){var b=a("input[data-placeholder-unfocused]");b.each(function(){var b=a(this),c="";b.attr("placeholder")&&(c=b.attr("placeholder")),b.attr("data-placeholder",c),b.attr("placeholder",b.attr("data-placeholder-unfocused")),b.on("focus.formPlaceholders.unfocused",function(){a(this).attr("placeholder",a(this).attr("data-placeholder"))}),b.on("blur.formPlaceholders.unfocused",function(){a(this).val().length>0||a(this).attr("placeholder",a(this).attr("data-placeholder-unfocused"))})})}var d=window.meerkat;d.modules.register("formPlaceholders",{init:b})}(jQuery),function(a){function b(b){function d(a,b){a>=G.steps.length&&b(null);var c=G.steps[a];if(c.navigationId===G.startStepId)b(c,!0);else try{c.initialised=!0,null!=c.onInitialise&&c.onInitialise(l),z(c),null!=c.onBeforeEnter&&c.onBeforeEnter(l),null!=c.onAfterEnter&&c.onAfterEnter(l),E=c,n(c,function(){null!=E.onBeforeLeave&&E.onBeforeLeave(l),null!=E.onAfterLeave&&E.onAfterLeave(l),_.defer(function(){d(a+1,b)})})}catch(e){A.logging.info("[journeyEngine]",e),b(c,!1)}}if(null===b)return h(),!1;a.extend(G,b),a(G.slideContainer+" ."+G.slideClassName).removeClass("active").addClass("hiddenSlide");for(var e=0;e<G.steps.length;e++)G.steps[e]=a.extend({},H,G.steps[e]);if(null===G.startStepId&&""===A.modules.address.getWindowHash())G.startStepId=G.steps[0].navigationId,A.modules.address.setStartHash(G.startStepId),c({navigationId:G.startStepId});else{if(null===G.startStepId){var i=A.modules.address.getWindowHashAt(0),j=k(i);G.startStepId=null===j?G.steps[0].navigationId:i}var l={};l.direction=D.DIRECTION_FORWARD,l.isForward=!0,l.isBackward=!1,l.isStartMode=!0;var m=G.steps[0];d(0,function(a,b){null==a&&(a=m),G.startStepId=a.navigationId,b?E=null:(g(E,!1,null),f(l,null,!1)),""!==A.modules.address.getWindowHash()&&A.modules.address.getWindowHash()!==G.startStepId?A.modules.address.setHash(G.startStepId):(A.modules.address.setStartHash(G.startStepId),c({navigationId:G.startStepId}))})}A.messaging.publish(D.READY,this)}function c(b){try{b.isStartMode=!1,""===b.navigationId&&(b.navigationId=G.startStepId);var c=k(b.navigationId);if(c.stepIndex=i(c.navigationId),null===c)throw"Undefined step";if(null===E)b.direction=D.DIRECTION_FORWARD,b.isForward=!0,b.isBackward=!1,d(c,b);else{if(b.previousNavigationId=E.navigationId,b.navigationId==E.navigationId)return!1;if(i(c.navigationId)<i(E.navigationId))b.direction=D.DIRECTION_BACKWARD,b.isForward=!1,b.isBackward=!0,d(c,b);else{if(i(c.navigationId)!=i(E.navigationId)+1)throw"Moving forward too many steps. "+E.navigationId+" to "+b.navigationId;b.direction=D.DIRECTION_FORWARD,b.isForward=!0,b.isBackward=!1,"1"==a(G.slideContainer).attr("data-prevalidation-completed")?(a(G.slideContainer).removeAttr("data-prevalidation-completed"),d(c,b)):n(E,function(){d(c,b)})}}}catch(e){return q(),A.modules.address.setHash(E.navigationId),A.logging.info("[journeyEngine]",e),!1}return!0}function d(a,b){null!==E&&null!=E.onBeforeLeave&&E.onBeforeLeave(b),a.initialised===!1&&null!=a.onInitialise&&a.onInitialise(b),a.initialised=!0,z(a),null!=a.onBeforeEnter&&a.onBeforeEnter(b),e(a,b)}function e(b,c){function d(){null!=E&&null!=E.onAfterLeave&&E.onAfterLeave(c)}var e=E;null===E||b.slideIndex==E.slideIndex?(d(),null===E&&g(b,!1),E=b,f(c,e,!0)):($slide=a(G.slideContainer+" ."+G.slideClassName+":eq("+E.slideIndex+")"),$slide.fadeOut(250,function(){$slide.removeClass("active").addClass("hiddenSlide"),d(),E=b,g(b,!0,function(){f(c,e,!0)})}))}function f(b,c,d){a("body").attr("data-step",E.navigationId);var e=A.site.title;null!=E.title&&(e=E.title+" - "+e),window.document.title=e,E.slideScrollTo&&null!==E.slideScrollTo&&A.modules.utilities.scrollPageTo(E.slideScrollTo),d===!0&&null!=E.onAfterEnter&&E.onAfterEnter(b),q();var f=D.STEP_INIT;null!==c&&(f=D.STEP_CHANGED),f===D.STEP_INIT&&h(),b.step=E,b.navigationId=E.navigationId,A.messaging.publish(f,b),null!=E.tracking&&A.messaging.publish(B.tracking.TOUCH,E.tracking),null!=E.externalTracking&&A.messaging.publish(B.tracking.EXTERNAL,E.externalTracking)}function g(b,c,d){$slide=a(G.slideContainer+" ."+G.slideClassName+":eq("+b.slideIndex+")"),c===!0?$slide.fadeIn(250,function(){$slide.removeClass("hiddenSlide").addClass("active"),null!=d&&d()}):($slide.removeClass("hiddenSlide").addClass("active"),null!=d&&d())}function h(){a(document.body).removeClass("jeinit")}function i(a){for(var b=0;b<G.steps.length;b++){var c=G.steps[b];if(c.navigationId==a)return b}}function j(){return G.steps.length}function k(a){var b=i(a);return null==b?null:G.steps[b]}function l(){return i(E.navigationId)}function m(){return E}function n(b,c){var d=!1;if(null!=b.validation){if(b.validation.validate===!0){var e=!1;a("."+G.slideClassName+":eq("+b.slideIndex+"):visible").length>0&&(e=!0);var f=a("."+G.slideClassName+":eq("+b.slideIndex+")");f.removeClass("hiddenSlide").addClass("active"),A.modules.form.markFieldsAsVisible(f);var g=!0;if(f.find("form").each(function(b,c){$element=a(c);var d=$element.valid();d===!1&&(g=!1)}),e===!1&&f.removeClass("active").addClass("hiddenSlide"),g===!1)throw"Validation failed on "+b.navigationId}null!=b.validation.customValidation&&(d=!0,b.validation.customValidation(function(a){if(!a)throw"Custom validation failed on "+b.navigationId;c(!0)}))}return d===!1&&c(!0),!0}function o(){return a(G.slideContainer+" ."+G.slideClassName+":eq("+E.slideIndex+") form").valid()}function p(){a(G.slideContainer).attr("data-locked","1")}function q(){a(G.slideContainer).removeAttr("data-locked")}function r(){return"1"==a(G.slideContainer).attr("data-locked")}function s(b){var c=a(b.currentTarget);return c.is(".disabled, :disabled")?!1:(b.preventDefault(),b.stopPropagation(),void t(c.attr("data-slide-control"),c))}function t(b,c){"undefined"!=typeof c&&c.hasClass("show-loading")&&A.modules.loadingAnimation.showAfter(c);try{if(r())throw"Journey engine action in progress (isLocked)";p();var d=b;if(E.navigationId!==d){var e;if("next"==d||"previous"==d){var f=i(E.navigationId),g=null;if("next"==d){if(e="forward",g=f+1,g>=G.steps.length)throw"No next steps"}else if(e="backward",g=f-1,0>g)throw"No previous steps";d=G.steps[g].navigationId}i(d)==i(E.navigationId)+1&&"forward"==e?n(E,function(){a(G.slideContainer).attr("data-prevalidation-completed","1"),A.modules.address.setHash(d),"undefined"!=typeof c&&A.modules.loadingAnimation.hide(c)}):(A.modules.address.setHash(d),"undefined"!=typeof c&&A.modules.loadingAnimation.hide(c))}}catch(h){q(),A.logging.info("[journeyEngineListener]",h),"undefined"!=typeof c&&A.modules.loadingAnimation.hide(c)}}function u(){A.messaging.subscribe(B.ADDRESS_CHANGE,function(a){return F===!0?void A.modules.address.setHash(E.navigationId):void c({navigationId:a.hashArray[0]})},window),a(document.body).on("click","a[data-slide-control]",s),A.messaging.subscribe(B.WEBAPP_LOCK,function(){F=!0,a("a[data-slide-control]:visible").each(function(){a(this).addClass("disabled").addClass("inactive")})}),A.messaging.subscribe(B.WEBAPP_UNLOCK,function(){F=!1,a("a[data-slide-control]:visible").each(function(){a(this).removeClass("disabled").removeClass("inactive")})})}function v(){return A.modules.form.getData(a("#mainform"))}function w(){return A.modules.form.getSerializedData(a("#mainform"))}function x(b,c){b=b||"Please wait...",c=c||!1;var d=a("#journeyEngineLoading");"1"!==d.attr("data-active")&&(d.attr("data-active","1"),d.find(".message").attr("data-oldtext",d.find(".message").text()).text(b),d.addClass("displayBlock"),c?d.addClass("opacity1"):_.defer(function(){d.addClass("opacity1")}))}function y(){var b=a("#journeyEngineLoading");b.attr("data-active","0"),b.removeClass("opacity1");var c=b.transitionDuration();_.delay(function(){b.removeClass("displayBlock"),b.find(".message").text(b.find(".message").attr("data-oldtext"))},c)}function z(b){a("#"+A.site.vertical+"_journey_stage").val(b.navigationId)}var A=window.meerkat,B=A.modules.events,C=(A.logging.info,{journeyEngine:{DIRECTION_FORWARD:"DIRECTION_FORWARD",DIRECTION_BACKWARD:"DIRECTION_BACKWARD",STEP_CHANGED:"STEP_CHANGED",STEP_INIT:"STEP_INIT",READY:"JOURNEY_READY"}}),D=C.journeyEngine,E=null,F=!1,G={startStepId:null,steps:[],progressBarSteps:[],slideContainer:"#journeyEngineContainer",slideClassName:"journeyEngineSlide",transition:null},H={title:null,navigationId:null,slideId:null,initialised:!1,onInitialise:null,onBeforeEnter:null,onAfterEnter:null,onBeforeLeave:null,onAfterLeave:null,validation:{validate:!0,customValidation:null},slideScrollTo:"html, body",tracking:null,externalTracking:null};A.modules.register("journeyEngine",{init:u,events:C,configure:b,getCurrentStepIndex:l,getStepsTotalNum:j,isCurrentStepValid:o,getFormData:v,getSerializedFormData:w,getCurrentStep:m,loadingShow:x,loadingHide:y,"goto":t})}(jQuery),function(a){function b(){h.messaging.subscribe(i.journeyEngine.STEP_INIT,function(a){n=a.navigationId,d(!0)}),h.messaging.subscribe(i.journeyEngine.STEP_CHANGED,function(a){n=a.navigationId,d(!1)})}function c(b){m=b;var c=99/m.length;l=a(".journeyProgressBar"),a("head").append("<style>.journeyProgressBar>li{ width: "+c+"% }</style>")}function d(a){var b="",c="",d="",e=m.length-1,f=null,g=null,i=!1,j=!1;_.each(m,function(a,h){f="",g="",j=n===a.navigationId||-1!=_.indexOf(a.matchAdditionalSteps,n),j?(f=' class="current"',i=!0):i?g=' tabindex="-1"':f=' class="complete"',o||j||i?c=d="div":(c='a href="javascript:;"'+g+' data-slide-control="'+a.navigationId+'"',d="a"),b+="<li"+f+"><"+c+">"+a.label+"</"+d+"></li>",h==e&&(f="","complete"==n&&(f=" complete"),b+='<li class="end'+f+'"><div></div></li>')}),l.html(b),a&&h.messaging.publish(k.INIT)}function e(){n="complete",l.addClass("complete"),d()}function f(a){n=a,d()}function g(){o=!0,d()}var h=window.meerkat,i=h.modules.events,j={journeyProgressBar:{INIT:"PROGRESS_BAR_INITED"}},k=j.journeyProgressBar,l=null,m=null,n=null,o=!1;h.modules.register("journeyProgressBar",{init:b,render:d,events:j,configure:c,disable:g,setComplete:e,setCurrentStepNavigationId:f})}(jQuery),function(a){function b(a){a!==h&&(f.html(c(f.html(),a)),i=h,h=a)}function c(a,b){var c=new RegExp(h,"g");return a.replace(c,b)}function d(){var a=0;try{"undefined"!=typeof referenceNo&&referenceNo.getTransactionID?a=referenceNo.getTransactionID():"undefined"!=typeof Track&&Track._getTransactionId&&(a=Track._getTransactionId())}catch(b){}k_button.setCustomVariable(7891,a)}function e(){a(document).ready(function(){f=a("#kampyle"),0!==f.length&&(f.prependTo(a("#footer .container")),f.attr("data-kampyle-formid")&&(h=f.attr("data-kampyle-formid")),f.on("click","#kampylink",function(a){d(),"undefined"!=typeof k_button&&(a.preventDefault(),k_button.open_ff("site_code=7343362&lang=en&form_id="+h)),g.modules.writeQuote.write({triggeredsave:"kampyle"})}))})}var f,g=window.meerkat,h=(g.modules.events,g.logging.info,""),i="";g.modules.register("kampyle",{init:e,setFormId:b})}(jQuery),function(a){function b(b){return b.each(function(){var b=a(this),c=b.attr("data-loadinganimation");"after"===c?b.next(".spinner").hide():"inside"===c&&b.find(".spinner").hide()}),b.find(".spinner")}function c(b){return b.each(function(){var b=a(this),c=b.next(".spinner");c.length>0?c.show():(b.attr("data-loadinganimation","after"),b.after(e()))}),b.find(".spinner")}function d(b,c){return b.each(function(){var b=a(this),d=b.find(".spinner");d.length>0?d.show():(b.attr("data-loadinganimation","inside"),c===!0?b.append(e()):b.prepend(e()))}),b.find(".spinner")}function e(){return'<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>'}{var f=window.meerkat;f.logging.info}f.modules.register("loadingAnimation",{hide:b,showAfter:c,showInside:d,getTemplate:e})}(jQuery),function(a){function b(){return window.webkitNotifications?!0:!1}function c(){b()&&a(".notificationsSupport").show()}function d(){b()&&0!==window.webkitNotifications.checkPermission()&&window.webkitNotifications.requestPermission(e)}function e(){if(b())switch(window.webkitNotifications.checkPermission()){case 0:return!0;case 2:l("Notifications Denied");break;default:return!1}}function f(a,c,d){return b()?0===window.webkitNotifications.checkPermission()?window.webkitNotifications.createNotification(a,c,d):(l("Notification creation failed - no permission"),!1):!1}function g(a,b,c){var d=f(a,b,c);d?d.show():l("No notification object was created")}function h(){if(b()){var a=f("brand/ctm/images/call_us_now/phone.png","Title","Message");a&&(a.ondisplay=function(){k("ondisplay")},a.onclose=function(){k("onclose")},a.show())}else l("Notifications Not Supported")}function i(){c(),b()&&a("[data-notifications-auth]").on("click",d)}var j=window.meerkat,k=j.logging.info,l=j.logging.error;j.modules.register("notifications",{init:i,create:f,show:g,check:e,request:d,test:h})}(jQuery),function(a){function b(){}function c(a){var b={save_email:a.data.value,vertical:d.site.vertical};return d.modules.comms.post({url:"ajax/json/get_user_exists.jsp",data:b,dataType:"json",cache:!1,isFatalError:!1,onSuccess:function(b){"function"==typeof a.onSuccess&&a.onSuccess(b)},onError:function(){"function"==typeof a.onError&&a.onError()},onComplete:function(){"function"==typeof a.onComplete&&a.onComplete()}})}{var d=window.meerkat,e=(d.modules.events,d.logging.info,d.messaging,{optIn:{}});e.optIn}d.modules.register("optIn",{init:b,events:e,fetch:c})}(jQuery),function(){function a(a){var b=(new Date).getTime(),c={name:a,startTime:b};l.push(c)}function b(a){var b=(new Date).getTime(),c=_.findWhere(l,{name:a});if("undefined"==typeof c)return null;var d=l.indexOf(c);l.splice(d,1);var e=b-c.startTime;return e}function c(){return!!navigator.platform.match(/iPhone|iPod|iPad/i)}function d(){return navigator.userAgent.toLowerCase().indexOf("android")>-1}function e(){return navigator.userAgent.toLowerCase().indexOf("chrome")>-1}function f(){return 8===j()?!0:!1}function g(){return 9===j()?!0:!1}function h(){return c()&&navigator.userAgent.match(/OS 6/)?!0:!1}function i(){return c()&&navigator.userAgent.match(/OS 7/)?!0:!1}function j(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");return b>0?parseInt(a.substring(b+5,a.indexOf(".",b))):null}var k=window.meerkat,l=(k.modules.events,[]),m={LOW:"low",MEDIUM:"medium",HIGH:"high"};k.modules.register("performanceProfiling",{PERFORMANCE:m,startTest:a,endTest:b,isIos6:h,isIos7:i,isIos:c,isAndroid:d,isChrome:e,isIE8:f,isIE9:g})}(jQuery),function(a){function b(){var b,c=a(this);c.data("fakeplaceholder")||c.is("[type=checkbox]")||c.is("[type=radio]")||c.is("[type=hidden]")||c.is("[type=file]")||(b=a("<div/>",{"class":"fakeplaceholder"}),b.height(c.height()-c.css("padding-bottom").replace("px","")).css({"margin-top":c.css("margin-top"),"margin-bottom":c.css("margin-bottom"),"margin-left":c.css("margin-left"),"margin-right":c.css("margin-right"),"padding-top":c.css("padding-top"),"padding-bottom":c.css("padding-bottom"),"padding-left":c.css("padding-left"),"padding-right":c.css("padding-right"),"font-size":c.css("font-size"),"line-height":c.css("line-height"),color:c.css("color")}).data("for",c),c.before(b.text(c.attr("placeholder"))).data("fakeplaceholder",b),c.val()&&b.hide())}function c(c){if(!h){var d=a(c||document).find("[placeholder]");d.each(b)}}function d(){h||(c(),a(document).on("focus.fakeplaceholder","input[placeholder]",function(){var b=a(this),c=b.data("fakeplaceholder");c.hide()}).on("blur.fakeplaceholder","input[placeholder]",function(){var b=a(this),c=b.data("fakeplaceholder");!b.val()&&c.show()}).on("click.fakeplaceholder",".fakeplaceholder",function(){a(this).data("for").focus()}),g("[Placeholder] Initialised"))}function e(a){placeholder=a.data("fakeplaceholder"),placeholder&&placeholder.length>0&&(a.val()?placeholder.hide():placeholder.show())}var f=window.meerkat,g=f.logging.info,h=Modernizr.input.placeholder;f.modules.register("placeholder",{init:d,initPlaceholders:c,invalidatePlaceholder:e})}(jQuery),function(a){function b(){if(navigator.userAgent.match(/IEMobile\/10\.0/)){var b=document.createElement("style");b.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.getElementsByTagName("head")[0].appendChild(b)}d&&a(document).on("click",'form button[type="submit"]',function(b){b.preventDefault(),a(this).closest("form").submit()}).on("keypress","form input",function(b){13===b.which&&a(this).closest("form").submit()}),a(function(){"undefined"!=typeof FastClick&&FastClick.attach(document.body)})}var c=window.meerkat,d="button"===document.createElement("button").type;c.modules.register("polyfills",{init:b})}(jQuery),function(a){function b(b){var c=a.extend({},e,b),f="",g=null;"url"==c.contentType?g=function(b,e){var g=d.modules.loadingAnimation.getTemplate();return d.modules.comms.get({url:c.contentValue,cache:!0,isFatalError:!1,onSuccess:function(b){var c="";a(b).find("help").each(function(){""===f&&(f=a(this).attr("header")),c+=a(this).text()}),g=c,e.set("content.text",c),e.set("content.title",f),e.reposition()}}),g}:(g=c.contentValue,f=c.element.attr("data-title"));var h=null;h=c.element.attr("data-trigger")?c.element.attr("data-trigger"):c.showEvent;var i=null;switch(h){case"mouseenter":i="mouseleave";break;case"mouseenter click":case"click mouseenter":i="mouseleave unfocus click";break;default:i="unfocus click"}return c.element.qtip({content:{text:g,title:f},position:c.position?c.position:{my:c.element.attr("data-my")?c.element.attr("data-my"):"left center",at:c.element.attr("data-at")?c.element.attr("data-at"):"right center",effect:!1,adjust:{method:"flipinvert none",x:c.element.attr("data-adjust-x")?parseInt(c.element.attr("data-adjust-x")):0,y:c.element.attr("data-adjust-y")?parseInt(c.element.attr("data-adjust-y")):0},viewport:a(window)},show:{event:h},hide:{event:i,fixed:!0,delay:150},style:c.style?c.style:{classes:c.element.attr("data-class")?"popover "+c.element.attr("data-class"):"popover",tip:{corner:!0,width:12,height:6}}}),null!=c.onOpen&&c.onOpen(c.id),c.id}function c(){d.messaging.subscribe("DYNAMIC_CONTENT_PARSED_POPOVER",function(a){a.element.attr("data-hasqtip")||(b(a),a.element.qtip("toggle",!0))})}var d=window.meerkat,e=(d.logging.info,{element:null,contentType:null,contentValue:null,showEvent:"click",onOpen:function(){},onClose:function(){},onLoad:function(){}});d.modules.register("popovers",{init:c,create:b})
}(jQuery),function(a){function b(){a(document).on("change","[data-toggle^=radio] input",function(b){var c,d=a(b.target);c=d.parent().parent().find(".btn"),c.removeClass("active"),d.is(":checked")&&(c=d.parent(),c.addClass("active"))}),a(document).on("focusin","[data-toggle^=radio] input",function(b){var c=a(b.target).parent().parent().find(".btn");c.removeClass("focus"),c=a(b.target).parent(),c.addClass("focus")}),a(document).on("focusout","[data-toggle^=radio] input",function(b){var c=a(b.target).parent().parent().find(".btn");c.removeClass("focus")})}function c(a,b,c){if("undefined"!=typeof a&&0!==a.length){var d=a.find("label:eq("+b+")");return d.contents().filter(function(){return 3===this.nodeType}).each(function(){var a=/[a-z0-9]+/i;if(this.textContent){if(a.test(this.textContent)===!1)return;this.textContent=c}else if(this.innerText){if(a.test(this.innerText)===!1)return;this.innerText=c}}),d}}var d=window.meerkat;d.modules.register("radioGroup",{init:b,changeLabelText:c})}(jQuery),function(a){function b(){a(document).ready(function(){l=a("#resultsPage"),r.messaging.subscribe(s.device.STATE_CHANGE,function(){d(),e(c()),p.addClass("scrolling up"),f(window,t),p.removeClass("scrolling up down")}),r.site.isCallCentreUser||r.messaging.subscribe(s.healthMoreInfo.BRIDGINGPAGE_STATE,function(a){a.isOpen?(e(!1),p.addClass("scrolling up"),r.modules.utilities.scrollPageTo("header",250,0,function(){f(window,t),p.removeClass("scrolling up down")})):e(c())}),a(document).on("resultsLoaded",function(){d()})})}function c(){return r.modules.performanceProfiling.isIE8()||r.site.isCallCentreUser||"xs"===r.modules.deviceMediaState.get()?!1:!0}function d(){m=l.find(".resultsHeadersBg"),n=l.find(".resultsOverflow .result"),o=l.find(".featuresHeaders .result"),p=l.find(".animateTop"),q=a(".navbar-affix"),$header=a("header"),t={navbar:{height:q.height()},header:{height:$header.height()},resultsNav:{height:0}},"xs"===r.modules.deviceMediaState.get()?($fixedResultsNav=a(".navbar-mobile-menu"),t.resultsNav={height:$fixedResultsNav.height()},t.navbar={height:0}):t.resultsNav={height:0}}function e(a){a?l.addClass("resultsHeaderbar"):l.removeClass("resultsHeaderbar")}function f(b,d){var e=0;c()&&(e=a(window).scrollTop());var f=Math.max(0,e-d.header.height+d.navbar.height+d.resultsNav.height);n.css({top:f}),o.css({top:f}),m.css({top:f}),p.removeClass("scrolling up down")}function g(b,c){var d=a(window).scrollTop();d>u?c.addClass("scrolling down"):u>d&&c.addClass("scrolling up"),u=d}function h(a){l.hasClass("resultsHeaderbar")&&(p.addClass("activeScroll"),g(a,p))}function i(a){l.hasClass("resultsHeaderbar")&&(p.removeClass("activeScroll"),f(a,t))}function j(){d(),e(c()),a(window).on("scroll.resultsHeaderbar touchmove.resultsHeaderbar",_.debounce(h,50,!0)),a(window).on("scroll.resultsHeaderbar touchmove.resultsHeaderbar touchend.resultsHeaderbar",_.debounce(i,50))}function k(){a(window).off("scroll.resultsHeaderbar touchmove.resultsHeaderbar"),a(window).off("scroll.resultsHeaderbar touchmove.resultsHeaderbar touchend.resultsHeaderbar")}var l,m,n,o,p,q,r=window.meerkat,s=r.modules.events,t=(window.meerkat.logging.info,{}),u=0;r.modules.register("resultsHeaderbar",{init:b,registerEventListeners:j,removeEventListeners:k})}(jQuery),function(a){function b(){jQuery(document).ready(function(a){y=a("#email-quote-dropdown"),z=a("#email-quote-component"),J=a("#callmeback-save-quote-dropdown"),A=a(".saveQuoteInstructions"),B=a("#save_email"),C=a("#save_password"),D=a("#save_confirm"),E=a("#save_marketing"),F=a(K),G=a(".saveQuotePasswords"),H=a("#saveQuoteSuccess"),I=a(".saveQuoteFields"),B.on("keyup change",e),B.on("blur",function(){a(this).val(a.trim(a(this).val()))}),D.on("keyup change",f),z.on("click",".btn-save-quote",j),y.find(".activator").on("click",c),d(),i(),n(),u.messaging.subscribe(v.WEBAPP_LOCK,s),u.messaging.subscribe(v.WEBAPP_UNLOCK,r)}),w.subscribe(u.modules.events.contactDetails.email.FIELD_CHANGED,function(a){""===B.val()&&B.val(a.$field.val()).trigger("change")})}function c(){Q?(J.hide(),H.hide(),z.show(),I.hide()):(J.hide(),""!==B.val()&&F.hasClass("disabled")&&!a(".saveQuotePasswords").is(":visible")&&B.trigger("change")),0!==J.length&&y.find(".callmeback-feedback").remove()}function d(){null!==z&&0!==z.length&&(setupDefaultValidationOnForm(z),C.length>0&&C.rules("add",{required:!0,minlength:6,messages:{required:"Please enter a password",minlength:jQuery.format("Password must be at least {0} characters")}}),D.length>0&&D.rules("add",{required:!0,equalTo:"#"+C.attr("id"),messages:{required:"Please confirm your password",equalTo:jQuery.format("Password and confirmation password must match")}}))}function e(a){13==a.keyCode||9==a.keyCode?g():L!=B.val()?(q(),clearInterval(M),M=setTimeout(g,800)):""!==C.val()&&""!==C.val()&&p()}function f(){C.valid()&&D.valid()?p():q()}function g(){var a=B.valid();a&&h()}function h(){var a=B.val();L=a,N&&"pending"===N.state()&&N&&N.abort(),q(),u.modules.loadingAnimation.showAfter(B);var b={data:{type:"email",value:a},dataType:"json",cache:!0,isFatalError:!1,onComplete:function(){u.modules.loadingAnimation.hide(B)},onSuccess:function(a){O=a.exists,a.optInMarketing?(n(),E.prop("checked",!0)):o(),u.site.isCallCentreUser||(a.exists?(i("clickSubmit"),m()):(i("createLogin"),l())),p()},onError:function(){O=!1,u.site.isCallCentreUser||(i("createLogin"),l()),u.site.isCallCentreUser?p():""!==C.val()&&""!==D.val()&&D.valid()&&p()}};N=u.modules.optIn.fetch(b)}function i(b){var c="";switch(b){case"clickSubmit":c="Click 'Email quote' to have your quote emailed";break;case"createLogin":c="Please create a login to have your quote emailed";break;case"saveAgain":c='Click \'Save Quote\' to update your saved quote <a href="javascript:;" class="btn btn-primary btn-save-quote">Email Quote</a>';break;default:c=u.site.isCallCentreUser?"Please enter the email you want the quote sent to.":"We will check if you have an existing login or create a new one for you."}A.html(c),"saveAgain"===b&&(F=a(K),F.html("Save Quote"))}function j(){if(z.valid()){if(P&&"pending"===P.state())return;q();var b=a("#mainform");0===a("#saved_email").length&&u.modules.form.appendHiddenField(b,"saved_email",B.val()),0===a("#saved_marketing").length&&u.modules.form.appendHiddenField(b,"saved_marketing",E.val());var c,d=[];switch(c=-1!=a.inArray(u.site.vertical,["car","ip","life"])?"no":"yes",d.push(u.modules.form.getSerializedData(z)),d.push(u.modules.journeyEngine.getSerializedFormData()),d.push("quoteType="+u.site.vertical),d.push("brand="+u.site.brand),d.push("vertical="+u.site.vertical),d.push("sendConfirm="+c),d=d.join("&"),Track._type){case"Health":Health._rates!==!1&&(d+=Health._rates)}u.modules.loadingAnimation.showAfter(F),Q?u.messaging.publish(v.tracking.TOUCH,{touchType:"S",touchComment:null,includeFormData:!0,callback:function(a){k(a.result.success,a.result.transactionId)}}):u.modules.comms.post({url:"ajax/json/save_email_quote_mysql.jsp",data:d,dataType:"json",cache:!1,isFatalError:!1,onSuccess:function(a){k("OK"===a.result,a.transactionId)},onError:function(){(u.site.isCallCentreUser||""!==C.val()&&""!==D.val())&&p()},onComplete:function(){u.modules.loadingAnimation.hide(F)}})}}function k(b,c){p(),u.modules.loadingAnimation.hide(F),b&&(z.hide(),H.fadeIn(),0===J.length||Q||u.modules.callMeBack.hasCallbackBeenRequested()||u.site.isCallCentreUser||(u.modules.callMeBack.prefillForm(J),J.fadeIn()),Q||(Q=!0,i("saveAgain"),y.find(".activator").html("Save Quote")),"undefined"!=typeof referenceNo&&"undefined"!=typeof c&&referenceNo.setTransactionId(c),"car"==u.site.vertical?Track.startSaveRetrieve(referenceNo.getTransactionID(!1),"Save"):-1!==a.inArray(u.site.vertical,["ip","life","health"])&&u.messaging.publish(v.tracking.EXTERNAL,{method:"trackQuoteEvent",object:{action:"Save",transactionID:c}}))}function l(){G.slideDown()}function m(){G.slideUp()}function n(){E.parents(".row").first().hide()}function o(){E.parents(".row").first().show()}function p(){F.removeClass("disabled")}function q(){F.addClass("disabled")}function r(){y.children(".activator").removeClass("inactive").removeClass("disabled")}function s(){t(),y.children(".activator").addClass("inactive").addClass("disabled")}function t(){y.hasClass("open")&&y.find(".activator").dropdown("toggle")}var u=window.meerkat,v=u.modules.events,w=(u.logging.info,u.messaging),x={saveQuote:{}},y=(x.saveQuote,null),z=null,A=null,B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=null,J=null,K=".btn-save-quote",L=null,M=null,N=null,O=null,P=null,Q=!1;u.modules.register("saveQuote",{init:b,events:x,close:t,enable:r,disable:s,enableSubmitButton:p,disableSubmitButton:q})}(jQuery),function(){function a(){sessionExpiry.poke()}function b(){c.messaging.subscribe(d.journeyEngine.STEP_CHANGED,function(){a()})}var c=window.meerkat,d=c.modules.events;c.modules.register("session",{init:b,poke:a})}(jQuery),function(a){function b(){a(document).ready(c)}function c(){return"function"!=typeof a.fn.noUiSlider?void i("[sliders.js]","noUiSlider plugin is not available."):void a(".slider-control").each(function(){var b,c=a(this),i=c.find(".slider"),l=c.find("input"),m=c.find(".selection"),n=i.data("value"),o=i.data("range").split(","),p=i.data("markers"),q=i.data("legend").split(","),r=i.data("type"),s=!1;b=function(a){m.text(a)},"excess"===r&&(l=a("#health_excess"),l.length>0&&l.val().length>0&&(n=l.val()),b=function(a){m.text(a>0&&a<=q.length?q[a-1]:" ")}),"price"===r&&(l=a("#health_filter_priceMin"),s=function(){var b,c,d=o,e=i.val();if(b=a("#health_situation_healthCvr").val(),c=h.modules.healthBenefits.getProductCategory(),"S"==b)switch(c){case"GeneralHealth":o=[0,80];break;case"Hospital":o=[25,185];break;case"Combined":o=[50,280];break;default:o=[0,185]}else if("C"==b)switch(c){case"GeneralHealth":o=[25,160];break;case"Hospital":o=[50,370];break;case"Combined":o=[100,560];break;default:o=[0,370]}else if("SPF"==b)switch(c){case"GeneralHealth":o=[25,155];break;case"Hospital":o=[75,350];break;case"Combined":o=[100,550];break;default:o=[0,350]}else switch(c){case"GeneralHealth":o=[25,160];break;case"Hospital":o=[100,375];break;case"Combined":o=[125,560];break;default:o=[0,375]}f(i,o),e==d[0]&&i.val(o[0])},b=function(b){var c,d,e,f;if(1*b===0)m.text("All prices");else{try{c=h.modules.healthResults.getFrequencyInWords(a("#filter-frequency input:checked").val())}catch(g){}c=h.modules.healthResults.getNumberOfPeriodsForFrequency(c),d=h.modules.health.getRebate(),e=1-d/100,f=12/c,m.text("from $"+Math.round(b*f*e))}},a("#filter-frequency input").on("change",s)),"function"==typeof s&&a(this).on(j,s),c.on(k,function(a,b){g(i,b)}),i.noUiSlider({range:o,handles:1,step:1,start:n,serialization:{to:[[l,b]],resolution:1},behaviour:"extend-tap"}),d(c,p),e(c,q)})}function d(b,c){var d,e,f;if(c>1){for(c-=1,d=a("<div />"),f=0;c>f;f++)e=a("<div />"),e.addClass("slider-marker"),e.css("width",100/c+"%"),d.append(e);d.find(".slider-marker:first").addClass("first"),d.find(".slider-marker").appendTo(b.find(".noUi-base"))}}function e(b,c){var d,e,f;if(c.length>1){for(d=a("<div />"),f=0;f<c.length;f++)e=a("<div><span><b /></span></div>"),e.addClass("slider-legend"),e.css("width",100/(c.length-1)+"%"),e.find("b").text(c[f]),d.append(e);d.find(".slider-legend:first").addClass("first"),d.find(".slider-legend:last").addClass("last"),d.find(".slider-legend").appendTo(b.find(".slider-legends"))}}function f(a,b){a.noUiSlider({range:b},!0);var c=a.data("markers"),e=a.closest(".slider-control");"undefined"!=typeof c&&e.length>0&&d(e,c)}function g(a,b){a.val(b)}var h=window.meerkat,i=h.logging.info,j="UPDATE",k="SET_VALUE";h.modules.register("sliders",{init:b})}(jQuery),function(a){function b(a,b,c,d){var e=[];c&&(e=f.modules.journeyEngine.getFormData()),e.push({name:"quoteType",value:f.site.vertical}),e.push({name:"touchtype",value:a}),e.push({name:"comment",value:b}),f.modules.comms.post({url:"ajax/json/access_touch.jsp",data:e,isFatalError:!1,onSuccess:function(a){"function"==typeof d&&d(a)}})}function c(a,b){var c;try{if(c="function"==typeof b?b():b,"undefined"==typeof superT)throw"Supertag is undefined";null!==c.email&&""!==c.email&&null===c.emailID?d(c.email,c.marketOptIn,c.okToCall,function(b){c.emailID=b,c.email=null,superT[a](c),f.logging.info("Supertag",a,c)}):(superT[a](c),f.logging.info("Supertag",a,c))}catch(e){f.logging.info("Supertag catch",a,c,e)}}function d(a,b,c,d){f.modules.comms.post({url:"ajax/json/get_email_id.jsp",data:{brand:f.site.brand,vertical:f.site.vertical,email:a,m:b,o:c},onSuccess:function(a){d(a.emailId)}})}function e(){a(document).on("click","a[data-tracking-type]",function(b){var c=a(b.currentTarget).attr("data-tracking-type"),d=a(b.currentTarget).attr("data-tracking-value");f.modules.tracking.recordTouch(c,d)}),a(document).on("click","a[data-supertag-method]",function(b){var c=a(b.currentTarget).attr("data-supertag-method"),d=a(b.currentTarget).attr("data-supertag-value");f.modules.tracking.recordSupertag(c,d)}),f.messaging.subscribe(h.TOUCH,function(a){if("undefined"!=typeof a){var c=!1;"undefined"!=typeof a.includeFormData&&a.includeFormData===!0&&(c=!0),b(a.touchType,a.touchComment,c,a.callback)}}),f.messaging.subscribe(h.EXTERNAL,function(a){"undefined"!=typeof a&&c(a.method,a.object)})}var f=window.meerkat,g={tracking:{TOUCH:"TRACKING_TOUCH",EXTERNAL:"TRACKING_EXTERNAL"}},h=g.tracking;f.modules.register("tracking",{init:e,events:g,recordTouch:b,recordSupertag:c})}(jQuery),function(a){function b(a){return a=a.replace(/[^\w\s-]/g,""),a=a.replace(/^\s+/,"").replace(/\s+$/,"").toLowerCase(),a=a.replace(/[-\s]+/g,"-")}function c(b,c,d,e){var f,g=a(b),h=250,i=0;"undefined"!=typeof c&&(h=c),"undefined"!=typeof d&&(i=d),g.offset().top<a(window).scrollTop()?a("html, body").animate({scrollTop:g.offset().top+i},h,function(){f=!0,"function"==typeof e&&e(this,f)}):(f=!1,"function"==typeof e&&e(this,f))}function d(){var a=new Date;return Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),0,0,0)}{var e=window.meerkat;e.logging.info}jQuery.fn.animateAuto=function(a,b,c){var d,e,f;return this.each(function(g,h){h=jQuery(h),d=h.clone().css({height:"auto",width:"auto"}).appendTo("body"),e=d.css("height"),f=d.css("width"),d.remove(),"height"===a?h.animate({height:e},b,c):"width"===a?h.animate({width:f},b,c):"both"===a&&h.animate({width:f,height:e},b,c)})},e.modules.register("utilities",{slugify:b,scrollPageTo:c,getUTCToday:d})}(jQuery),function(){function a(){jQuery(document).ready(function(a){e=a("#mainform")})}function b(a,b){return b?a.valid():e.validate().check(a)===!1?!1:!0}var c=window.meerkat,d=(c.modules.events,c.logging.info,c.messaging,{validation:{}}),e=(d.validation,null);c.modules.register("validation",{init:a,events:d,isValid:b})}(jQuery),jQuery.fn.extend({isValid:function(a){return meerkat.modules.validation.isValid($(this),a)}}),function(){function a(){}function b(a,b,d){var e=[];if(e.push(c.modules.journeyEngine.getSerializedFormData()),e.push("quoteType="+c.site.vertical),e.push("stage="+c.modules.journeyEngine.getCurrentStep().navigationId),e=e.join("&"),"object"==typeof a)for(var f in a)a.hasOwnProperty(f)&&(e+="&"+f+"="+a[f]);c.modules.comms.post({url:"ajax/write/write_quote.jsp",data:e,dataType:"json",cache:!1,isFatalError:b?!0:!1,onSuccess:function(a){"function"==typeof d&&d(a)}})}{var c=window.meerkat,d=(c.modules.events,c.logging.info,c.messaging,{writeQuote:{}});d.writeQuote}c.modules.register("writeQuote",{init:a,events:d,write:b})}(jQuery);
//# sourceMappingURL=modules.ctm.min.map